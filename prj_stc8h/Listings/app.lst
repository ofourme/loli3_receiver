C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE APP
OBJECT MODULE PLACED IN .\Objects\app.obj
COMPILER INVOKED BY: C:\bin\Keil_v5\C51\BIN\C51.EXE ..\src\app.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..\port;..\src) DEBUG O
                    -BJECTEXTEND CODE LISTINCLUDE SYMBOLS PRINT(.\Listings\app.lst) TABS(2) OBJECT(.\Objects\app.obj)

line level    source

   1          /*
   2          ********************************************************************************
   3          *                             ---ofme---
   4          *           Copyleft (c) 2021-2023, 寰椋灞辫胺 / ofourme@163.com
   5          *           License: LGPL
   6          *
   7          *   APP.C-V1.0.0 (2023.Oct.27th)
   8          *
   9          ********************************************************************************
  10          */
  11          
  12          #define __APP_C__
  13          
  14          /*-DO NOT ADD YOUR CODE BEFORE HERE!-*\\\\\\\\\\\\\\\\\\\\\\\\\\\\\-WIDTH: 80-*/
  15          /******************************************************************************/
  16          
  17          #include "loli3_recv.h"
   1      =1  /*
   2      =1  ********************************************************************************
   3      =1  *                             ---ofme---
   4      =1  *           Copyleft (c) 2021-2023, 寰椋灞辫胺 / ofourme@163.com
   5      =1  *           License: LGPL
   6      =1  *
   7      =1  *   LOLI3_RECV.H-V1.0.0 (2023.Sep.25th)
   8      =1  *
   9      =1  ********************************************************************************
  10      =1  */
  11      =1  
  12      =1  #ifndef __LOLI3_RECV_H__
  13      =1  #define __LOLI3_RECV_H__
  14      =1  
  15      =1  /*-DO NOT ADD YOUR CODE BEFORE HERE!-*\\\\\\\\\\\\\\\\\\\\\\\\\\\\\-WIDTH: 80-*/
  16      =1  /******************************************************************************/
  17      =1  
  18      =1  #include "hw.h"
   1      =2  /*
   2      =2  ********************************************************************************
   3      =2  *                             ---ofme---
   4      =2  *           Copyleft (c) 2021-2023, 寰椋灞辫胺 / ofourme@163.com
   5      =2  *           License: LGPL
   6      =2  *
   7      =2  *   HW.H-V1.0.0 (2023.Oct.25th)
   8      =2  *
   9      =2  ********************************************************************************
  10      =2  */
  11      =2  
  12      =2  #ifndef __HW_H__
  13      =2  #define __HW_H__
  14      =2  
  15      =2  /*-DO NOT ADD YOUR CODE BEFORE HERE!-*\\\\\\\\\\\\\\\\\\\\\\\\\\\\\-WIDTH: 80-*/
  16      =2  /******************************************************************************/
  17      =2  
  18      =2  #define STC_15W408AS    0
  19      =2  #define STC_15W408AS_SOP20  0
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 2   

  20      =2  #define ARDUINO_ATMEAG328P  0
  21      =2  #define STC_8H        1
  22      =2  #define STC_8H_TSSOP20    1
  23      =2  
  24      =2  #define FOSC  12000000UL
  25      =2  
  26      =2  /*%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*/
  27      =2  
  28      =2  /*////////////////////////////////////////////////////////////////////////////*/
  29      =2  #if STC_15W408AS
           =2 /*////////////////////////////////////////////////////////////////////////////*/
           =2 
           =2 #include "stc15w.h"
           =2 #include<intrins.h>
           =2 
           =2 #define u8 unsigned char
           =2 #define u16 unsigned int
           =2 #define s16 signed int
           =2 #define u32 unsigned long
           =2 #define word_t u8
           =2 #define uint8_t u8
           =2 #define bool bit
           =2   
           =2 /*////////////////////////////////////////////////////////////////////////////*/
           =2 #elif STC_8H
  45      =2  /*////////////////////////////////////////////////////////////////////////////*/
  46      =2  
  47      =2  #include "STC8H.h"
   1      =3  #ifndef     __STC8H_H__
   2      =3  #define     __STC8H_H__
   3      =3  
   4      =3  /////////////////////////////////////////////////
   5      =3  
   6      =3  //包含本头文件后,不用另外再包含"REG51.H"
   7      =3  
   8      =3  sfr         P0          =           0x80;
   9      =3  sbit        P00         =           P0^0;
  10      =3  sbit        P01         =           P0^1;
  11      =3  sbit        P02         =           P0^2;
  12      =3  sbit        P03         =           P0^3;
  13      =3  sbit        P04         =           P0^4;
  14      =3  sbit        P05         =           P0^5;
  15      =3  sbit        P06         =           P0^6;
  16      =3  sbit        P07         =           P0^7;
  17      =3  sfr         SP          =           0x81;
  18      =3  sfr         DPL         =           0x82;
  19      =3  sfr         DPH         =           0x83;
  20      =3  sfr         S4CON       =           0x84;
  21      =3  sfr         S4BUF       =           0x85;
  22      =3  sfr         PCON        =           0x87;
  23      =3  sfr         TCON        =           0x88;
  24      =3  sbit        TF1         =           TCON^7;
  25      =3  sbit        TR1         =           TCON^6;
  26      =3  sbit        TF0         =           TCON^5;
  27      =3  sbit        TR0         =           TCON^4;
  28      =3  sbit        IE1         =           TCON^3;
  29      =3  sbit        IT1         =           TCON^2;
  30      =3  sbit        IE0         =           TCON^1;
  31      =3  sbit        IT0         =           TCON^0;
  32      =3  sfr         TMOD        =           0x89;
  33      =3  sfr         TL0         =           0x8a;
  34      =3  sfr         TL1         =           0x8b;
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 3   

  35      =3  sfr         TH0         =           0x8c;
  36      =3  sfr         TH1         =           0x8d;
  37      =3  sfr         AUXR        =           0x8e;
  38      =3  sfr         INTCLKO     =           0x8f;
  39      =3  sfr         P1          =           0x90;
  40      =3  sbit        P10         =           P1^0;
  41      =3  sbit        P11         =           P1^1;
  42      =3  sbit        P12         =           P1^2;
  43      =3  sbit        P13         =           P1^3;
  44      =3  sbit        P14         =           P1^4;
  45      =3  sbit        P15         =           P1^5;
  46      =3  sbit        P16         =           P1^6;
  47      =3  sbit        P17         =           P1^7;
  48      =3  sfr         P1M1        =           0x91;
  49      =3  sfr         P1M0        =           0x92;
  50      =3  sfr         P0M1        =           0x93;
  51      =3  sfr         P0M0        =           0x94;
  52      =3  sfr         P2M1        =           0x95;
  53      =3  sfr         P2M0        =           0x96;
  54      =3  sfr         SCON        =           0x98;
  55      =3  sbit        SM0         =           SCON^7;
  56      =3  sbit        SM1         =           SCON^6;
  57      =3  sbit        SM2         =           SCON^5;
  58      =3  sbit        REN         =           SCON^4;
  59      =3  sbit        TB8         =           SCON^3;
  60      =3  sbit        RB8         =           SCON^2;
  61      =3  sbit        TI          =           SCON^1;
  62      =3  sbit        RI          =           SCON^0;
  63      =3  sfr         SBUF        =           0x99;
  64      =3  sfr         S2CON       =           0x9a;
  65      =3  sfr         S2BUF       =           0x9b;
  66      =3  sfr         IRCBAND     =           0x9d;
  67      =3  sfr         LIRTRIM     =           0x9e;
  68      =3  sfr         IRTRIM      =           0x9f;
  69      =3  sfr         P2          =           0xa0;
  70      =3  sbit        P20         =           P2^0;
  71      =3  sbit        P21         =           P2^1;
  72      =3  sbit        P22         =           P2^2;
  73      =3  sbit        P23         =           P2^3;
  74      =3  sbit        P24         =           P2^4;
  75      =3  sbit        P25         =           P2^5;
  76      =3  sbit        P26         =           P2^6;
  77      =3  sbit        P27         =           P2^7;
  78      =3  sfr         P_SW1       =           0xa2;
  79      =3  sfr         IE          =           0xa8;
  80      =3  sbit        EA          =           IE^7;
  81      =3  sbit        ELVD        =           IE^6;
  82      =3  sbit        EADC        =           IE^5;
  83      =3  sbit        ES          =           IE^4;
  84      =3  sbit        ET1         =           IE^3;
  85      =3  sbit        EX1         =           IE^2;
  86      =3  sbit        ET0         =           IE^1;
  87      =3  sbit        EX0         =           IE^0;
  88      =3  sfr         SADDR       =           0xa9;
  89      =3  sfr         WKTCL       =           0xaa;
  90      =3  sfr         WKTCH       =           0xab;
  91      =3  sfr         S3CON       =           0xac;
  92      =3  sfr         S3BUF       =           0xad;
  93      =3  sfr         TA          =           0xae;
  94      =3  sfr         IE2         =           0xaf;
  95      =3  sfr         P3          =           0xb0;
  96      =3  sbit        P30         =           P3^0;
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 4   

  97      =3  sbit        P31         =           P3^1;
  98      =3  sbit        P32         =           P3^2;
  99      =3  sbit        P33         =           P3^3;
 100      =3  sbit        P34         =           P3^4;
 101      =3  sbit        P35         =           P3^5;
 102      =3  sbit        P36         =           P3^6;
 103      =3  sbit        P37         =           P3^7;
 104      =3  sfr         P3M1        =           0xb1;
 105      =3  sfr         P3M0        =           0xb2;
 106      =3  sfr         P4M1        =           0xb3;
 107      =3  sfr         P4M0        =           0xb4;
 108      =3  sfr         IP2         =           0xb5;
 109      =3  sfr         IP2H        =           0xb6;
 110      =3  sfr         IPH         =           0xb7;
 111      =3  sfr         IP          =           0xb8;
 112      =3  sbit        PPCA        =           IP^7;
 113      =3  sbit        PLVD        =           IP^6;
 114      =3  sbit        PADC        =           IP^5;
 115      =3  sbit        PS          =           IP^4;
 116      =3  sbit        PT1         =           IP^3;
 117      =3  sbit        PX1         =           IP^2;
 118      =3  sbit        PT0         =           IP^1;
 119      =3  sbit        PX0         =           IP^0;
 120      =3  sfr         SADEN       =           0xb9;
 121      =3  sfr         P_SW2       =           0xba;
 122      =3  sfr         ADC_CONTR   =           0xbc;
 123      =3  sfr         ADC_RES     =           0xbd;
 124      =3  sfr         ADC_RESL    =           0xbe;
 125      =3  sfr         P4          =           0xc0;
 126      =3  sbit        P40         =           P4^0;
 127      =3  sbit        P41         =           P4^1;
 128      =3  sbit        P42         =           P4^2;
 129      =3  sbit        P43         =           P4^3;
 130      =3  sbit        P44         =           P4^4;
 131      =3  sbit        P45         =           P4^5;
 132      =3  sbit        P46         =           P4^6;
 133      =3  sbit        P47         =           P4^7;
 134      =3  sfr         WDT_CONTR   =           0xc1;
 135      =3  sfr         IAP_DATA    =           0xc2;
 136      =3  sfr         IAP_ADDRH   =           0xc3;
 137      =3  sfr         IAP_ADDRL   =           0xc4;
 138      =3  sfr         IAP_CMD     =           0xc5;
 139      =3  sfr         IAP_TRIG    =           0xc6;
 140      =3  sfr         IAP_CONTR   =           0xc7;
 141      =3  sfr         P5          =           0xc8;
 142      =3  sbit        P50         =           P5^0;
 143      =3  sbit        P51         =           P5^1;
 144      =3  sbit        P52         =           P5^2;
 145      =3  sbit        P53         =           P5^3;
 146      =3  sbit        P54         =           P5^4;
 147      =3  sbit        P55         =           P5^5;
 148      =3  sbit        P56         =           P5^6;
 149      =3  sbit        P57         =           P5^7;
 150      =3  sfr         P5M1        =           0xc9;
 151      =3  sfr         P5M0        =           0xca;
 152      =3  sfr         P6M1        =           0xcb;
 153      =3  sfr         P6M0        =           0xcc;
 154      =3  sfr         SPSTAT      =           0xcd;
 155      =3  sfr         SPCTL       =           0xce;
 156      =3  sfr         SPDAT       =           0xcf;
 157      =3  sfr         PSW         =           0xd0;
 158      =3  sbit        CY          =           PSW^7;
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 5   

 159      =3  sbit        AC          =           PSW^6;
 160      =3  sbit        F0          =           PSW^5;
 161      =3  sbit        RS1         =           PSW^4;
 162      =3  sbit        RS0         =           PSW^3;
 163      =3  sbit        OV          =           PSW^2;
 164      =3  sbit        F1          =           PSW^1;
 165      =3  sbit        P           =           PSW^0;
 166      =3  sfr         T4T3M       =           0xd1;
 167      =3  sfr         T4H         =           0xd2;
 168      =3  sfr         T4L         =           0xd3;
 169      =3  sfr         T3H         =           0xd4;
 170      =3  sfr         T3L         =           0xd5;
 171      =3  sfr         T2H         =           0xd6;
 172      =3  sfr         T2L         =           0xd7;
 173      =3  sfr         USBCLK      =           0xdc;
 174      =3  sfr         ADCCFG      =           0xde;
 175      =3  sfr         IP3         =           0xdf;
 176      =3  sfr         ACC         =           0xe0;
 177      =3  sfr         P7M1        =           0xe1;
 178      =3  sfr         P7M0        =           0xe2;
 179      =3  sfr         DPS         =           0xe3;
 180      =3  sfr         DPL1        =           0xe4;
 181      =3  sfr         DPH1        =           0xe5;
 182      =3  sfr         CMPCR1      =           0xe6;
 183      =3  sfr         CMPCR2      =           0xe7;
 184      =3  sfr         P6          =           0xe8;
 185      =3  sbit        P60         =           P6^0;
 186      =3  sbit        P61         =           P6^1;
 187      =3  sbit        P62         =           P6^2;
 188      =3  sbit        P63         =           P6^3;
 189      =3  sbit        P64         =           P6^4;
 190      =3  sbit        P65         =           P6^5;
 191      =3  sbit        P66         =           P6^6;
 192      =3  sbit        P67         =           P6^7;
 193      =3  sfr         USBDAT      =           0xec;
 194      =3  sfr         IP3H        =           0xee;
 195      =3  sfr         AUXINTIF    =           0xef;
 196      =3  sfr         B           =           0xf0;
 197      =3  sfr         USBCON      =           0xf4;
 198      =3  sfr         IAP_TPS     =           0xf5;
 199      =3  sfr         P7          =           0xf8;
 200      =3  sbit        P70         =           P7^0;
 201      =3  sbit        P71         =           P7^1;
 202      =3  sbit        P72         =           P7^2;
 203      =3  sbit        P73         =           P7^3;
 204      =3  sbit        P74         =           P7^4;
 205      =3  sbit        P75         =           P7^5;
 206      =3  sbit        P76         =           P7^6;
 207      =3  sbit        P77         =           P7^7;
 208      =3  sfr         USBADR      =           0xfc;
 209      =3  sfr         RSTCFG      =           0xff;
 210      =3  
 211      =3  //如下特殊功能寄存器位于扩展RAM区域
 212      =3  //访问这些寄存器,需先将P_SW2的BIT7设置为1,才可正常读写
 213      =3  
 214      =3  /////////////////////////////////////////////////
 215      =3  //FF00H-FFFFH
 216      =3  /////////////////////////////////////////////////
 217      =3  
 218      =3  
 219      =3  
 220      =3  /////////////////////////////////////////////////
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 6   

 221      =3  //FE00H-FEFFH
 222      =3  /////////////////////////////////////////////////
 223      =3  
 224      =3  #define     CLKSEL                  (*(unsigned char volatile xdata *)0xfe00)
 225      =3  #define     CLKDIV                  (*(unsigned char volatile xdata *)0xfe01)
 226      =3  #define     HIRCCR                  (*(unsigned char volatile xdata *)0xfe02)
 227      =3  #define     XOSCCR                  (*(unsigned char volatile xdata *)0xfe03)
 228      =3  #define     IRC32KCR                (*(unsigned char volatile xdata *)0xfe04)
 229      =3  #define     MCLKOCR                 (*(unsigned char volatile xdata *)0xfe05)
 230      =3  #define     IRCDB                   (*(unsigned char volatile xdata *)0xfe06)
 231      =3  #define     X32KCR                  (*(unsigned char volatile xdata *)0xfe08)
 232      =3  
 233      =3  #define     P0PU                    (*(unsigned char volatile xdata *)0xfe10)
 234      =3  #define     P1PU                    (*(unsigned char volatile xdata *)0xfe11)
 235      =3  #define     P2PU                    (*(unsigned char volatile xdata *)0xfe12)
 236      =3  #define     P3PU                    (*(unsigned char volatile xdata *)0xfe13)
 237      =3  #define     P4PU                    (*(unsigned char volatile xdata *)0xfe14)
 238      =3  #define     P5PU                    (*(unsigned char volatile xdata *)0xfe15)
 239      =3  #define     P6PU                    (*(unsigned char volatile xdata *)0xfe16)
 240      =3  #define     P7PU                    (*(unsigned char volatile xdata *)0xfe17)
 241      =3  #define     P0NCS                   (*(unsigned char volatile xdata *)0xfe18)
 242      =3  #define     P1NCS                   (*(unsigned char volatile xdata *)0xfe19)
 243      =3  #define     P2NCS                   (*(unsigned char volatile xdata *)0xfe1a)
 244      =3  #define     P3NCS                   (*(unsigned char volatile xdata *)0xfe1b)
 245      =3  #define     P4NCS                   (*(unsigned char volatile xdata *)0xfe1c)
 246      =3  #define     P5NCS                   (*(unsigned char volatile xdata *)0xfe1d)
 247      =3  #define     P6NCS                   (*(unsigned char volatile xdata *)0xfe1e)
 248      =3  #define     P7NCS                   (*(unsigned char volatile xdata *)0xfe1f)
 249      =3  #define     P0SR                    (*(unsigned char volatile xdata *)0xfe20)
 250      =3  #define     P1SR                    (*(unsigned char volatile xdata *)0xfe21)
 251      =3  #define     P2SR                    (*(unsigned char volatile xdata *)0xfe22)
 252      =3  #define     P3SR                    (*(unsigned char volatile xdata *)0xfe23)
 253      =3  #define     P4SR                    (*(unsigned char volatile xdata *)0xfe24)
 254      =3  #define     P5SR                    (*(unsigned char volatile xdata *)0xfe25)
 255      =3  #define     P6SR                    (*(unsigned char volatile xdata *)0xfe26)
 256      =3  #define     P7SR                    (*(unsigned char volatile xdata *)0xfe27)
 257      =3  #define     P0DR                    (*(unsigned char volatile xdata *)0xfe28)
 258      =3  #define     P1DR                    (*(unsigned char volatile xdata *)0xfe29)
 259      =3  #define     P2DR                    (*(unsigned char volatile xdata *)0xfe2a)
 260      =3  #define     P3DR                    (*(unsigned char volatile xdata *)0xfe2b)
 261      =3  #define     P4DR                    (*(unsigned char volatile xdata *)0xfe2c)
 262      =3  #define     P5DR                    (*(unsigned char volatile xdata *)0xfe2d)
 263      =3  #define     P6DR                    (*(unsigned char volatile xdata *)0xfe2e)
 264      =3  #define     P7DR                    (*(unsigned char volatile xdata *)0xfe2f)
 265      =3  #define     P0IE                    (*(unsigned char volatile xdata *)0xfe30)
 266      =3  #define     P1IE                    (*(unsigned char volatile xdata *)0xfe31)
 267      =3  #define     P2IE                    (*(unsigned char volatile xdata *)0xfe32)
 268      =3  #define     P3IE                    (*(unsigned char volatile xdata *)0xfe33)
 269      =3  #define     P4IE                    (*(unsigned char volatile xdata *)0xfe34)
 270      =3  #define     P5IE                    (*(unsigned char volatile xdata *)0xfe35)
 271      =3  #define     P6IE                    (*(unsigned char volatile xdata *)0xfe36)
 272      =3  #define     P7IE                    (*(unsigned char volatile xdata *)0xfe37)
 273      =3  
 274      =3  #define     LCMIFCFG                (*(unsigned char volatile xdata *)0xfe50)
 275      =3  #define     LCMIFCFG2               (*(unsigned char volatile xdata *)0xfe51)
 276      =3  #define     LCMIFCR                 (*(unsigned char volatile xdata *)0xfe52)
 277      =3  #define     LCMIFSTA                (*(unsigned char volatile xdata *)0xfe53)
 278      =3  #define     LCMIFDATL               (*(unsigned char volatile xdata *)0xfe54)
 279      =3  #define     LCMIFDATH               (*(unsigned char volatile xdata *)0xfe55)
 280      =3  
 281      =3  #define     RTCCR                   (*(unsigned char volatile xdata *)0xfe60)
 282      =3  #define     RTCCFG                  (*(unsigned char volatile xdata *)0xfe61)
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 7   

 283      =3  #define     RTCIEN                  (*(unsigned char volatile xdata *)0xfe62)
 284      =3  #define     RTCIF                   (*(unsigned char volatile xdata *)0xfe63)
 285      =3  #define     ALAHOUR                 (*(unsigned char volatile xdata *)0xfe64)
 286      =3  #define     ALAMIN                  (*(unsigned char volatile xdata *)0xfe65)
 287      =3  #define     ALASEC                  (*(unsigned char volatile xdata *)0xfe66)
 288      =3  #define     ALASSEC                 (*(unsigned char volatile xdata *)0xfe67)
 289      =3  #define     INIYEAR                 (*(unsigned char volatile xdata *)0xfe68)
 290      =3  #define     INIMONTH                (*(unsigned char volatile xdata *)0xfe69)
 291      =3  #define     INIDAY                  (*(unsigned char volatile xdata *)0xfe6a)
 292      =3  #define     INIHOUR                 (*(unsigned char volatile xdata *)0xfe6b)
 293      =3  #define     INIMIN                  (*(unsigned char volatile xdata *)0xfe6c)
 294      =3  #define     INISEC                  (*(unsigned char volatile xdata *)0xfe6d)
 295      =3  #define     INISSEC                 (*(unsigned char volatile xdata *)0xfe6e)
 296      =3  #define     YEAR                    (*(unsigned char volatile xdata *)0xfe70)
 297      =3  #define     MONTH                   (*(unsigned char volatile xdata *)0xfe71)
 298      =3  #define     DAY                     (*(unsigned char volatile xdata *)0xfe72)
 299      =3  #define     HOUR                    (*(unsigned char volatile xdata *)0xfe73)
 300      =3  #define     MIN                     (*(unsigned char volatile xdata *)0xfe74)
 301      =3  #define     SEC                     (*(unsigned char volatile xdata *)0xfe75)
 302      =3  #define     SSEC                    (*(unsigned char volatile xdata *)0xfe76)
 303      =3  
 304      =3  #define     I2CCFG                  (*(unsigned char volatile xdata *)0xfe80)
 305      =3  #define     I2CMSCR                 (*(unsigned char volatile xdata *)0xfe81)
 306      =3  #define     I2CMSST                 (*(unsigned char volatile xdata *)0xfe82)
 307      =3  #define     I2CSLCR                 (*(unsigned char volatile xdata *)0xfe83)
 308      =3  #define     I2CSLST                 (*(unsigned char volatile xdata *)0xfe84)
 309      =3  #define     I2CSLADR                (*(unsigned char volatile xdata *)0xfe85)
 310      =3  #define     I2CTXD                  (*(unsigned char volatile xdata *)0xfe86)
 311      =3  #define     I2CRXD                  (*(unsigned char volatile xdata *)0xfe87)
 312      =3  #define     I2CMSAUX                (*(unsigned char volatile xdata *)0xfe88)
 313      =3  
 314      =3  #define     TM2PS                   (*(unsigned char volatile xdata *)0xfea2)
 315      =3  #define     TM3PS                   (*(unsigned char volatile xdata *)0xfea3)
 316      =3  #define     TM4PS                   (*(unsigned char volatile xdata *)0xfea4)
 317      =3  #define     ADCTIM                  (*(unsigned char volatile xdata *)0xfea8)
 318      =3  #define     T3T4PIN                 (*(unsigned char volatile xdata *)0xfeac)
 319      =3  #define     ADCEXCFG                (*(unsigned char volatile xdata *)0xfead)
 320      =3  #define     CMPEXCFG                (*(unsigned char volatile xdata *)0xfeae)
 321      =3  
 322      =3  #define     PWM1_ETRPS              (*(unsigned char volatile xdata *)0xfeb0)
 323      =3  #define     PWM1_ENO                (*(unsigned char volatile xdata *)0xfeb1)
 324      =3  #define     PWM1_PS                 (*(unsigned char volatile xdata *)0xfeb2)
 325      =3  #define     PWM1_IOAUX              (*(unsigned char volatile xdata *)0xfeb3)
 326      =3  #define     PWM2_ETRPS              (*(unsigned char volatile xdata *)0xfeb4)
 327      =3  #define     PWM2_ENO                (*(unsigned char volatile xdata *)0xfeb5)
 328      =3  #define     PWM2_PS                 (*(unsigned char volatile xdata *)0xfeb6)
 329      =3  #define     PWM2_IOAUX              (*(unsigned char volatile xdata *)0xfeb7)
 330      =3  #define     PWM1_CR1                (*(unsigned char volatile xdata *)0xfec0)
 331      =3  #define     PWM1_CR2                (*(unsigned char volatile xdata *)0xfec1)
 332      =3  #define     PWM1_SMCR               (*(unsigned char volatile xdata *)0xfec2)
 333      =3  #define     PWM1_ETR                (*(unsigned char volatile xdata *)0xfec3)
 334      =3  #define     PWM1_IER                (*(unsigned char volatile xdata *)0xfec4)
 335      =3  #define     PWM1_SR1                (*(unsigned char volatile xdata *)0xfec5)
 336      =3  #define     PWM1_SR2                (*(unsigned char volatile xdata *)0xfec6)
 337      =3  #define     PWM1_EGR                (*(unsigned char volatile xdata *)0xfec7)
 338      =3  #define     PWM1_CCMR1              (*(unsigned char volatile xdata *)0xfec8)
 339      =3  #define     PWM1_CCMR2              (*(unsigned char volatile xdata *)0xfec9)
 340      =3  #define     PWM1_CCMR3              (*(unsigned char volatile xdata *)0xfeca)
 341      =3  #define     PWM1_CCMR4              (*(unsigned char volatile xdata *)0xfecb)
 342      =3  #define     PWM1_CCER1              (*(unsigned char volatile xdata *)0xfecc)
 343      =3  #define     PWM1_CCER2              (*(unsigned char volatile xdata *)0xfecd)
 344      =3  #define     PWM1_CNTR               (*(unsigned  int volatile xdata *)0xfece)
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 8   

 345      =3  #define     PWM1_CNTRH              (*(unsigned char volatile xdata *)0xfece)
 346      =3  #define     PWM1_CNTRL              (*(unsigned char volatile xdata *)0xfecf)
 347      =3  #define     PWM1_PSCR               (*(unsigned  int volatile xdata *)0xfed0)
 348      =3  #define     PWM1_PSCRH              (*(unsigned char volatile xdata *)0xfed0)
 349      =3  #define     PWM1_PSCRL              (*(unsigned char volatile xdata *)0xfed1)
 350      =3  #define     PWM1_ARR                (*(unsigned  int volatile xdata *)0xfed2)
 351      =3  #define     PWM1_ARRH               (*(unsigned char volatile xdata *)0xfed2)
 352      =3  #define     PWM1_ARRL               (*(unsigned char volatile xdata *)0xfed3)
 353      =3  #define     PWM1_RCR                (*(unsigned char volatile xdata *)0xfed4)
 354      =3  #define     PWM1_CCR1               (*(unsigned  int volatile xdata *)0xfed5)
 355      =3  #define     PWM1_CCR1H              (*(unsigned char volatile xdata *)0xfed5)
 356      =3  #define     PWM1_CCR1L              (*(unsigned char volatile xdata *)0xfed6)
 357      =3  #define     PWM1_CCR2               (*(unsigned  int volatile xdata *)0xfed7)
 358      =3  #define     PWM1_CCR2H              (*(unsigned char volatile xdata *)0xfed7)
 359      =3  #define     PWM1_CCR2L              (*(unsigned char volatile xdata *)0xfed8)
 360      =3  #define     PWM1_CCR3               (*(unsigned  int volatile xdata *)0xfed9)
 361      =3  #define     PWM1_CCR3H              (*(unsigned char volatile xdata *)0xfed9)
 362      =3  #define     PWM1_CCR3L              (*(unsigned char volatile xdata *)0xfeda)
 363      =3  #define     PWM1_CCR4               (*(unsigned  int volatile xdata *)0xfedb)
 364      =3  #define     PWM1_CCR4H              (*(unsigned char volatile xdata *)0xfedb)
 365      =3  #define     PWM1_CCR4L              (*(unsigned char volatile xdata *)0xfedc)
 366      =3  #define     PWM1_BKR                (*(unsigned char volatile xdata *)0xfedd)
 367      =3  #define     PWM1_DTR                (*(unsigned char volatile xdata *)0xfede)
 368      =3  #define     PWM1_OISR               (*(unsigned char volatile xdata *)0xfedf)
 369      =3  #define     PWM2_CR1                (*(unsigned char volatile xdata *)0xfee0)
 370      =3  #define     PWM2_CR2                (*(unsigned char volatile xdata *)0xfee1)
 371      =3  #define     PWM2_SMCR               (*(unsigned char volatile xdata *)0xfee2)
 372      =3  #define     PWM2_ETR                (*(unsigned char volatile xdata *)0xfee3)
 373      =3  #define     PWM2_IER                (*(unsigned char volatile xdata *)0xfee4)
 374      =3  #define     PWM2_SR1                (*(unsigned char volatile xdata *)0xfee5)
 375      =3  #define     PWM2_SR2                (*(unsigned char volatile xdata *)0xfee6)
 376      =3  #define     PWM2_EGR                (*(unsigned char volatile xdata *)0xfee7)
 377      =3  #define     PWM2_CCMR1              (*(unsigned char volatile xdata *)0xfee8)
 378      =3  #define     PWM2_CCMR2              (*(unsigned char volatile xdata *)0xfee9)
 379      =3  #define     PWM2_CCMR3              (*(unsigned char volatile xdata *)0xfeea)
 380      =3  #define     PWM2_CCMR4              (*(unsigned char volatile xdata *)0xfeeb)
 381      =3  #define     PWM2_CCER1              (*(unsigned char volatile xdata *)0xfeec)
 382      =3  #define     PWM2_CCER2              (*(unsigned char volatile xdata *)0xfeed)
 383      =3  #define     PWM2_CNTR               (*(unsigned  int volatile xdata *)0xfeee)
 384      =3  #define     PWM2_CNTRH              (*(unsigned char volatile xdata *)0xfeee)
 385      =3  #define     PWM2_CNTRL              (*(unsigned char volatile xdata *)0xfeef)
 386      =3  #define     PWM2_PSCR               (*(unsigned  int volatile xdata *)0xfef0)
 387      =3  #define     PWM2_PSCRH              (*(unsigned char volatile xdata *)0xfef0)
 388      =3  #define     PWM2_PSCRL              (*(unsigned char volatile xdata *)0xfef1)
 389      =3  #define     PWM2_ARR                (*(unsigned  int volatile xdata *)0xfef2)
 390      =3  #define     PWM2_ARRH               (*(unsigned char volatile xdata *)0xfef2)
 391      =3  #define     PWM2_ARRL               (*(unsigned char volatile xdata *)0xfef3)
 392      =3  #define     PWM2_RCR                (*(unsigned char volatile xdata *)0xfef4)
 393      =3  #define     PWM2_CCR1               (*(unsigned  int volatile xdata *)0xfef5)
 394      =3  #define     PWM2_CCR1H              (*(unsigned char volatile xdata *)0xfef5)
 395      =3  #define     PWM2_CCR1L              (*(unsigned char volatile xdata *)0xfef6)
 396      =3  #define     PWM2_CCR2               (*(unsigned  int volatile xdata *)0xfef7)
 397      =3  #define     PWM2_CCR2H              (*(unsigned char volatile xdata *)0xfef7)
 398      =3  #define     PWM2_CCR2L              (*(unsigned char volatile xdata *)0xfef8)
 399      =3  #define     PWM2_CCR3               (*(unsigned  int volatile xdata *)0xfef9)
 400      =3  #define     PWM2_CCR3H              (*(unsigned char volatile xdata *)0xfef9)
 401      =3  #define     PWM2_CCR3L              (*(unsigned char volatile xdata *)0xfefa)
 402      =3  #define     PWM2_CCR4               (*(unsigned  int volatile xdata *)0xfefb)
 403      =3  #define     PWM2_CCR4H              (*(unsigned char volatile xdata *)0xfefb)
 404      =3  #define     PWM2_CCR4L              (*(unsigned char volatile xdata *)0xfefc)
 405      =3  #define     PWM2_BKR                (*(unsigned char volatile xdata *)0xfefd)
 406      =3  #define     PWM2_DTR                (*(unsigned char volatile xdata *)0xfefe)
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 9   

 407      =3  #define     PWM2_OISR               (*(unsigned char volatile xdata *)0xfeff)
 408      =3  
 409      =3  #define     PWMA_ETRPS              (*(unsigned char volatile xdata *)0xfeb0)
 410      =3  #define     PWMA_ENO                (*(unsigned char volatile xdata *)0xfeb1)
 411      =3  #define     PWMA_PS                 (*(unsigned char volatile xdata *)0xfeb2)
 412      =3  #define     PWMA_IOAUX              (*(unsigned char volatile xdata *)0xfeb3)
 413      =3  #define     PWMB_ETRPS              (*(unsigned char volatile xdata *)0xfeb4)
 414      =3  #define     PWMB_ENO                (*(unsigned char volatile xdata *)0xfeb5)
 415      =3  #define     PWMB_PS                 (*(unsigned char volatile xdata *)0xfeb6)
 416      =3  #define     PWMB_IOAUX              (*(unsigned char volatile xdata *)0xfeb7)
 417      =3  #define     PWMA_CR1                (*(unsigned char volatile xdata *)0xfec0)
 418      =3  #define     PWMA_CR2                (*(unsigned char volatile xdata *)0xfec1)
 419      =3  #define     PWMA_SMCR               (*(unsigned char volatile xdata *)0xfec2)
 420      =3  #define     PWMA_ETR                (*(unsigned char volatile xdata *)0xfec3)
 421      =3  #define     PWMA_IER                (*(unsigned char volatile xdata *)0xfec4)
 422      =3  #define     PWMA_SR1                (*(unsigned char volatile xdata *)0xfec5)
 423      =3  #define     PWMA_SR2                (*(unsigned char volatile xdata *)0xfec6)
 424      =3  #define     PWMA_EGR                (*(unsigned char volatile xdata *)0xfec7)
 425      =3  #define     PWMA_CCMR1              (*(unsigned char volatile xdata *)0xfec8)
 426      =3  #define     PWMA_CCMR2              (*(unsigned char volatile xdata *)0xfec9)
 427      =3  #define     PWMA_CCMR3              (*(unsigned char volatile xdata *)0xfeca)
 428      =3  #define     PWMA_CCMR4              (*(unsigned char volatile xdata *)0xfecb)
 429      =3  #define     PWMA_CCER1              (*(unsigned char volatile xdata *)0xfecc)
 430      =3  #define     PWMA_CCER2              (*(unsigned char volatile xdata *)0xfecd)
 431      =3  #define     PWMA_CNTR               (*(unsigned  int volatile xdata *)0xfece)
 432      =3  #define     PWMA_CNTRH              (*(unsigned char volatile xdata *)0xfece)
 433      =3  #define     PWMA_CNTRL              (*(unsigned char volatile xdata *)0xfecf)
 434      =3  #define     PWMA_PSCR               (*(unsigned  int volatile xdata *)0xfed0)
 435      =3  #define     PWMA_PSCRH              (*(unsigned char volatile xdata *)0xfed0)
 436      =3  #define     PWMA_PSCRL              (*(unsigned char volatile xdata *)0xfed1)
 437      =3  #define     PWMA_ARR                (*(unsigned  int volatile xdata *)0xfed2)
 438      =3  #define     PWMA_ARRH               (*(unsigned char volatile xdata *)0xfed2)
 439      =3  #define     PWMA_ARRL               (*(unsigned char volatile xdata *)0xfed3)
 440      =3  #define     PWMA_RCR                (*(unsigned char volatile xdata *)0xfed4)
 441      =3  #define     PWMA_CCR1               (*(unsigned  int volatile xdata *)0xfed5)
 442      =3  #define     PWMA_CCR1H              (*(unsigned char volatile xdata *)0xfed5)
 443      =3  #define     PWMA_CCR1L              (*(unsigned char volatile xdata *)0xfed6)
 444      =3  #define     PWMA_CCR2               (*(unsigned  int volatile xdata *)0xfed7)
 445      =3  #define     PWMA_CCR2H              (*(unsigned char volatile xdata *)0xfed7)
 446      =3  #define     PWMA_CCR2L              (*(unsigned char volatile xdata *)0xfed8)
 447      =3  #define     PWMA_CCR3               (*(unsigned  int volatile xdata *)0xfed9)
 448      =3  #define     PWMA_CCR3H              (*(unsigned char volatile xdata *)0xfed9)
 449      =3  #define     PWMA_CCR3L              (*(unsigned char volatile xdata *)0xfeda)
 450      =3  #define     PWMA_CCR4               (*(unsigned  int volatile xdata *)0xfedb)
 451      =3  #define     PWMA_CCR4H              (*(unsigned char volatile xdata *)0xfedb)
 452      =3  #define     PWMA_CCR4L              (*(unsigned char volatile xdata *)0xfedc)
 453      =3  #define     PWMA_BKR                (*(unsigned char volatile xdata *)0xfedd)
 454      =3  #define     PWMA_DTR                (*(unsigned char volatile xdata *)0xfede)
 455      =3  #define     PWMA_OISR               (*(unsigned char volatile xdata *)0xfedf)
 456      =3  #define     PWMB_CR1                (*(unsigned char volatile xdata *)0xfee0)
 457      =3  #define     PWMB_CR2                (*(unsigned char volatile xdata *)0xfee1)
 458      =3  #define     PWMB_SMCR               (*(unsigned char volatile xdata *)0xfee2)
 459      =3  #define     PWMB_ETR                (*(unsigned char volatile xdata *)0xfee3)
 460      =3  #define     PWMB_IER                (*(unsigned char volatile xdata *)0xfee4)
 461      =3  #define     PWMB_SR1                (*(unsigned char volatile xdata *)0xfee5)
 462      =3  #define     PWMB_SR2                (*(unsigned char volatile xdata *)0xfee6)
 463      =3  #define     PWMB_EGR                (*(unsigned char volatile xdata *)0xfee7)
 464      =3  #define     PWMB_CCMR1              (*(unsigned char volatile xdata *)0xfee8)
 465      =3  #define     PWMB_CCMR2              (*(unsigned char volatile xdata *)0xfee9)
 466      =3  #define     PWMB_CCMR3              (*(unsigned char volatile xdata *)0xfeea)
 467      =3  #define     PWMB_CCMR4              (*(unsigned char volatile xdata *)0xfeeb)
 468      =3  #define     PWMB_CCER1              (*(unsigned char volatile xdata *)0xfeec)
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 10  

 469      =3  #define     PWMB_CCER2              (*(unsigned char volatile xdata *)0xfeed)
 470      =3  #define     PWMB_CNTR               (*(unsigned  int volatile xdata *)0xfeee)
 471      =3  #define     PWMB_CNTRH              (*(unsigned char volatile xdata *)0xfeee)
 472      =3  #define     PWMB_CNTRL              (*(unsigned char volatile xdata *)0xfeef)
 473      =3  #define     PWMB_PSCR               (*(unsigned  int volatile xdata *)0xfef0)
 474      =3  #define     PWMB_PSCRH              (*(unsigned char volatile xdata *)0xfef0)
 475      =3  #define     PWMB_PSCRL              (*(unsigned char volatile xdata *)0xfef1)
 476      =3  #define     PWMB_ARR                (*(unsigned  int volatile xdata *)0xfef2)
 477      =3  #define     PWMB_ARRH               (*(unsigned char volatile xdata *)0xfef2)
 478      =3  #define     PWMB_ARRL               (*(unsigned char volatile xdata *)0xfef3)
 479      =3  #define     PWMB_RCR                (*(unsigned char volatile xdata *)0xfef4)
 480      =3  #define     PWMB_CCR5               (*(unsigned  int volatile xdata *)0xfef5)
 481      =3  #define     PWMB_CCR5H              (*(unsigned char volatile xdata *)0xfef5)
 482      =3  #define     PWMB_CCR5L              (*(unsigned char volatile xdata *)0xfef6)
 483      =3  #define     PWMB_CCR6               (*(unsigned  int volatile xdata *)0xfef7)
 484      =3  #define     PWMB_CCR6H              (*(unsigned char volatile xdata *)0xfef7)
 485      =3  #define     PWMB_CCR6L              (*(unsigned char volatile xdata *)0xfef8)
 486      =3  #define     PWMB_CCR7               (*(unsigned  int volatile xdata *)0xfef9)
 487      =3  #define     PWMB_CCR7H              (*(unsigned char volatile xdata *)0xfef9)
 488      =3  #define     PWMB_CCR7L              (*(unsigned char volatile xdata *)0xfefa)
 489      =3  #define     PWMB_CCR8               (*(unsigned  int volatile xdata *)0xfefb)
 490      =3  #define     PWMB_CCR8H              (*(unsigned char volatile xdata *)0xfefb)
 491      =3  #define     PWMB_CCR8L              (*(unsigned char volatile xdata *)0xfefc)
 492      =3  #define     PWMB_BKR                (*(unsigned char volatile xdata *)0xfefd)
 493      =3  #define     PWMB_DTR                (*(unsigned char volatile xdata *)0xfefe)
 494      =3  #define     PWMB_OISR               (*(unsigned char volatile xdata *)0xfeff)
 495      =3  
 496      =3  /////////////////////////////////////////////////
 497      =3  //FD00H-FDFFH
 498      =3  /////////////////////////////////////////////////
 499      =3  
 500      =3  #define     P0INTE                  (*(unsigned char volatile xdata *)0xfd00)
 501      =3  #define     P1INTE                  (*(unsigned char volatile xdata *)0xfd01)
 502      =3  #define     P2INTE                  (*(unsigned char volatile xdata *)0xfd02)
 503      =3  #define     P3INTE                  (*(unsigned char volatile xdata *)0xfd03)
 504      =3  #define     P4INTE                  (*(unsigned char volatile xdata *)0xfd04)
 505      =3  #define     P5INTE                  (*(unsigned char volatile xdata *)0xfd05)
 506      =3  #define     P6INTE                  (*(unsigned char volatile xdata *)0xfd06)
 507      =3  #define     P7INTE                  (*(unsigned char volatile xdata *)0xfd07)
 508      =3  #define     P0INTF                  (*(unsigned char volatile xdata *)0xfd10)
 509      =3  #define     P1INTF                  (*(unsigned char volatile xdata *)0xfd11)
 510      =3  #define     P2INTF                  (*(unsigned char volatile xdata *)0xfd12)
 511      =3  #define     P3INTF                  (*(unsigned char volatile xdata *)0xfd13)
 512      =3  #define     P4INTF                  (*(unsigned char volatile xdata *)0xfd14)
 513      =3  #define     P5INTF                  (*(unsigned char volatile xdata *)0xfd15)
 514      =3  #define     P6INTF                  (*(unsigned char volatile xdata *)0xfd16)
 515      =3  #define     P7INTF                  (*(unsigned char volatile xdata *)0xfd17)
 516      =3  #define     P0IM0                   (*(unsigned char volatile xdata *)0xfd20)
 517      =3  #define     P1IM0                   (*(unsigned char volatile xdata *)0xfd21)
 518      =3  #define     P2IM0                   (*(unsigned char volatile xdata *)0xfd22)
 519      =3  #define     P3IM0                   (*(unsigned char volatile xdata *)0xfd23)
 520      =3  #define     P4IM0                   (*(unsigned char volatile xdata *)0xfd24)
 521      =3  #define     P5IM0                   (*(unsigned char volatile xdata *)0xfd25)
 522      =3  #define     P6IM0                   (*(unsigned char volatile xdata *)0xfd26)
 523      =3  #define     P7IM0                   (*(unsigned char volatile xdata *)0xfd27)
 524      =3  #define     P0IM1                   (*(unsigned char volatile xdata *)0xfd30)
 525      =3  #define     P1IM1                   (*(unsigned char volatile xdata *)0xfd31)
 526      =3  #define     P2IM1                   (*(unsigned char volatile xdata *)0xfd32)
 527      =3  #define     P3IM1                   (*(unsigned char volatile xdata *)0xfd33)
 528      =3  #define     P4IM1                   (*(unsigned char volatile xdata *)0xfd34)
 529      =3  #define     P5IM1                   (*(unsigned char volatile xdata *)0xfd35)
 530      =3  #define     P6IM1                   (*(unsigned char volatile xdata *)0xfd36)
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 11  

 531      =3  #define     P7IM1                   (*(unsigned char volatile xdata *)0xfd37)
 532      =3  #define     P0WKUE                  (*(unsigned char volatile xdata *)0xfd40)
 533      =3  #define     P1WKUE                  (*(unsigned char volatile xdata *)0xfd41)
 534      =3  #define     P2WKUE                  (*(unsigned char volatile xdata *)0xfd42)
 535      =3  #define     P3WKUE                  (*(unsigned char volatile xdata *)0xfd43)
 536      =3  #define     P4WKUE                  (*(unsigned char volatile xdata *)0xfd44)
 537      =3  #define     P5WKUE                  (*(unsigned char volatile xdata *)0xfd45)
 538      =3  #define     P6WKUE                  (*(unsigned char volatile xdata *)0xfd46)
 539      =3  #define     P7WKUE                  (*(unsigned char volatile xdata *)0xfd47)
 540      =3  
 541      =3  #define     PIN_IP                  (*(unsigned char volatile xdata *)0xfd60)
 542      =3  #define     PIN_IPH                 (*(unsigned char volatile xdata *)0xfd61)
 543      =3  
 544      =3  #define     CHIPID                  ( (unsigned char volatile xdata *)0xfde0)
 545      =3  
 546      =3  #define     CHIPID0                 (*(unsigned char volatile xdata *)0xfde0)
 547      =3  #define     CHIPID1                 (*(unsigned char volatile xdata *)0xfde1)
 548      =3  #define     CHIPID2                 (*(unsigned char volatile xdata *)0xfde2)
 549      =3  #define     CHIPID3                 (*(unsigned char volatile xdata *)0xfde3)
 550      =3  #define     CHIPID4                 (*(unsigned char volatile xdata *)0xfde4)
 551      =3  #define     CHIPID5                 (*(unsigned char volatile xdata *)0xfde5)
 552      =3  #define     CHIPID6                 (*(unsigned char volatile xdata *)0xfde6)
 553      =3  #define     CHIPID7                 (*(unsigned char volatile xdata *)0xfde7)
 554      =3  #define     CHIPID8                 (*(unsigned char volatile xdata *)0xfde8)
 555      =3  #define     CHIPID9                 (*(unsigned char volatile xdata *)0xfde9)
 556      =3  #define     CHIPID10                (*(unsigned char volatile xdata *)0xfdea)
 557      =3  #define     CHIPID11                (*(unsigned char volatile xdata *)0xfdeb)
 558      =3  #define     CHIPID12                (*(unsigned char volatile xdata *)0xfdec)
 559      =3  #define     CHIPID13                (*(unsigned char volatile xdata *)0xfded)
 560      =3  #define     CHIPID14                (*(unsigned char volatile xdata *)0xfdee)
 561      =3  #define     CHIPID15                (*(unsigned char volatile xdata *)0xfdef)
 562      =3  #define     CHIPID16                (*(unsigned char volatile xdata *)0xfdf0)
 563      =3  #define     CHIPID17                (*(unsigned char volatile xdata *)0xfdf1)
 564      =3  #define     CHIPID18                (*(unsigned char volatile xdata *)0xfdf2)
 565      =3  #define     CHIPID19                (*(unsigned char volatile xdata *)0xfdf3)
 566      =3  #define     CHIPID20                (*(unsigned char volatile xdata *)0xfdf4)
 567      =3  #define     CHIPID21                (*(unsigned char volatile xdata *)0xfdf5)
 568      =3  #define     CHIPID22                (*(unsigned char volatile xdata *)0xfdf6)
 569      =3  #define     CHIPID23                (*(unsigned char volatile xdata *)0xfdf7)
 570      =3  #define     CHIPID24                (*(unsigned char volatile xdata *)0xfdf8)
 571      =3  #define     CHIPID25                (*(unsigned char volatile xdata *)0xfdf9)
 572      =3  #define     CHIPID26                (*(unsigned char volatile xdata *)0xfdfa)
 573      =3  #define     CHIPID27                (*(unsigned char volatile xdata *)0xfdfb)
 574      =3  #define     CHIPID28                (*(unsigned char volatile xdata *)0xfdfc)
 575      =3  #define     CHIPID29                (*(unsigned char volatile xdata *)0xfdfd)
 576      =3  #define     CHIPID30                (*(unsigned char volatile xdata *)0xfdfe)
 577      =3  #define     CHIPID31                (*(unsigned char volatile xdata *)0xfdff)
 578      =3  
 579      =3  /////////////////////////////////////////////////
 580      =3  //FC00H-FCFFH
 581      =3  /////////////////////////////////////////////////
 582      =3  
 583      =3  #define     MD3                     (*(unsigned char volatile xdata *)0xfcf0)
 584      =3  #define     MD2                     (*(unsigned char volatile xdata *)0xfcf1)
 585      =3  #define     MD1                     (*(unsigned char volatile xdata *)0xfcf2)
 586      =3  #define     MD0                     (*(unsigned char volatile xdata *)0xfcf3)
 587      =3  #define     MD5                     (*(unsigned char volatile xdata *)0xfcf4)
 588      =3  #define     MD4                     (*(unsigned char volatile xdata *)0xfcf5)
 589      =3  #define     ARCON                   (*(unsigned char volatile xdata *)0xfcf6)
 590      =3  #define     OPCON                   (*(unsigned char volatile xdata *)0xfcf7)
 591      =3  
 592      =3  /////////////////////////////////////////////////
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 12  

 593      =3  //FB00H-FBFFH
 594      =3  /////////////////////////////////////////////////
 595      =3  
 596      =3  #define     COMEN                   (*(unsigned char volatile xdata *)0xfb00)
 597      =3  #define     SEGENL                  (*(unsigned char volatile xdata *)0xfb01)
 598      =3  #define     SEGENH                  (*(unsigned char volatile xdata *)0xfb02)
 599      =3  #define     LEDCTRL                 (*(unsigned char volatile xdata *)0xfb03)
 600      =3  #define     LEDCKS                  (*(unsigned char volatile xdata *)0xfb04)
 601      =3  #define     COM0_DA_L               (*(unsigned char volatile xdata *)0xfb10)
 602      =3  #define     COM1_DA_L               (*(unsigned char volatile xdata *)0xfb11)
 603      =3  #define     COM2_DA_L               (*(unsigned char volatile xdata *)0xfb12)
 604      =3  #define     COM3_DA_L               (*(unsigned char volatile xdata *)0xfb13)
 605      =3  #define     COM4_DA_L               (*(unsigned char volatile xdata *)0xfb14)
 606      =3  #define     COM5_DA_L               (*(unsigned char volatile xdata *)0xfb15)
 607      =3  #define     COM6_DA_L               (*(unsigned char volatile xdata *)0xfb16)
 608      =3  #define     COM7_DA_L               (*(unsigned char volatile xdata *)0xfb17)
 609      =3  #define     COM0_DA_H               (*(unsigned char volatile xdata *)0xfb18)
 610      =3  #define     COM1_DA_H               (*(unsigned char volatile xdata *)0xfb19)
 611      =3  #define     COM2_DA_H               (*(unsigned char volatile xdata *)0xfb1a)
 612      =3  #define     COM3_DA_H               (*(unsigned char volatile xdata *)0xfb1b)
 613      =3  #define     COM4_DA_H               (*(unsigned char volatile xdata *)0xfb1c)
 614      =3  #define     COM5_DA_H               (*(unsigned char volatile xdata *)0xfb1d)
 615      =3  #define     COM6_DA_H               (*(unsigned char volatile xdata *)0xfb1e)
 616      =3  #define     COM7_DA_H               (*(unsigned char volatile xdata *)0xfb1f)
 617      =3  #define     COM0_DC_L               (*(unsigned char volatile xdata *)0xfb20)
 618      =3  #define     COM1_DC_L               (*(unsigned char volatile xdata *)0xfb21)
 619      =3  #define     COM2_DC_L               (*(unsigned char volatile xdata *)0xfb22)
 620      =3  #define     COM3_DC_L               (*(unsigned char volatile xdata *)0xfb23)
 621      =3  #define     COM4_DC_L               (*(unsigned char volatile xdata *)0xfb24)
 622      =3  #define     COM5_DC_L               (*(unsigned char volatile xdata *)0xfb25)
 623      =3  #define     COM6_DC_L               (*(unsigned char volatile xdata *)0xfb26)
 624      =3  #define     COM7_DC_L               (*(unsigned char volatile xdata *)0xfb27)
 625      =3  #define     COM0_DC_H               (*(unsigned char volatile xdata *)0xfb28)
 626      =3  #define     COM1_DC_H               (*(unsigned char volatile xdata *)0xfb29)
 627      =3  #define     COM2_DC_H               (*(unsigned char volatile xdata *)0xfb2a)
 628      =3  #define     COM3_DC_H               (*(unsigned char volatile xdata *)0xfb2b)
 629      =3  #define     COM4_DC_H               (*(unsigned char volatile xdata *)0xfb2c)
 630      =3  #define     COM5_DC_H               (*(unsigned char volatile xdata *)0xfb2d)
 631      =3  #define     COM6_DC_H               (*(unsigned char volatile xdata *)0xfb2e)
 632      =3  #define     COM7_DC_H               (*(unsigned char volatile xdata *)0xfb2f)
 633      =3  
 634      =3  #define     TSCHEN1                 (*(unsigned char volatile xdata *)0xfb40)
 635      =3  #define     TSCHEN2                 (*(unsigned char volatile xdata *)0xfb41)
 636      =3  #define     TSCFG1                  (*(unsigned char volatile xdata *)0xfb42)
 637      =3  #define     TSCFG2                  (*(unsigned char volatile xdata *)0xfb43)
 638      =3  #define     TSWUTC                  (*(unsigned char volatile xdata *)0xfb44)
 639      =3  #define     TSCTRL                  (*(unsigned char volatile xdata *)0xfb45)
 640      =3  #define     TSSTA1                  (*(unsigned char volatile xdata *)0xfb46)
 641      =3  #define     TSSTA2                  (*(unsigned char volatile xdata *)0xfb47)
 642      =3  #define     TSRT                    (*(unsigned char volatile xdata *)0xfb48)
 643      =3  #define     TSDAT                   (*(unsigned int  volatile xdata *)0xfb49)
 644      =3  #define     TSDATH                  (*(unsigned char volatile xdata *)0xfb49)
 645      =3  #define     TSDATL                  (*(unsigned char volatile xdata *)0xfb4A)
 646      =3  #define     TSTH00                  (*(unsigned int  volatile xdata *)0xfb50)
 647      =3  #define     TSTH00H                 (*(unsigned char volatile xdata *)0xfb50)
 648      =3  #define     TSTH00L                 (*(unsigned char volatile xdata *)0xfb51)
 649      =3  #define     TSTH01                  (*(unsigned int  volatile xdata *)0xfb52)
 650      =3  #define     TSTH01H                 (*(unsigned char volatile xdata *)0xfb52)
 651      =3  #define     TSTH01L                 (*(unsigned char volatile xdata *)0xfb53)
 652      =3  #define     TSTH02                  (*(unsigned int  volatile xdata *)0xfb54)
 653      =3  #define     TSTH02H                 (*(unsigned char volatile xdata *)0xfb54)
 654      =3  #define     TSTH02L                 (*(unsigned char volatile xdata *)0xfb55)
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 13  

 655      =3  #define     TSTH03                  (*(unsigned int  volatile xdata *)0xfb56)
 656      =3  #define     TSTH03H                 (*(unsigned char volatile xdata *)0xfb56)
 657      =3  #define     TSTH03L                 (*(unsigned char volatile xdata *)0xfb57)
 658      =3  #define     TSTH04                  (*(unsigned int  volatile xdata *)0xfb58)
 659      =3  #define     TSTH04H                 (*(unsigned char volatile xdata *)0xfb58)
 660      =3  #define     TSTH04L                 (*(unsigned char volatile xdata *)0xfb59)
 661      =3  #define     TSTH05                  (*(unsigned int  volatile xdata *)0xfb5a)
 662      =3  #define     TSTH05H                 (*(unsigned char volatile xdata *)0xfb5a)
 663      =3  #define     TSTH05L                 (*(unsigned char volatile xdata *)0xfb5b)
 664      =3  #define     TSTH06                  (*(unsigned int  volatile xdata *)0xfb5c)
 665      =3  #define     TSTH06H                 (*(unsigned char volatile xdata *)0xfb5c)
 666      =3  #define     TSTH06L                 (*(unsigned char volatile xdata *)0xfb5d)
 667      =3  #define     TSTH07                  (*(unsigned int  volatile xdata *)0xfb5e)
 668      =3  #define     TSTH07H                 (*(unsigned char volatile xdata *)0xfb5e)
 669      =3  #define     TSTH07L                 (*(unsigned char volatile xdata *)0xfb5f)
 670      =3  #define     TSTH08                  (*(unsigned int  volatile xdata *)0xfb60)
 671      =3  #define     TSTH08H                 (*(unsigned char volatile xdata *)0xfb60)
 672      =3  #define     TSTH08L                 (*(unsigned char volatile xdata *)0xfb61)
 673      =3  #define     TSTH09                  (*(unsigned int  volatile xdata *)0xfb62)
 674      =3  #define     TSTH09H                 (*(unsigned char volatile xdata *)0xfb62)
 675      =3  #define     TSTH09L                 (*(unsigned char volatile xdata *)0xfb63)
 676      =3  #define     TSTH10                  (*(unsigned int  volatile xdata *)0xfb64)
 677      =3  #define     TSTH10H                 (*(unsigned char volatile xdata *)0xfb64)
 678      =3  #define     TSTH10L                 (*(unsigned char volatile xdata *)0xfb65)
 679      =3  #define     TSTH11                  (*(unsigned int  volatile xdata *)0xfb66)
 680      =3  #define     TSTH11H                 (*(unsigned char volatile xdata *)0xfb66)
 681      =3  #define     TSTH11L                 (*(unsigned char volatile xdata *)0xfb67)
 682      =3  #define     TSTH12                  (*(unsigned int  volatile xdata *)0xfb68)
 683      =3  #define     TSTH12H                 (*(unsigned char volatile xdata *)0xfb68)
 684      =3  #define     TSTH12L                 (*(unsigned char volatile xdata *)0xfb69)
 685      =3  #define     TSTH13                  (*(unsigned int  volatile xdata *)0xfb6a)
 686      =3  #define     TSTH13H                 (*(unsigned char volatile xdata *)0xfb6a)
 687      =3  #define     TSTH13L                 (*(unsigned char volatile xdata *)0xfb6b)
 688      =3  #define     TSTH14                  (*(unsigned int  volatile xdata *)0xfb6c)
 689      =3  #define     TSTH14H                 (*(unsigned char volatile xdata *)0xfb6c)
 690      =3  #define     TSTH14L                 (*(unsigned char volatile xdata *)0xfb6d)
 691      =3  #define     TSTH15                  (*(unsigned int  volatile xdata *)0xfb6e)
 692      =3  #define     TSTH15H                 (*(unsigned char volatile xdata *)0xfb6e)
 693      =3  #define     TSTH15L                 (*(unsigned char volatile xdata *)0xfb6f)
 694      =3  
 695      =3  #define     LCDCFG                  (*(unsigned char volatile xdata *)0xfb80)
 696      =3  #define     LCDCFG2                 (*(unsigned char volatile xdata *)0xfb81)
 697      =3  #define     DBLNTH                  (*(unsigned char volatile xdata *)0xfb82)
 698      =3  #define     COMLNTHL                (*(unsigned char volatile xdata *)0xdb83)
 699      =3  #define     COMLNTHM                (*(unsigned char volatile xdata *)0xfb84)
 700      =3  #define     COMLNTHH                (*(unsigned char volatile xdata *)0xfb85)
 701      =3  #define     BLINKFRPS               (*(unsigned char volatile xdata *)0xfb86)
 702      =3  #define     LCDCR                   (*(unsigned char volatile xdata *)0xfb87)
 703      =3  #define     COM_ON_A                (*(unsigned char volatile xdata *)0xfb88)
 704      =3  #define     COM_ON_B                (*(unsigned char volatile xdata *)0xfb89)
 705      =3  #define     SEG_ON_A                (*(unsigned char volatile xdata *)0xfb8a)
 706      =3  #define     SEG_ON_B                (*(unsigned char volatile xdata *)0xfb8b)
 707      =3  #define     SEG_ON_C                (*(unsigned char volatile xdata *)0xfb8c)
 708      =3  #define     SEG_ON_D                (*(unsigned char volatile xdata *)0xfb8d)
 709      =3  #define     SEG_ON_E                (*(unsigned char volatile xdata *)0xfb8e)
 710      =3  #define     C0SEGV0                 (*(unsigned char volatile xdata *)0xfb90)
 711      =3  #define     C0SEGV1                 (*(unsigned char volatile xdata *)0xfb91)
 712      =3  #define     C0SEGV2                 (*(unsigned char volatile xdata *)0xfb92)
 713      =3  #define     C0SEGV3                 (*(unsigned char volatile xdata *)0xfb93)
 714      =3  #define     C0SEGV4                 (*(unsigned char volatile xdata *)0xfb94)
 715      =3  #define     C1SEGV0                 (*(unsigned char volatile xdata *)0xfb98)
 716      =3  #define     C1SEGV1                 (*(unsigned char volatile xdata *)0xfb99)
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 14  

 717      =3  #define     C1SEGV2                 (*(unsigned char volatile xdata *)0xfb9a)
 718      =3  #define     C1SEGV3                 (*(unsigned char volatile xdata *)0xfb9b)
 719      =3  #define     C1SEGV4                 (*(unsigned char volatile xdata *)0xfb9c)
 720      =3  #define     C2SEGV0                 (*(unsigned char volatile xdata *)0xfba0)
 721      =3  #define     C2SEGV1                 (*(unsigned char volatile xdata *)0xfba1)
 722      =3  #define     C2SEGV2                 (*(unsigned char volatile xdata *)0xfba2)
 723      =3  #define     C2SEGV3                 (*(unsigned char volatile xdata *)0xfba3)
 724      =3  #define     C2SEGV4                 (*(unsigned char volatile xdata *)0xfba4)
 725      =3  #define     C3SEGV0                 (*(unsigned char volatile xdata *)0xfba8)
 726      =3  #define     C3SEGV1                 (*(unsigned char volatile xdata *)0xfba9)
 727      =3  #define     C3SEGV2                 (*(unsigned char volatile xdata *)0xfbaa)
 728      =3  #define     C3SEGV3                 (*(unsigned char volatile xdata *)0xfbab)
 729      =3  #define     C3SEGV4                 (*(unsigned char volatile xdata *)0xfbac)
 730      =3  
 731      =3  /////////////////////////////////////////////////
 732      =3  //FA00H-FAFFH
 733      =3  /////////////////////////////////////////////////
 734      =3  
 735      =3  #define     DMA_M2M_CFG             (*(unsigned char volatile xdata *)0xfa00)
 736      =3  #define     DMA_M2M_CR              (*(unsigned char volatile xdata *)0xfa01)
 737      =3  #define     DMA_M2M_STA             (*(unsigned char volatile xdata *)0xfa02)
 738      =3  #define     DMA_M2M_AMT             (*(unsigned char volatile xdata *)0xfa03)
 739      =3  #define     DMA_M2M_DONE            (*(unsigned char volatile xdata *)0xfa04)
 740      =3  #define     DMA_M2M_TXAH            (*(unsigned char volatile xdata *)0xfa05)
 741      =3  #define     DMA_M2M_TXAL            (*(unsigned char volatile xdata *)0xfa06)
 742      =3  #define     DMA_M2M_RXAH            (*(unsigned char volatile xdata *)0xfa07)
 743      =3  #define     DMA_M2M_RXAL            (*(unsigned char volatile xdata *)0xfa08)
 744      =3  
 745      =3  #define     DMA_ADC_CFG             (*(unsigned char volatile xdata *)0xfa10)
 746      =3  #define     DMA_ADC_CR              (*(unsigned char volatile xdata *)0xfa11)
 747      =3  #define     DMA_ADC_STA             (*(unsigned char volatile xdata *)0xfa12)
 748      =3  #define     DMA_ADC_RXA             (*(unsigned  int volatile xdata *)0xfa17)
 749      =3  #define     DMA_ADC_RXAH            (*(unsigned char volatile xdata *)0xfa17)
 750      =3  #define     DMA_ADC_RXAL            (*(unsigned char volatile xdata *)0xfa18)
 751      =3  #define     DMA_ADC_CFG2            (*(unsigned char volatile xdata *)0xfa19)
 752      =3  #define     DMA_ADC_CHSW0           (*(unsigned char volatile xdata *)0xfa1a)
 753      =3  #define     DMA_ADC_CHSW1           (*(unsigned char volatile xdata *)0xfa1b)
 754      =3  
 755      =3  #define     DMA_SPI_CFG             (*(unsigned char volatile xdata *)0xfa20)
 756      =3  #define     DMA_SPI_CR              (*(unsigned char volatile xdata *)0xfa21)
 757      =3  #define     DMA_SPI_STA             (*(unsigned char volatile xdata *)0xfa22)
 758      =3  #define     DMA_SPI_AMT             (*(unsigned char volatile xdata *)0xfa23)
 759      =3  #define     DMA_SPI_DONE            (*(unsigned char volatile xdata *)0xfa24)
 760      =3  #define     DMA_SPI_TXA             (*(unsigned  int volatile xdata *)0xfa25)
 761      =3  #define     DMA_SPI_TXAH            (*(unsigned char volatile xdata *)0xfa25)
 762      =3  #define     DMA_SPI_TXAL            (*(unsigned char volatile xdata *)0xfa26)
 763      =3  #define     DMA_SPI_RXA             (*(unsigned  int volatile xdata *)0xfa27)
 764      =3  #define     DMA_SPI_RXAH            (*(unsigned char volatile xdata *)0xfa27)
 765      =3  #define     DMA_SPI_RXAL            (*(unsigned char volatile xdata *)0xfa28)
 766      =3  #define     DMA_SPI_CFG2            (*(unsigned char volatile xdata *)0xfa29)
 767      =3  
 768      =3  #define     DMA_UR1T_CFG            (*(unsigned char volatile xdata *)0xfa30)
 769      =3  #define     DMA_UR1T_CR             (*(unsigned char volatile xdata *)0xfa31)
 770      =3  #define     DMA_UR1T_STA            (*(unsigned char volatile xdata *)0xfa32)
 771      =3  #define     DMA_UR1T_AMT            (*(unsigned char volatile xdata *)0xfa33)
 772      =3  #define     DMA_UR1T_DONE           (*(unsigned char volatile xdata *)0xfa34)
 773      =3  #define     DMA_UR1T_TXA            (*(unsigned  int volatile xdata *)0xfa35)
 774      =3  #define     DMA_UR1T_TXAH           (*(unsigned char volatile xdata *)0xfa35)
 775      =3  #define     DMA_UR1T_TXAL           (*(unsigned char volatile xdata *)0xfa36)
 776      =3  #define     DMA_UR1R_CFG            (*(unsigned char volatile xdata *)0xfa38)
 777      =3  #define     DMA_UR1R_CR             (*(unsigned char volatile xdata *)0xfa39)
 778      =3  #define     DMA_UR1R_STA            (*(unsigned char volatile xdata *)0xfa3a)
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 15  

 779      =3  #define     DMA_UR1R_AMT            (*(unsigned char volatile xdata *)0xfa3b)
 780      =3  #define     DMA_UR1R_DONE           (*(unsigned char volatile xdata *)0xfa3c)
 781      =3  #define     DMA_UR1R_RXA            (*(unsigned  int volatile xdata *)0xfa3d)
 782      =3  #define     DMA_UR1R_RXAH           (*(unsigned char volatile xdata *)0xfa3d)
 783      =3  #define     DMA_UR1R_RXAL           (*(unsigned char volatile xdata *)0xfa3e)
 784      =3  
 785      =3  #define     DMA_UR2T_CFG            (*(unsigned char volatile xdata *)0xfa40)
 786      =3  #define     DMA_UR2T_CR             (*(unsigned char volatile xdata *)0xfa41)
 787      =3  #define     DMA_UR2T_STA            (*(unsigned char volatile xdata *)0xfa42)
 788      =3  #define     DMA_UR2T_AMT            (*(unsigned char volatile xdata *)0xfa43)
 789      =3  #define     DMA_UR2T_DONE           (*(unsigned char volatile xdata *)0xfa44)
 790      =3  #define     DMA_UR2T_TXA            (*(unsigned  int volatile xdata *)0xfa45)
 791      =3  #define     DMA_UR2T_TXAH           (*(unsigned char volatile xdata *)0xfa45)
 792      =3  #define     DMA_UR2T_TXAL           (*(unsigned char volatile xdata *)0xfa46)
 793      =3  #define     DMA_UR2R_CFG            (*(unsigned char volatile xdata *)0xfa48)
 794      =3  #define     DMA_UR2R_CR             (*(unsigned char volatile xdata *)0xfa49)
 795      =3  #define     DMA_UR2R_STA            (*(unsigned char volatile xdata *)0xfa4a)
 796      =3  #define     DMA_UR2R_AMT            (*(unsigned char volatile xdata *)0xfa4b)
 797      =3  #define     DMA_UR2R_DONE           (*(unsigned char volatile xdata *)0xfa4c)
 798      =3  #define     DMA_UR2R_RXA            (*(unsigned  int volatile xdata *)0xfa4d)
 799      =3  #define     DMA_UR2R_RXAH           (*(unsigned char volatile xdata *)0xfa4d)
 800      =3  #define     DMA_UR2R_RXAL           (*(unsigned char volatile xdata *)0xfa4e)
 801      =3  
 802      =3  #define     DMA_UR3T_CFG            (*(unsigned char volatile xdata *)0xfa50)
 803      =3  #define     DMA_UR3T_CR             (*(unsigned char volatile xdata *)0xfa51)
 804      =3  #define     DMA_UR3T_STA            (*(unsigned char volatile xdata *)0xfa52)
 805      =3  #define     DMA_UR3T_AMT            (*(unsigned char volatile xdata *)0xfa53)
 806      =3  #define     DMA_UR3T_DONE           (*(unsigned char volatile xdata *)0xfa54)
 807      =3  #define     DMA_UR3T_TXA            (*(unsigned  int volatile xdata *)0xfa55)
 808      =3  #define     DMA_UR3T_TXAH           (*(unsigned char volatile xdata *)0xfa55)
 809      =3  #define     DMA_UR3T_TXAL           (*(unsigned char volatile xdata *)0xfa56)
 810      =3  #define     DMA_UR3R_CFG            (*(unsigned char volatile xdata *)0xfa58)
 811      =3  #define     DMA_UR3R_CR             (*(unsigned char volatile xdata *)0xfa59)
 812      =3  #define     DMA_UR3R_STA            (*(unsigned char volatile xdata *)0xfa5a)
 813      =3  #define     DMA_UR3R_AMT            (*(unsigned char volatile xdata *)0xfa5b)
 814      =3  #define     DMA_UR3R_DONE           (*(unsigned char volatile xdata *)0xfa5c)
 815      =3  #define     DMA_UR3R_RXA            (*(unsigned  int volatile xdata *)0xfa5d)
 816      =3  #define     DMA_UR3R_RXAH           (*(unsigned char volatile xdata *)0xfa5d)
 817      =3  #define     DMA_UR3R_RXAL           (*(unsigned char volatile xdata *)0xfa5e)
 818      =3  
 819      =3  #define     DMA_UR4T_CFG            (*(unsigned char volatile xdata *)0xfa60)
 820      =3  #define     DMA_UR4T_CR             (*(unsigned char volatile xdata *)0xfa61)
 821      =3  #define     DMA_UR4T_STA            (*(unsigned char volatile xdata *)0xfa62)
 822      =3  #define     DMA_UR4T_AMT            (*(unsigned char volatile xdata *)0xfa63)
 823      =3  #define     DMA_UR4T_DONE           (*(unsigned char volatile xdata *)0xfa64)
 824      =3  #define     DMA_UR4T_TXA            (*(unsigned  int volatile xdata *)0xfa65)
 825      =3  #define     DMA_UR4T_TXAH           (*(unsigned char volatile xdata *)0xfa65)
 826      =3  #define     DMA_UR4T_TXAL           (*(unsigned char volatile xdata *)0xfa66)
 827      =3  #define     DMA_UR4R_CFG            (*(unsigned char volatile xdata *)0xfa68)
 828      =3  #define     DMA_UR4R_CR             (*(unsigned char volatile xdata *)0xfa69)
 829      =3  #define     DMA_UR4R_STA            (*(unsigned char volatile xdata *)0xfa6a)
 830      =3  #define     DMA_UR4R_AMT            (*(unsigned char volatile xdata *)0xfa6b)
 831      =3  #define     DMA_UR4R_DONE           (*(unsigned char volatile xdata *)0xfa6c)
 832      =3  #define     DMA_UR4R_RXA            (*(unsigned  int volatile xdata *)0xfa6d)
 833      =3  #define     DMA_UR4R_RXAH           (*(unsigned char volatile xdata *)0xfa6d)
 834      =3  #define     DMA_UR4R_RXAL           (*(unsigned char volatile xdata *)0xfa6e)
 835      =3  
 836      =3  #define     DMA_LCM_CFG             (*(unsigned char volatile xdata *)0xfa70)
 837      =3  #define     DMA_LCM_CR              (*(unsigned char volatile xdata *)0xfa71)
 838      =3  #define     DMA_LCM_STA             (*(unsigned char volatile xdata *)0xfa72)
 839      =3  #define     DMA_LCM_AMT             (*(unsigned char volatile xdata *)0xfa73)
 840      =3  #define     DMA_LCM_DONE            (*(unsigned char volatile xdata *)0xfa74)
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 16  

 841      =3  #define     DMA_LCM_TXA             (*(unsigned  int volatile xdata *)0xfa75)
 842      =3  #define     DMA_LCM_TXAH            (*(unsigned char volatile xdata *)0xfa75)
 843      =3  #define     DMA_LCM_TXAL            (*(unsigned char volatile xdata *)0xfa76)
 844      =3  #define     DMA_LCM_RXA             (*(unsigned  int volatile xdata *)0xfa77)
 845      =3  #define     DMA_LCM_RXAH            (*(unsigned char volatile xdata *)0xfa77)
 846      =3  #define     DMA_LCM_RXAL            (*(unsigned char volatile xdata *)0xfa78)
 847      =3  
 848      =3  /////////////////////////////////////////////////
 849      =3  //USB Control Regiter
 850      =3  /////////////////////////////////////////////////
 851      =3  
 852      =3  //sfr       USBCLK      =           0xdc;
 853      =3  //sfr       USBDAT      =           0xec;
 854      =3  //sfr       USBCON      =           0xf4;
 855      =3  //sfr       USBADR      =           0xfc;
 856      =3  
 857      =3  //使用方法:
 858      =3  //      char dat;
 859      =3  //
 860      =3  //      READ_USB(CSR0, dat);        //读USB寄存器
 861      =3  //      WRITE_USB(FADDR, 0x00);     //写USB寄存器
 862      =3  
 863      =3  #define     READ_USB(reg, dat)          \
 864      =3              {                           \
 865      =3                  while (USBADR & 0x80);  \
 866      =3                  USBADR = (reg) | 0x80;  \
 867      =3                  while (USBADR & 0x80);  \
 868      =3                  (dat) = USBDAT;         \
 869      =3              }
 870      =3  
 871      =3  #define     WRITE_USB(reg, dat)         \
 872      =3              {                           \
 873      =3                  while (USBADR & 0x80);  \
 874      =3                  USBADR = (reg) & 0x7f;  \
 875      =3                  USBDAT = (dat);         \
 876      =3              }
 877      =3  
 878      =3  #define     USBBASE                 0
 879      =3  #define     FADDR                   (USBBASE + 0)
 880      =3  #define     UPDATE                  0x80
 881      =3  #define     POWER                   (USBBASE + 1)
 882      =3  #define     ISOUD                   0x80
 883      =3  #define     USBRST                  0x08
 884      =3  #define     USBRSU                  0x04
 885      =3  #define     USBSUS                  0x02
 886      =3  #define     ENSUS                   0x01
 887      =3  #define     INTRIN1                 (USBBASE + 2)
 888      =3  #define     EP5INIF                 0x20
 889      =3  #define     EP4INIF                 0x10
 890      =3  #define     EP3INIF                 0x08
 891      =3  #define     EP2INIF                 0x04
 892      =3  #define     EP1INIF                 0x02
 893      =3  #define     EP0IF                   0x01
 894      =3  #define     INTROUT1                (USBBASE + 4)
 895      =3  #define     EP5OUTIF                0x20
 896      =3  #define     EP4OUTIF                0x10
 897      =3  #define     EP3OUTIF                0x08
 898      =3  #define     EP2OUTIF                0x04
 899      =3  #define     EP1OUTIF                0x02
 900      =3  #define     INTRUSB                 (USBBASE + 6)
 901      =3  #define     SOFIF                   0x08
 902      =3  #define     RSTIF                   0x04
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 17  

 903      =3  #define     RSUIF                   0x02
 904      =3  #define     SUSIF                   0x01
 905      =3  #define     INTRIN1E                (USBBASE + 7)
 906      =3  #define     EP5INIE                 0x20
 907      =3  #define     EP4INIE                 0x10
 908      =3  #define     EP3INIE                 0x08
 909      =3  #define     EP2INIE                 0x04
 910      =3  #define     EP1INIE                 0x02
 911      =3  #define     EP0IE                   0x01
 912      =3  #define     INTROUT1E               (USBBASE + 9)
 913      =3  #define     EP5OUTIE                0x20
 914      =3  #define     EP4OUTIE                0x10
 915      =3  #define     EP3OUTIE                0x08
 916      =3  #define     EP2OUTIE                0x04
 917      =3  #define     EP1OUTIE                0x02
 918      =3  #define     INTRUSBE                (USBBASE + 11)
 919      =3  #define     SOFIE                   0x08
 920      =3  #define     RSTIE                   0x04
 921      =3  #define     RSUIE                   0x02
 922      =3  #define     SUSIE                   0x01
 923      =3  #define     FRAME1                  (USBBASE + 12)
 924      =3  #define     FRAME2                  (USBBASE + 13)
 925      =3  #define     INDEX                   (USBBASE + 14)
 926      =3  #define     INMAXP                  (USBBASE + 16)
 927      =3  #define     CSR0                    (USBBASE + 17)
 928      =3  #define     SSUEND                  0x80
 929      =3  #define     SOPRDY                  0x40
 930      =3  #define     SDSTL                   0x20
 931      =3  #define     SUEND                   0x10
 932      =3  #define     DATEND                  0x08
 933      =3  #define     STSTL                   0x04
 934      =3  #define     IPRDY                   0x02
 935      =3  #define     OPRDY                   0x01
 936      =3  #define     INCSR1                  (USBBASE + 17)
 937      =3  #define     INCLRDT                 0x40
 938      =3  #define     INSTSTL                 0x20
 939      =3  #define     INSDSTL                 0x10
 940      =3  #define     INFLUSH                 0x08
 941      =3  #define     INUNDRUN                0x04
 942      =3  #define     INFIFONE                0x02
 943      =3  #define     INIPRDY                 0x01
 944      =3  #define     INCSR2                  (USBBASE + 18)
 945      =3  #define     INAUTOSET               0x80
 946      =3  #define     INISO                   0x40
 947      =3  #define     INMODEIN                0x20
 948      =3  #define     INMODEOUT               0x00
 949      =3  #define     INENDMA                 0x10
 950      =3  #define     INFCDT                  0x08
 951      =3  #define     OUTMAXP                 (USBBASE + 19)
 952      =3  #define     OUTCSR1                 (USBBASE + 20)
 953      =3  #define     OUTCLRDT                0x80
 954      =3  #define     OUTSTSTL                0x40
 955      =3  #define     OUTSDSTL                0x20
 956      =3  #define     OUTFLUSH                0x10
 957      =3  #define     OUTDATERR               0x08
 958      =3  #define     OUTOVRRUN               0x04
 959      =3  #define     OUTFIFOFUL              0x02
 960      =3  #define     OUTOPRDY                0x01
 961      =3  #define     OUTCSR2                 (USBBASE + 21)
 962      =3  #define     OUTAUTOCLR              0x80
 963      =3  #define     OUTISO                  0x40
 964      =3  #define     OUTENDMA                0x20
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 18  

 965      =3  #define     OUTDMAMD                0x10
 966      =3  #define     COUNT0                  (USBBASE + 22)
 967      =3  #define     OUTCOUNT1               (USBBASE + 22)
 968      =3  #define     OUTCOUNT2               (USBBASE + 23)
 969      =3  #define     FIFO0                   (USBBASE + 32)
 970      =3  #define     FIFO1                   (USBBASE + 33)
 971      =3  #define     FIFO2                   (USBBASE + 34)
 972      =3  #define     FIFO3                   (USBBASE + 35)
 973      =3  #define     FIFO4                   (USBBASE + 36)
 974      =3  #define     FIFO5                   (USBBASE + 37)
 975      =3  #define     UTRKCTL                 (USBBASE + 48)
 976      =3  #define     UTRKSTS                 (USBBASE + 49)
 977      =3  
 978      =3  /////////////////////////////////////////////////
 979      =3  //Interrupt Vector
 980      =3  /////////////////////////////////////////////////
 981      =3  
 982      =3  #define     INT0_VECTOR             0       //0003H
 983      =3  #define     TMR0_VECTOR             1       //000BH
 984      =3  #define     INT1_VECTOR             2       //0013H
 985      =3  #define     TMR1_VECTOR             3       //001BH
 986      =3  #define     UART1_VECTOR            4       //0023H
 987      =3  #define     ADC_VECTOR              5       //002BH
 988      =3  #define     LVD_VECTOR              6       //0033H
 989      =3  #define     UART2_VECTOR            8       //0043H
 990      =3  #define     SPI_VECTOR              9       //004BH
 991      =3  #define     INT2_VECTOR             10      //0053H
 992      =3  #define     INT3_VECTOR             11      //005BH
 993      =3  #define     TMR2_VECTOR             12      //0063H
 994      =3  #define     USER_VECTOR             13      //006BH
 995      =3  #define     INT4_VECTOR             16      //0083H
 996      =3  #define     UART3_VECTOR            17      //008BH
 997      =3  #define     UART4_VECTOR            18      //0093H
 998      =3  #define     TMR3_VECTOR             19      //009BH
 999      =3  #define     TMR4_VECTOR             20      //00A3H
1000      =3  #define     CMP_VECTOR              21      //00ABH
1001      =3  #define     I2C_VECTOR              24      //00C3H
1002      =3  #define     USB_VECTOR              25      //00CBH
1003      =3  #define     PWMA_VECTOR             26      //00D3H
1004      =3  #define     PWMB_VECTOR             27      //00DBH
1005      =3  
1006      =3  #define     TKSU_VECTOR             35      //011BH
1007      =3  #define     RTC_VECTOR              36      //0123H
1008      =3  #define     P0INT_VECTOR            37      //012BH
1009      =3  #define     P1INT_VECTOR            38      //0133H
1010      =3  #define     P2INT_VECTOR            39      //013BH
1011      =3  #define     P3INT_VECTOR            40      //0143H
1012      =3  #define     P4INT_VECTOR            41      //014BH
1013      =3  #define     P5INT_VECTOR            42      //0153H
1014      =3  #define     P6INT_VECTOR            43      //015BH
1015      =3  #define     P7INT_VECTOR            44      //0163H
1016      =3  #define     DMA_M2M_VECTOR          47      //017BH
1017      =3  #define     DMA_ADC_VECTOR          48      //0183H
1018      =3  #define     DMA_SPI_VECTOR          49      //018BH
1019      =3  #define     DMA_UR1T_VECTOR         50      //0193H
1020      =3  #define     DMA_UR1R_VECTOR         51      //019BH
1021      =3  #define     DMA_UR2T_VECTOR         52      //01A3H
1022      =3  #define     DMA_UR2R_VECTOR         53      //01ABH
1023      =3  #define     DMA_UR3T_VECTOR         54      //01B3H
1024      =3  #define     DMA_UR3R_VECTOR         55      //01BBH
1025      =3  #define     DMA_UR4T_VECTOR         56      //01C3H
1026      =3  #define     DMA_UR4R_VECTOR         57      //01CBH
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 19  

1027      =3  #define     DMA_LCM_VECTOR          58      //01D3H
1028      =3  #define     LCM_VECTOR              59      //01DBH
1029      =3  
1030      =3  /////////////////////////////////////////////////
1031      =3  #define EAXSFR()    P_SW2 |= 0x80   /* MOVX A,@DPTR/MOVX @DPTR,A指令的操作对象为扩展SFR(XSFR) */
1032      =3  #define EAXRAM()    P_SW2 &= ~0x80    /* MOVX A,@DPTR/MOVX @DPTR,A指令的操作对象为扩展RAM(XRAM) */
1033      =3  
1034      =3  
1035      =3  /////////////////////////////////////////////////
1036      =3  #define NOP1()  _nop_()
1037      =3  #define NOP2()  NOP1(),NOP1()
1038      =3  #define NOP3()  NOP2(),NOP1()
1039      =3  #define NOP4()  NOP3(),NOP1()
1040      =3  #define NOP5()  NOP4(),NOP1()
1041      =3  #define NOP6()  NOP5(),NOP1()
1042      =3  #define NOP7()  NOP6(),NOP1()
1043      =3  #define NOP8()  NOP7(),NOP1()
1044      =3  #define NOP9()  NOP8(),NOP1()
1045      =3  #define NOP10() NOP9(),NOP1()
1046      =3  #define NOP11() NOP10(),NOP1()
1047      =3  #define NOP12() NOP11(),NOP1()
1048      =3  #define NOP13() NOP12(),NOP1()
1049      =3  #define NOP14() NOP13(),NOP1()
1050      =3  #define NOP15() NOP14(),NOP1()
1051      =3  #define NOP16() NOP15(),NOP1()
1052      =3  #define NOP17() NOP16(),NOP1()
1053      =3  #define NOP18() NOP17(),NOP1()
1054      =3  #define NOP19() NOP18(),NOP1()
1055      =3  #define NOP20() NOP19(),NOP1()
1056      =3  #define NOP21() NOP20(),NOP1()
1057      =3  #define NOP22() NOP21(),NOP1()
1058      =3  #define NOP23() NOP22(),NOP1()
1059      =3  #define NOP24() NOP23(),NOP1()
1060      =3  #define NOP25() NOP24(),NOP1()
1061      =3  #define NOP26() NOP25(),NOP1()
1062      =3  #define NOP27() NOP26(),NOP1()
1063      =3  #define NOP28() NOP27(),NOP1()
1064      =3  #define NOP29() NOP28(),NOP1()
1065      =3  #define NOP30() NOP29(),NOP1()
1066      =3  #define NOP31() NOP30(),NOP1()
1067      =3  #define NOP32() NOP31(),NOP1()
1068      =3  #define NOP33() NOP32(),NOP1()
1069      =3  #define NOP34() NOP33(),NOP1()
1070      =3  #define NOP35() NOP34(),NOP1()
1071      =3  #define NOP36() NOP35(),NOP1()
1072      =3  #define NOP37() NOP36(),NOP1()
1073      =3  #define NOP38() NOP37(),NOP1()
1074      =3  #define NOP39() NOP38(),NOP1()
1075      =3  #define NOP40() NOP39(),NOP1()
1076      =3  #define NOP(N)  NOP##N()
1077      =3  
1078      =3  
1079      =3  /////////////////////////////////////////////////
1080      =3  
1081      =3  #endif
1082      =3  
  48      =2  #include<intrins.h>
   1      =3  /*--------------------------------------------------------------------------
   2      =3  INTRINS.H
   3      =3  
   4      =3  Intrinsic functions for C51.
   5      =3  Copyright (c) 1988-2010 Keil Elektronik GmbH and ARM Germany GmbH
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 20  

   6      =3  All rights reserved.
   7      =3  --------------------------------------------------------------------------*/
   8      =3  
   9      =3  #ifndef __INTRINS_H__
  10      =3  #define __INTRINS_H__
  11      =3  
  12      =3  #pragma SAVE
  13      =3  
  14      =3  #if defined (__CX2__)
           =3 #pragma FUNCTIONS(STATIC)
           =3 /* intrinsic functions are reentrant, but need static attribute */
           =3 #endif
  18      =3  
  19      =3  extern void          _nop_     (void);
  20      =3  extern bit           _testbit_ (bit);
  21      =3  extern unsigned char _cror_    (unsigned char, unsigned char);
  22      =3  extern unsigned int  _iror_    (unsigned int,  unsigned char);
  23      =3  extern unsigned long _lror_    (unsigned long, unsigned char);
  24      =3  extern unsigned char _crol_    (unsigned char, unsigned char);
  25      =3  extern unsigned int  _irol_    (unsigned int,  unsigned char);
  26      =3  extern unsigned long _lrol_    (unsigned long, unsigned char);
  27      =3  extern unsigned char _chkfloat_(float);
  28      =3  #if defined (__CX2__)
           =3 extern int           abs       (int);
           =3 extern void          _illop_   (void);
           =3 #endif
  32      =3  #if !defined (__CX2__)
  33      =3  extern void          _push_    (unsigned char _sfr);
  34      =3  extern void          _pop_     (unsigned char _sfr);
  35      =3  #endif
  36      =3  
  37      =3  #pragma RESTORE
  38      =3  
  39      =3  #endif
  40      =3  
  49      =2  
  50      =2  #define u8 unsigned char
  51      =2  #define u16 unsigned int
  52      =2  #define s16 signed int
  53      =2  #define u32 unsigned long
  54      =2  #define s32 signed long
  55      =2  #define word_t u8
  56      =2  #define uint8_t u8
  57      =2  #define bool bit
  58      =2  
  59      =2  /*////////////////////////////////////////////////////////////////////////////*/
  60      =2  #elif ARDUINO_ATMEAG328P
           =2 /*////////////////////////////////////////////////////////////////////////////*/
           =2 
           =2 #include <arduino.h>
           =2 
           =2 #define u8 unsigned char
           =2 #define u16 unsigned int
           =2 #define s16 signed int
           =2 #define u32 unsigned long
           =2 #define word_t u8
           =2 #define uint8_t u8
           =2 #define idata
           =2 #define xdata
           =2 #define code
           =2 
           =2 /*////////////////////////////////////////////////////////////////////////////*/
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 21  

           =2 
           =2 #else
           =2   #error "board not defined!"
           =2 #endif
  80      =2  
  81      =2  /*////////////////////////////////////////////////////////////////////////////*/
  82      =2  
  83      =2  /******************************************************************************/
  84      =2  /*-DO NOT ADD YOUR CODE AFTER HERE!-*\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\-WIDTH: 80-*/
  85      =2  
  86      =2  #endif
  19      =1  #include "config.h"
   1      =2  /*
   2      =2  ********************************************************************************
   3      =2  *                             ---ofme---
   4      =2  *           Copyleft (c) 2021-2023, 寰椋灞辫胺 / ofourme@163.com
   5      =2  *           License: LGPL
   6      =2  *
   7      =2  *   CONFIG.H-V1.1.0 (2023.Oct.25th)
   8      =2  *
   9      =2  ********************************************************************************
  10      =2  */
  11      =2  
  12      =2  #ifndef __CONFIG_H__
  13      =2  #define __CONFIG_H__
  14      =2  
  15      =2  /*-DO NOT ADD YOUR CODE BEFORE HERE!-*\\\\\\\\\\\\\\\\\\\\\\\\\\\\\-WIDTH: 80-*/
  16      =2  /******************************************************************************/
  17      =2  
  18      =2  #include "hw.h"
   1      =3  /*
   2      =3  ********************************************************************************
   3      =3  *                             ---ofme---
   4      =3  *           Copyleft (c) 2021-2023, 寰椋灞辫胺 / ofourme@163.com
   5      =3  *           License: LGPL
   6      =3  *
   7      =3  *   HW.H-V1.0.0 (2023.Oct.25th)
   8      =3  *
   9      =3  ********************************************************************************
  10      =3  */
  11      =3  
  12      =3  #ifndef __HW_H__
           =3 #define __HW_H__
           =3 
           =3 /*-DO NOT ADD YOUR CODE BEFORE HERE!-*\\\\\\\\\\\\\\\\\\\\\\\\\\\\\-WIDTH: 80-*/
           =3 /******************************************************************************/
           =3 
           =3 #define STC_15W408AS    0
           =3 #define STC_15W408AS_SOP20  0
           =3 #define ARDUINO_ATMEAG328P  0
           =3 #define STC_8H        1
           =3 #define STC_8H_TSSOP20    1
           =3 
           =3 #define FOSC  12000000UL
           =3 
           =3 /*%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*/
           =3 
           =3 /*////////////////////////////////////////////////////////////////////////////*/
           =3 #if STC_15W408AS
           =3 /*////////////////////////////////////////////////////////////////////////////*/
           =3 
           =3 #include "stc15w.h"
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 22  

           =3 #include<intrins.h>
           =3 
           =3 #define u8 unsigned char
           =3 #define u16 unsigned int
           =3 #define s16 signed int
           =3 #define u32 unsigned long
           =3 #define word_t u8
           =3 #define uint8_t u8
           =3 #define bool bit
           =3   
           =3 /*////////////////////////////////////////////////////////////////////////////*/
           =3 #elif STC_8H
           =3 /*////////////////////////////////////////////////////////////////////////////*/
           =3 
           =3 #include "STC8H.h"
           =3 #include<intrins.h>
           =3 
           =3 #define u8 unsigned char
           =3 #define u16 unsigned int
           =3 #define s16 signed int
           =3 #define u32 unsigned long
           =3 #define s32 signed long
           =3 #define word_t u8
           =3 #define uint8_t u8
           =3 #define bool bit
           =3 
           =3 /*////////////////////////////////////////////////////////////////////////////*/
           =3 #elif ARDUINO_ATMEAG328P
           =3 /*////////////////////////////////////////////////////////////////////////////*/
           =3 
           =3 #include <arduino.h>
           =3 
           =3 #define u8 unsigned char
           =3 #define u16 unsigned int
           =3 #define s16 signed int
           =3 #define u32 unsigned long
           =3 #define word_t u8
           =3 #define uint8_t u8
           =3 #define idata
           =3 #define xdata
           =3 #define code
           =3 
           =3 /*////////////////////////////////////////////////////////////////////////////*/
           =3 
           =3 #else
           =3   #error "board not defined!"
           =3 #endif
           =3 
           =3 /*////////////////////////////////////////////////////////////////////////////*/
           =3 
           =3 /******************************************************************************/
           =3 /*-DO NOT ADD YOUR CODE AFTER HERE!-*\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\-WIDTH: 80-*/
           =3 
           =3 #endif
  19      =2  #include "loli3_pact.h"
   1      =3  /*
   2      =3  ********************************************************************************
   3      =3  *                             ---ofme---
   4      =3  *           Copyleft (c) 2008-2023, 寰椋灞辫胺/ofourme@163.com
   5      =3  *           License: LGPL
   6      =3  *
   7      =3  *   LOLI3_PACT.H-V1.1.0 (2023.Sep.18th)
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 23  

   8      =3  *
   9      =3  ********************************************************************************
  10      =3  */
  11      =3  
  12      =3  #ifndef __LOLI3_PACT_H__
  13      =3  #define __LOLI3_PACT_H__
  14      =3  
  15      =3  /*-DO NOT ADD YOUR CODE BEFORE HERE!-*\\\\\\\\\\\\\\\\\\\\\\\\\\\\\-WIDTH: 80-*/
  16      =3  /******************************************************************************/
  17      =3  /*////////////////////////////////////////////////////////////////////////////*/
  18      =3  
  19      =3  //浣跨ㄢLOVE浣涓洪璁ゅ板
  20      =3  #define LOLI3_ADDRESS_STARTUP           'L','O','V','E','!'
  21      =3  #define LOLI3_NRF_DATA_LENGTH           11
  22      =3  
  23      =3  //浣跨33棰浣涓烘ユ舵洪杩CHANNEL
  24      =3  #define LOLI3_CHANNEL_STARTUP           33
  25      =3  //浣跨66棰浣涓烘ユ舵哄CHANNEL
  26      =3  #define LOLI3_CHANNEL_CONNECT           66
  27      =3  //璺抽CHANNEL伴
  28      =3  #define LOLI3_NUM_HOPPING               5
  29      =3  //榛璁ょㄤ璺抽5涓CHANNEL
  30      =3  #define LOLI3_HOPPING_STARTUP           10,35,60,85,110
  31      =3  
  32      =3  /*////////////////////////////////////////////////////////////////////////////*/
  33      =3  // update(20230918):
  34      =3  // 垫鸿ヨ瀹0.5~2.5ms锛ㄦ20ms锛妯¤垫轰浣跨ㄨ瀹1~2ms
  35      =3  // loli3ユ舵哄规ユ跺扮版浣*27/20=1.35杩绠锛宠瀹=0.811+CH*27/20
  36      =3  // 涓轰煎癸舵锛淇逛负*43(*43淇璇10浣CH间婧㈠16浣)跺崇Щ5
             -=*43/32=1.34375~=1.35锛
  37      =3  //     --> 朵慨规浣瀹戒负0.813浠ヤ涓浣1.5ms涓锛宠瀹=0.813+CH*43>>5
  38      =3  #define LOLI3_RECV_SERVO_RANGE_MUL      43
  39      =3  #define LOLI3_RECV_SERVO_RANGE_R_SHIFT  5
  40      =3  // loli3ユ舵烘锛褰pwm板煎浜涓瀹硷存ヨ0姝ゅ版楂1023璁剧疆
             -
  41      =3  #define LOLI3_RECV_PWM_MINNUM_DEFAULT   100
  42      =3  
  43      =3  /******************************************************************************/
  44      =3  /*-DO NOT ADD YOUR CODE AFTER HERE!-*\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\-WIDTH: 80-*/
  45      =3  
  46      =3  #endif
  20      =2  
  21      =2  /*%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*/
  22      =2  
  23      =2  // enable SBUS_DEBUG  would disable SBUS pin output
  24      =2  //#define SBUS_DEBUG
  25      =2  //----------------------------------------------------------------------------//
  26      =2  // Set the SBUS baud rate. UART always be SERIAL_8E2(8浣版锛舵￠锛2浣姝浣)
  27      =2  // Optional: SBUS_BPS_9600, SBUS_BPS_115200, SBUS_BPS_100K; Default: SBUS_BPS_100K.
  28      =2  //#define SBUS_BPS_115200
  29      =2  #define SBUS_BPS_100K
  30      =2  //----------------------------------------------------------------------------//
  31      =2  // 杞璇浠诲″跺ㄦヨ绮惧害锛榛璁3ms
  32      =2  #define LOLI3_RECV_TIMERS_TICK_SETPS 3
  33      =2  //----------------------------------------------------------------------------//
  34      =2  // LOLI3_RECV_PWM_MINNUM: LOLI3_RECV_PWM_MINNUM_DEFAULT would compatibility with loli3 original.
  35      =2  //                        0 would set the minimum if possible.  浣澶у藉艰存娉杈0.
  36      =2  #define LOLI3_RECV_PWM_MINNUM   LOLI3_RECV_PWM_MINNUM_DEFAULT
  37      =2  // #define LOLI3_RECV_PWM_MINNUM 0
  38      =2  //----------------------------------------------------------------------------//
  39      =2  // ㄥ垫甸诲惧ぇ帮姝ｅ父3
  40      =2  #define VOLTAGE_BAT_MULTIPLE 3
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 24  

  41      =2  //----------------------------------------------------------------------------//
  42      =2  // 靛璋寸郴帮寰璋姝ょ郴颁互归涓
  43      =2  /*
  44      =2    BGV: ㄥ淇″锋靛ADC硷BGV5锛5VADC硷BGVx锛VCC靛惰浆㈢ADC
  45      =2    STC15W: ㄥ淇″锋靛哄浣涓纭瀹锛哄靛Va=BGV5/1024*5=BGVx/1024*VCC
  46      =2            --> VCC=BGV5/1024*5*1024/BGVx=BGV5*5/BGVx
  47      =2    STC8H:  ㄥ淇″锋靛哄(1.19v)锛 1.19v=BGV5/1024*5=BGVx/1024*VCC
  48      =2            --> VCC=BGV5/1024*5*1024/BGVx=BGV5*5/BGVx
  49      =2            朵腑BGV5=1.19*1024/5+0.5~=244
  50      =2  */
  51      =2  #if STC_15W408AS
           =2   #define BGV5  260
           =2 #elif STC_8H
  54      =2    #define BGV5  ((unsigned long)(1.19*1024/5+0.5))
  55      =2  #else
           =2   #err "BGV5 not defined."
           =2 #endif
  58      =2    // 姝ゅ5涓5V靛归锛浼杈靛版╁ぇ100浠ヤ灏扮瑰2浣锛杈adc
             -兼护娉㈠╁ぇ8锛涓虹涓浣*5*100*8
  59      =2  #define VOLTAGE_IC_ADJUST ((5ul*100*8)*BGV5)
  60      =2  //----------------------------------------------------------------------------//
  61      =2  
  62      =2  #ifdef SBUS_DEBUG
           =2   #define DBG(str) hw_uart_puts(str)
           =2 #else
  65      =2    #define DBG(str)
  66      =2  #endif
  67      =2  
  68      =2  /*////////////////////////////////////////////////////////////////////////////*/
  69      =2  #if STC_15W408AS
           =2 /*////////////////////////////////////////////////////////////////////////////*/
           =2 
           =2 #if STC_15W408AS_SOP20
           =2 //瀹涔绀虹
           =2 sbit LED=P1^0;
           =2 //瀹涔8涓杈
           =2 sbit CH1=P3^7;
           =2 sbit CH2=P3^6;
           =2 sbit CH3=P3^5;
           =2 sbit CH4=P3^4;
           =2 sbit CH5=P3^3;
           =2 sbit CH6=P3^2;
           =2 sbit CH7=P3^1;
           =2 sbit CH8=P3^0;
           =2 
           =2 sbit CH9=P5^4;
           =2 sbit CH10=P5^5;
           =2 
           =2 //瀹涔绾挎ā绠¤
           =2 sbit CE  =P1^2;
           =2 sbit SCK =P1^4;
           =2 sbit MISO=P1^6;
           =2 sbit IRQ =P1^7;
           =2 sbit MOSI=P1^5;
           =2 sbit CSN =P1^3;
           =2 
           =2 #else
           =2 //瀹涔绀虹
           =2 sbit LED=P1^2;
           =2 //瀹涔8涓杈
           =2 sbit CH1=P3^7;
           =2 sbit CH2=P3^6;
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 25  

           =2 sbit CH3=P3^5;
           =2 sbit CH4=P3^4;
           =2 sbit CH5=P3^3;
           =2 sbit CH6=P3^2;
           =2 sbit CH7=P3^1;
           =2 sbit CH8=P3^0;
           =2 //瀹涔绾挎ā绠¤
           =2 sbit CE  =P5^5;
           =2 sbit SCK =P5^4;
           =2 sbit MISO=P1^7;
           =2 sbit IRQ =P1^6;
           =2 sbit MOSI=P1^5;
           =2 sbit CSN =P1^4;
           =2 
           =2 #endif
           =2 
           =2 /*////////////////////////////////////*/
           =2 // 规纭浠跺垫′欢缂璇
           =2 // PIN_CH5/PIN_CH_OUTㄤ杈猴PIN_CH6/PIN_CH_INㄤ杈ャユ舵哄ㄦ跺妫娴CH5
             -CH6ワ伴瀵广
           =2 #define PIN_CH_OUT_P33
           =2 #define PIN_CH_IN_P32
           =2 // ㄥ垫靛妫娴寮P1.1
           =2 #define PIN_ADC_P1X 1
           =2 // EEPROM椤甸㈠ぇ灏
           =2 #define SIZE_STC_EEPROM_PAGE  512
           =2 #define SIZE_EEPROM_PAGE      SIZE_STC_EEPROM_PAGE
           =2 // 舵椹卞
           =2 #define LED_ON()  do{LED = 1;}while(0)
           =2 #define LED_OFF() do{LED = 0;}while(0)
           =2 
           =2 /*////////////////////////////////////*/
           =2 #define FUNC_MILLIS_EN  0
           =2 #define FUNC_MICROS_EN  1
           =2 #define FUNC_DELAY_EN   1
           =2 #define FUNC_DELAYMICROSECONDS_EN 0
           =2 
           =2 /*////////////////////////////////////////////////////////////////////////////*/
           =2 #elif STC_8H
 140      =2  /*////////////////////////////////////////////////////////////////////////////*/
 141      =2  
 142      =2  #if STC_8H_TSSOP20
 143      =2  
 144      =2  sbit LED=P1^2;
 145      =2  
 146      =2  sbit CH1=P5^4;
 147      =2  sbit CH2=P1^7;
 148      =2  sbit CH3=P1^0;
 149      =2  sbit CH4=P3^7;
 150      =2  sbit CH5=P3^6;
 151      =2  sbit CH6=P3^4;
 152      =2  sbit CH7=P3^3;
 153      =2  sbit CH8=P3^0;
 154      =2  
 155      =2  sbit CHx=P3^1;
 156      =2  
 157      =2  sbit CE  =P3^2;
 158      =2  sbit SCK =P1^5;
 159      =2  sbit MISO=P1^4;
 160      =2  sbit IRQ =P1^6;
 161      =2  sbit MOSI=P1^3;
 162      =2  sbit CSN =P3^5;
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 26  

 163      =2  
 164      =2  #else
           =2 #endif
 166      =2  
 167      =2  /*////////////////////////////////////*/
 168      =2  // 娆″涔VOLTAGE_BAT_MULTIPLE锛瑕㈢版
 169      =2  #if defined  VOLTAGE_BAT_MULTIPLE
 170      =2  #define VOLTAGE_BAT_MULTIPLE 4
*** WARNING C317 IN LINE 170 OF ..\port\config.h: attempt to redefine macro 'VOLTAGE_BAT_MULTIPLE'
 171      =2  #endif
 172      =2  #define PIN_CH_OUT_P37
 173      =2  #define PIN_CH_IN_P36
 174      =2  #define PIN_ADC_P1X 1
 175      =2  #define SIZE_STC_EEPROM_PAGE  512
 176      =2  #define SIZE_EEPROM_PAGE      SIZE_STC_EEPROM_PAGE
 177      =2  #define LED_ON()  do{LED = 1;}while(0)
 178      =2  #define LED_OFF() do{LED = 0;}while(0)
 179      =2  
 180      =2  /*////////////////////////////////////*/
 181      =2  #define FUNC_MILLIS_EN  0
 182      =2  #define FUNC_MICROS_EN  1
 183      =2  #define FUNC_DELAY_EN   1
 184      =2  #define FUNC_DELAYMICROSECONDS_EN 0
 185      =2  
 186      =2  /*////////////////////////////////////////////////////////////////////////////*/
 187      =2  #elif ARDUINO_ATMEAG328P
           =2 /*////////////////////////////////////////////////////////////////////////////*/
           =2 
           =2 #define DEF_SPI_SOFT
           =2 //瀹涔绀虹
           =2 #define LED 13
           =2 //瀹涔8涓杈
           =2 //瀹涔绾挎ā绠¤
           =2 #define IRQ   2
           =2 #define MISO  3
           =2 #define MOSI  4
           =2 #define SCK   5
           =2 #define CSN   6
           =2 #define CE    7
           =2 
           =2 /*////////////////////////////////////////////////////////////////////////////*/
           =2 #endif
 204      =2  /******************************************************************************/
 205      =2  /*-DO NOT ADD YOUR CODE AFTER HERE!-*\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\-WIDTH: 80-*/
 206      =2  
 207      =2  #endif
  20      =1  #include "loli3_pact.h"
   1      =2  /*
   2      =2  ********************************************************************************
   3      =2  *                             ---ofme---
   4      =2  *           Copyleft (c) 2008-2023, 寰椋灞辫胺/ofourme@163.com
   5      =2  *           License: LGPL
   6      =2  *
   7      =2  *   LOLI3_PACT.H-V1.1.0 (2023.Sep.18th)
   8      =2  *
   9      =2  ********************************************************************************
  10      =2  */
  11      =2  
  12      =2  #ifndef __LOLI3_PACT_H__
           =2 #define __LOLI3_PACT_H__
           =2 
           =2 /*-DO NOT ADD YOUR CODE BEFORE HERE!-*\\\\\\\\\\\\\\\\\\\\\\\\\\\\\-WIDTH: 80-*/
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 27  

           =2 /******************************************************************************/
           =2 /*////////////////////////////////////////////////////////////////////////////*/
           =2 
           =2 //浣跨ㄢLOVE浣涓洪璁ゅ板
           =2 #define LOLI3_ADDRESS_STARTUP           'L','O','V','E','!'
           =2 #define LOLI3_NRF_DATA_LENGTH           11
           =2 
           =2 //浣跨33棰浣涓烘ユ舵洪杩CHANNEL
           =2 #define LOLI3_CHANNEL_STARTUP           33
           =2 //浣跨66棰浣涓烘ユ舵哄CHANNEL
           =2 #define LOLI3_CHANNEL_CONNECT           66
           =2 //璺抽CHANNEL伴
           =2 #define LOLI3_NUM_HOPPING               5
           =2 //榛璁ょㄤ璺抽5涓CHANNEL
           =2 #define LOLI3_HOPPING_STARTUP           10,35,60,85,110
           =2 
           =2 /*////////////////////////////////////////////////////////////////////////////*/
           =2 // update(20230918):
           =2 // 垫鸿ヨ瀹0.5~2.5ms锛ㄦ20ms锛妯¤垫轰浣跨ㄨ瀹1~2ms
           =2 // loli3ユ舵哄规ユ跺扮版浣*27/20=1.35杩绠锛宠瀹=0.811+CH*27/20
           =2 // 涓轰煎癸舵锛淇逛负*43(*43淇璇10浣CH间婧㈠16浣)跺崇Щ5
             -=*43/32=1.34375~=1.35锛
           =2 //     --> 朵慨规浣瀹戒负0.813浠ヤ涓浣1.5ms涓锛宠瀹=0.813+CH*43>>5
           =2 #define LOLI3_RECV_SERVO_RANGE_MUL      43
           =2 #define LOLI3_RECV_SERVO_RANGE_R_SHIFT  5
           =2 // loli3ユ舵烘锛褰pwm板煎浜涓瀹硷存ヨ0姝ゅ版楂1023璁剧疆
             -
           =2 #define LOLI3_RECV_PWM_MINNUM_DEFAULT   100
           =2 
           =2 /******************************************************************************/
           =2 /*-DO NOT ADD YOUR CODE AFTER HERE!-*\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\-WIDTH: 80-*/
           =2 
           =2 #endif
  21      =1  #include "loli3_lib.h"
   1      =2  /*
   2      =2  ********************************************************************************
   3      =2  *                             ---ofme---
   4      =2  *           Copyleft (c) 2021, 寰椋灞辫胺 / ofourme@163.com
   5      =2  *           License: LGPL
   6      =2  *
   7      =2  *   LIB.H-V1.0.1 (2021.Dec.11th)
   8      =2  *
   9      =2  ********************************************************************************
  10      =2  */
  11      =2  
  12      =2  #ifndef __LOLI3_LIB_H__
  13      =2  #define __LOLI3_LIB_H__
  14      =2  
  15      =2  /*-DO NOT ADD YOUR CODE BEFORE HERE!-*\\\\\\\\\\\\\\\\\\\\\\\\\\\\\-WIDTH: 80-*/
  16      =2  /******************************************************************************/
  17      =2  
  18      =2  #include "loli3_recv_port.h"
   1      =3  /*
   2      =3  ********************************************************************************
   3      =3  *                             ---ofme---
   4      =3  *           Copyleft (c) 2023, 寰椋灞辫胺 / ofourme@163.com
   5      =3  *           License: LGPL
   6      =3  *
   7      =3  *   LOLI3_RECV_PORT.H-V1.1.0 (2023.Oct.30th)
   8      =3  *
   9      =3  ********************************************************************************
  10      =3  */
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 28  

  11      =3  
  12      =3  #ifndef __LOLI3_RECV_PORT_H__
  13      =3  #define __LOLI3_RECV_PORT_H__
  14      =3  
  15      =3  /*-DO NOT ADD YOUR CODE BEFORE HERE!-*\\\\\\\\\\\\\\\\\\\\\\\\\\\\\-WIDTH: 80-*/
  16      =3  /******************************************************************************/
  17      =3  
  18      =3  #include "hw.h"
   1      =4  /*
   2      =4  ********************************************************************************
   3      =4  *                             ---ofme---
   4      =4  *           Copyleft (c) 2021-2023, 寰椋灞辫胺 / ofourme@163.com
   5      =4  *           License: LGPL
   6      =4  *
   7      =4  *   HW.H-V1.0.0 (2023.Oct.25th)
   8      =4  *
   9      =4  ********************************************************************************
  10      =4  */
  11      =4  
  12      =4  #ifndef __HW_H__
           =4 #define __HW_H__
           =4 
           =4 /*-DO NOT ADD YOUR CODE BEFORE HERE!-*\\\\\\\\\\\\\\\\\\\\\\\\\\\\\-WIDTH: 80-*/
           =4 /******************************************************************************/
           =4 
           =4 #define STC_15W408AS    0
           =4 #define STC_15W408AS_SOP20  0
           =4 #define ARDUINO_ATMEAG328P  0
           =4 #define STC_8H        1
           =4 #define STC_8H_TSSOP20    1
           =4 
           =4 #define FOSC  12000000UL
           =4 
           =4 /*%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*/
           =4 
           =4 /*////////////////////////////////////////////////////////////////////////////*/
           =4 #if STC_15W408AS
           =4 /*////////////////////////////////////////////////////////////////////////////*/
           =4 
           =4 #include "stc15w.h"
           =4 #include<intrins.h>
           =4 
           =4 #define u8 unsigned char
           =4 #define u16 unsigned int
           =4 #define s16 signed int
           =4 #define u32 unsigned long
           =4 #define word_t u8
           =4 #define uint8_t u8
           =4 #define bool bit
           =4   
           =4 /*////////////////////////////////////////////////////////////////////////////*/
           =4 #elif STC_8H
           =4 /*////////////////////////////////////////////////////////////////////////////*/
           =4 
           =4 #include "STC8H.h"
           =4 #include<intrins.h>
           =4 
           =4 #define u8 unsigned char
           =4 #define u16 unsigned int
           =4 #define s16 signed int
           =4 #define u32 unsigned long
           =4 #define s32 signed long
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 29  

           =4 #define word_t u8
           =4 #define uint8_t u8
           =4 #define bool bit
           =4 
           =4 /*////////////////////////////////////////////////////////////////////////////*/
           =4 #elif ARDUINO_ATMEAG328P
           =4 /*////////////////////////////////////////////////////////////////////////////*/
           =4 
           =4 #include <arduino.h>
           =4 
           =4 #define u8 unsigned char
           =4 #define u16 unsigned int
           =4 #define s16 signed int
           =4 #define u32 unsigned long
           =4 #define word_t u8
           =4 #define uint8_t u8
           =4 #define idata
           =4 #define xdata
           =4 #define code
           =4 
           =4 /*////////////////////////////////////////////////////////////////////////////*/
           =4 
           =4 #else
           =4   #error "board not defined!"
           =4 #endif
           =4 
           =4 /*////////////////////////////////////////////////////////////////////////////*/
           =4 
           =4 /******************************************************************************/
           =4 /*-DO NOT ADD YOUR CODE AFTER HERE!-*\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\-WIDTH: 80-*/
           =4 
           =4 #endif
  19      =3  #include "config.h"
   1      =4  /*
   2      =4  ********************************************************************************
   3      =4  *                             ---ofme---
   4      =4  *           Copyleft (c) 2021-2023, 寰椋灞辫胺 / ofourme@163.com
   5      =4  *           License: LGPL
   6      =4  *
   7      =4  *   CONFIG.H-V1.1.0 (2023.Oct.25th)
   8      =4  *
   9      =4  ********************************************************************************
  10      =4  */
  11      =4  
  12      =4  #ifndef __CONFIG_H__
           =4 #define __CONFIG_H__
           =4 
           =4 /*-DO NOT ADD YOUR CODE BEFORE HERE!-*\\\\\\\\\\\\\\\\\\\\\\\\\\\\\-WIDTH: 80-*/
           =4 /******************************************************************************/
           =4 
           =4 #include "hw.h"
           =4 #include "loli3_pact.h"
           =4 
           =4 /*%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*/
           =4 
           =4 // enable SBUS_DEBUG  would disable SBUS pin output
           =4 //#define SBUS_DEBUG
           =4 //----------------------------------------------------------------------------//
           =4 // Set the SBUS baud rate. UART always be SERIAL_8E2(8浣版锛舵￠锛2浣姝浣)
           =4 // Optional: SBUS_BPS_9600, SBUS_BPS_115200, SBUS_BPS_100K; Default: SBUS_BPS_100K.
           =4 //#define SBUS_BPS_115200
           =4 #define SBUS_BPS_100K
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 30  

           =4 //----------------------------------------------------------------------------//
           =4 // 杞璇浠诲″跺ㄦヨ绮惧害锛榛璁3ms
           =4 #define LOLI3_RECV_TIMERS_TICK_SETPS 3
           =4 //----------------------------------------------------------------------------//
           =4 // LOLI3_RECV_PWM_MINNUM: LOLI3_RECV_PWM_MINNUM_DEFAULT would compatibility with loli3 original.
           =4 //                        0 would set the minimum if possible.  浣澶у藉艰存娉杈0.
           =4 #define LOLI3_RECV_PWM_MINNUM   LOLI3_RECV_PWM_MINNUM_DEFAULT
           =4 // #define LOLI3_RECV_PWM_MINNUM 0
           =4 //----------------------------------------------------------------------------//
           =4 // ㄥ垫甸诲惧ぇ帮姝ｅ父3
           =4 #define VOLTAGE_BAT_MULTIPLE 3
           =4 //----------------------------------------------------------------------------//
           =4 // 靛璋寸郴帮寰璋姝ょ郴颁互归涓
           =4 /*
           =4   BGV: ㄥ淇″锋靛ADC硷BGV5锛5VADC硷BGVx锛VCC靛惰浆㈢ADC
           =4   STC15W: ㄥ淇″锋靛哄浣涓纭瀹锛哄靛Va=BGV5/1024*5=BGVx/1024*VCC
           =4           --> VCC=BGV5/1024*5*1024/BGVx=BGV5*5/BGVx
           =4   STC8H:  ㄥ淇″锋靛哄(1.19v)锛 1.19v=BGV5/1024*5=BGVx/1024*VCC
           =4           --> VCC=BGV5/1024*5*1024/BGVx=BGV5*5/BGVx
           =4           朵腑BGV5=1.19*1024/5+0.5~=244
           =4 */
           =4 #if STC_15W408AS
           =4   #define BGV5  260
           =4 #elif STC_8H
           =4   #define BGV5  ((unsigned long)(1.19*1024/5+0.5))
           =4 #else
           =4   #err "BGV5 not defined."
           =4 #endif
           =4   // 姝ゅ5涓5V靛归锛浼杈靛版╁ぇ100浠ヤ灏扮瑰2浣锛杈adc
             -兼护娉㈠╁ぇ8锛涓虹涓浣*5*100*8
           =4 #define VOLTAGE_IC_ADJUST ((5ul*100*8)*BGV5)
           =4 //----------------------------------------------------------------------------//
           =4 
           =4 #ifdef SBUS_DEBUG
           =4   #define DBG(str) hw_uart_puts(str)
           =4 #else
           =4   #define DBG(str)
           =4 #endif
           =4 
           =4 /*////////////////////////////////////////////////////////////////////////////*/
           =4 #if STC_15W408AS
           =4 /*////////////////////////////////////////////////////////////////////////////*/
           =4 
           =4 #if STC_15W408AS_SOP20
           =4 //瀹涔绀虹
           =4 sbit LED=P1^0;
           =4 //瀹涔8涓杈
           =4 sbit CH1=P3^7;
           =4 sbit CH2=P3^6;
           =4 sbit CH3=P3^5;
           =4 sbit CH4=P3^4;
           =4 sbit CH5=P3^3;
           =4 sbit CH6=P3^2;
           =4 sbit CH7=P3^1;
           =4 sbit CH8=P3^0;
           =4 
           =4 sbit CH9=P5^4;
           =4 sbit CH10=P5^5;
           =4 
           =4 //瀹涔绾挎ā绠¤
           =4 sbit CE  =P1^2;
           =4 sbit SCK =P1^4;
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 31  

           =4 sbit MISO=P1^6;
           =4 sbit IRQ =P1^7;
           =4 sbit MOSI=P1^5;
           =4 sbit CSN =P1^3;
           =4 
           =4 #else
           =4 //瀹涔绀虹
           =4 sbit LED=P1^2;
           =4 //瀹涔8涓杈
           =4 sbit CH1=P3^7;
           =4 sbit CH2=P3^6;
           =4 sbit CH3=P3^5;
           =4 sbit CH4=P3^4;
           =4 sbit CH5=P3^3;
           =4 sbit CH6=P3^2;
           =4 sbit CH7=P3^1;
           =4 sbit CH8=P3^0;
           =4 //瀹涔绾挎ā绠¤
           =4 sbit CE  =P5^5;
           =4 sbit SCK =P5^4;
           =4 sbit MISO=P1^7;
           =4 sbit IRQ =P1^6;
           =4 sbit MOSI=P1^5;
           =4 sbit CSN =P1^4;
           =4 
           =4 #endif
           =4 
           =4 /*////////////////////////////////////*/
           =4 // 规纭浠跺垫′欢缂璇
           =4 // PIN_CH5/PIN_CH_OUTㄤ杈猴PIN_CH6/PIN_CH_INㄤ杈ャユ舵哄ㄦ跺妫娴CH5
             -CH6ワ伴瀵广
           =4 #define PIN_CH_OUT_P33
           =4 #define PIN_CH_IN_P32
           =4 // ㄥ垫靛妫娴寮P1.1
           =4 #define PIN_ADC_P1X 1
           =4 // EEPROM椤甸㈠ぇ灏
           =4 #define SIZE_STC_EEPROM_PAGE  512
           =4 #define SIZE_EEPROM_PAGE      SIZE_STC_EEPROM_PAGE
           =4 // 舵椹卞
           =4 #define LED_ON()  do{LED = 1;}while(0)
           =4 #define LED_OFF() do{LED = 0;}while(0)
           =4 
           =4 /*////////////////////////////////////*/
           =4 #define FUNC_MILLIS_EN  0
           =4 #define FUNC_MICROS_EN  1
           =4 #define FUNC_DELAY_EN   1
           =4 #define FUNC_DELAYMICROSECONDS_EN 0
           =4 
           =4 /*////////////////////////////////////////////////////////////////////////////*/
           =4 #elif STC_8H
           =4 /*////////////////////////////////////////////////////////////////////////////*/
           =4 
           =4 #if STC_8H_TSSOP20
           =4 
           =4 sbit LED=P1^2;
           =4 
           =4 sbit CH1=P5^4;
           =4 sbit CH2=P1^7;
           =4 sbit CH3=P1^0;
           =4 sbit CH4=P3^7;
           =4 sbit CH5=P3^6;
           =4 sbit CH6=P3^4;
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 32  

           =4 sbit CH7=P3^3;
           =4 sbit CH8=P3^0;
           =4 
           =4 sbit CHx=P3^1;
           =4 
           =4 sbit CE  =P3^2;
           =4 sbit SCK =P1^5;
           =4 sbit MISO=P1^4;
           =4 sbit IRQ =P1^6;
           =4 sbit MOSI=P1^3;
           =4 sbit CSN =P3^5;
           =4 
           =4 #else
           =4 #endif
           =4 
           =4 /*////////////////////////////////////*/
           =4 // 娆″涔VOLTAGE_BAT_MULTIPLE锛瑕㈢版
           =4 #if defined  VOLTAGE_BAT_MULTIPLE
           =4 #define VOLTAGE_BAT_MULTIPLE 4
           =4 #endif
           =4 #define PIN_CH_OUT_P37
           =4 #define PIN_CH_IN_P36
           =4 #define PIN_ADC_P1X 1
           =4 #define SIZE_STC_EEPROM_PAGE  512
           =4 #define SIZE_EEPROM_PAGE      SIZE_STC_EEPROM_PAGE
           =4 #define LED_ON()  do{LED = 1;}while(0)
           =4 #define LED_OFF() do{LED = 0;}while(0)
           =4 
           =4 /*////////////////////////////////////*/
           =4 #define FUNC_MILLIS_EN  0
           =4 #define FUNC_MICROS_EN  1
           =4 #define FUNC_DELAY_EN   1
           =4 #define FUNC_DELAYMICROSECONDS_EN 0
           =4 
           =4 /*////////////////////////////////////////////////////////////////////////////*/
           =4 #elif ARDUINO_ATMEAG328P
           =4 /*////////////////////////////////////////////////////////////////////////////*/
           =4 
           =4 #define DEF_SPI_SOFT
           =4 //瀹涔绀虹
           =4 #define LED 13
           =4 //瀹涔8涓杈
           =4 //瀹涔绾挎ā绠¤
           =4 #define IRQ   2
           =4 #define MISO  3
           =4 #define MOSI  4
           =4 #define SCK   5
           =4 #define CSN   6
           =4 #define CE    7
           =4 
           =4 /*////////////////////////////////////////////////////////////////////////////*/
           =4 #endif
           =4 /******************************************************************************/
           =4 /*-DO NOT ADD YOUR CODE AFTER HERE!-*\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\-WIDTH: 80-*/
           =4 
           =4 #endif
  20      =3  
  21      =3  /*%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*/
  22      =3  
  23      =3  #define UART_BPS_100K 0
  24      =3  #define UART_BPS_9600 1
  25      =3  #define UART_BPS_115200 2
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 33  

  26      =3  
  27      =3  /*////////////////////////////////////////////////////////////////////////////*/
  28      =3  
  29      =3  // 绯荤濮芥
  30      =3  void hw_sys_init();
  31      =3  //----------------------------------------------------------------------------//
  32      =3  // 虹藉芥
  33      =3  void hw_delay_1ms(void);
  34      =3  void hw_delay_ms(u8 ms);
  35      =3  //----------------------------------------------------------------------------//
  36      =3  // 绔ｅ濮杈ヨ哄芥
  37      =3  void hw_io_chs_init();
  38      =3  // CHｆㄦ借
  39      =3  void hw_io_chs_pushpull();
  40      =3    // 杈哄
  41      =3  void hw_io_cho_init();
  42      =3  void hw_io_cho_clr();
  43      =3  void hw_io_cho_set();
  44      =3    // 杈ュ
  45      =3  void hw_io_chi_init();
  46      =3  u8   hw_io_chi_get();
  47      =3  //----------------------------------------------------------------------------//
  48      =3  // 涓插ｅ濮杈哄芥
  49      =3  #define UART_BPS_100K 0
  50      =3  #define UART_BPS_9600 1
  51      =3  #define UART_BPS_115200 2
  52      =3  void hw_uart_init(u8 bps);      // bps[UART_BPS_100K, UART_BPS_9600, UART_BPS_115200]
  53      =3  void UART_pushByte(char c);     // push a byte into UART then return, not waitting for finished
  54      =3  void hw_uart_puts(const char* str);
  55      =3  //----------------------------------------------------------------------------//
  56      =3  // 靛ADC藉濮璇诲芥
  57      =3  void hw_adc_init();
  58      =3  void hw_adc_open(u8 i); // adc杞㈤锛灏adc_read绛寰堕淬//0锛ㄥ靛锛1
             -澶ㄧ靛
  59      =3  u16  hw_adc_read();     // ユ舵虹搴瀵ADC杩版10浣澶锛绉绘涓纭浠堕娉ㄦ淇
             -涓淬
  60      =3  //----------------------------------------------------------------------------//
  61      =3  // 绯荤蹇璺冲藉濮
  62      =3  void hw_tick_init();
  63      =3      //ㄧ郴缁ㄦт换★PCAу跺瀛锛PCA瀹跺锛娓や腑蹇锛
  64      =3      //void hw_tick_en() // #define hw_tick_en()     do{CCON =0x40;}while(0)
  65      =3  
  66      =3  //煎arduino堕村芥帮渚璧浜hw_tick_init()
  67      =3  #if FUNC_MILLIS_EN
           =3 u32  millis(void);
           =3 #endif
  70      =3  #if FUNC_MICROS_EN
  71      =3  u16  micros(void);
  72      =3  #endif
  73      =3  #if FUNC_DELAY_EN
  74      =3  void delay(u16 ms);
  75      =3  #endif
  76      =3  #if FUNC_DELAYMICROSECONDS_EN
           =3 void delayMicroseconds(u16 us);
           =3 #endif
  79      =3  
  80      =3  //----------------------------------------------------------------------------//
  81      =3  // 甸杈/pwm杈哄藉濮浣胯
  82      =3  void hw_output_init();
  83      =3      //CH杈猴T0锛T0涓芥版у惰猴
  84      =3      //void hw_output_en();
  85      =3  //ch[0,7]瀵瑰[CH1,CH8]; STC15W瀹CH1&CH2锛STC8H瀹CH1&CH2&CH6&CH7
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 34  

  86      =3  //pwm[0,255]
  87      =3  void hw_pwm_en (u8 ch);
  88      =3  void hw_pwm_dis(u8 ch);
  89      =3  void hw_pwm_set(u8 ch, u8 pwm);
  90      =3  //----------------------------------------------------------------------------//
  91      =3  // 舵浣芥
  92      =3  void LED_on(void);
  93      =3  void LED_off(void);
  94      =3  //----------------------------------------------------------------------------//
  95      =3  // 绯荤EEPROM藉芥
  96      =3  u8   EEPROM_read (u16 addr);
  97      =3  void EEPROM_write(u16 addr,u8 byte);
  98      =3  void EEPROM_cleanPage(u8 addPage);
  99      =3  #if 0
           =3 void EEPROM_begin();
           =3 void EEPROM_end();
           =3 void DATA_mutex_get();
           =3 void DATA_mutex_release();
           =3 #elif 0
           =3 #define EEPROM_begin()        do{IAP_CONTR=0x83;}while(0)
           =3 #define EEPROM_end()          do{IAP_CONTR=0x00;}while(0)
           =3 #define DATA_mutex_get()      do{EA = 0;}while(0)
           =3 #define DATA_mutex_release()  do{EA = 1;}while(0)
           =3 #endif
 110      =3  //----------------------------------------------------------------------------//
 111      =3  
 112      =3  // NRF24L01 SPI绔IO妯″濮
 113      =3  void SPI_init_0(void);
 114      =3  void SPI_init_1(void);
 115      =3  
 116      =3  /*////////////////////////////////////////////////////////////////////////////*/
 117      =3  #if STC_15W408AS
           =3 /*////////////////////////////////////////////////////////////////////////////*/
           =3 
           =3 // 24L01 IRQ 杈1琛ㄧず娌℃涓
           =3 #define noRF()          IRQ
           =3 #define SPI_MISO_GET()  MISO
           =3 // stc51 uart ｈ0灏瀵艰翠覆ｆ娉杈猴缃涓1淇璇涓插ｆｅ父宸ヤ
           =3 #define PIN_SBUS_SET()  CH7=1
           =3 #define PIN_PPM_SET()   CH1=1
           =3 #define PIN_PPM_CLR()   CH1=0
           =3 
           =3 #define hw_tick_en()          do{CCON =0x40;}while(0)
           =3 #define hw_output_en()        do{TR0=1;}while(0)
           =3 #define EEPROM_begin()        do{IAP_CONTR=0x83;}while(0)
           =3 #define EEPROM_end()          do{IAP_CONTR=0x00;}while(0)
           =3 //#define DATA_mutex_get()      do{EA = 0;}while(0)
           =3 //#define DATA_mutex_release()  do{EA = 1;}while(0)
           =3 //璁炬版浠T0涓涓琚浣跨锛ㄥ瀛版淇瑰浠绂姝T0涓涓绂姝㈡
             -涓锛垮浣跨ㄥ伴璇版
           =3 #define DATA_mutex_get()      do{ET0 = 0;}while(0)
           =3 #define DATA_mutex_release()  do{ET0 = 1;}while(0)
           =3 
           =3 //----------------------------------------------------------------------------//
           =3 // port for stc15w
           =3 #define NSS CSN
           =3 #define SPI_SLAVE_EN()  do{NSS =0;}while(0)
           =3 #define SPI_SLAVE_DIS() do{NSS =1;}while(0)
           =3 #define SPI_SCK_SET()   do{SCK =1;}while(0)
           =3 #define SPI_SCK_CLR()   do{SCK =0;}while(0)
           =3 #define SPI_MOSI_SET()  do{MOSI=1;}while(0)
           =3 #define SPI_MOSI_CLR()  do{MOSI=0;}while(0)
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 35  

           =3 
           =3 #define NRF_CE_SET()    do{CE = 1;}while(0)
           =3 #define NRF_CE_CLR()    do{CE = 0;}while(0)
           =3 
           =3 //----------------------------------------------------------------------------//
           =3 #define INTERRUPT_dis() do{EA = 0;}while(0)
           =3 #define INTERRUPT_en()  do{EA = 1;}while(0)
           =3 
           =3 /*////////////////////////////////////////////////////////////////////////////*/
           =3 #elif STC_8H
 157      =3  /*////////////////////////////////////////////////////////////////////////////*/
 158      =3  
 159      =3  #define noRF()                IRQ
 160      =3  #define SPI_MISO_GET()        MISO
 161      =3  #define PIN_SBUS_SET()        CHx=1
 162      =3  #define PIN_PPM_SET()         CHx=1
 163      =3  #define PIN_PPM_CLR()         CHx=0
 164      =3  // ㄥ跺T1
 165      =3  #define hw_tick_en()          do{TR1=1;}while(0)
 166      =3  #define hw_output_en()        do{TR0=1;}while(0)
 167      =3  // stc8h 涓 stc15w eeprom涓煎归瑕娉ㄦ
 168      =3  #define EEPROM_begin()        do{IAP_TPS=((FOSC+500000)/1000000);IAP_CONTR=0x80;}while(0)
 169      =3  #define EEPROM_end()          do{IAP_CONTR=0x00;}while(0)
 170      =3  #define DATA_mutex_get()      do{ET0 = 0;}while(0)
 171      =3  #define DATA_mutex_release()  do{ET0 = 1;}while(0)
 172      =3  #define NSS                   CSN
 173      =3  #define SPI_SLAVE_EN()        do{NSS =0;}while(0)
 174      =3  #define SPI_SLAVE_DIS()       do{NSS =1;}while(0)
 175      =3  #define SPI_SCK_SET()         do{SCK =1;}while(0)
 176      =3  #define SPI_SCK_CLR()         do{SCK =0;}while(0)
 177      =3  #define SPI_MOSI_SET()        do{MOSI=1;}while(0)
 178      =3  #define SPI_MOSI_CLR()        do{MOSI=0;}while(0)
 179      =3  #define NRF_CE_SET()          do{CE = 1;}while(0)
 180      =3  #define NRF_CE_CLR()          do{CE = 0;}while(0)
 181      =3  #define INTERRUPT_dis()       do{EA = 0;}while(0)
 182      =3  #define INTERRUPT_en()        do{EA = 1;}while(0)
 183      =3  
 184      =3  /*////////////////////////////////////////////////////////////////////////////*/
 185      =3  #elif ARDUINO_ATMEAG328P
           =3 /*////////////////////////////////////////////////////////////////////////////*/
           =3 
           =3 #define noRF()          digitalRead(IRQ)
           =3 //LED
           =3 #define LED_ON()        digitalWrite(LED, HIGH)
           =3 #define LED_OFF()       digitalWrite(LED, LOW)
           =3 
           =3 // port for arduino
           =3 //NRF24L01
           =3 #define SPI_SLAVE_EN()  digitalWrite(CSN, LOW)
           =3 #define SPI_SLAVE_DIS() digitalWrite(CSN, HIGH)
           =3 #define NRF_CE_SET()    digitalWrite(CE, HIGH)
           =3 #define NRF_CE_CLR()    digitalWrite(CE, LOW)
           =3 
           =3 #ifdef DEF_SPI_SOFT
           =3 #define SPI_SCK_SET()   digitalWrite(SCK, HIGH)
           =3 #define SPI_SCK_CLR()   digitalWrite(SCK, LOW)
           =3 #define SPI_MOSI_SET()  digitalWrite(MOSI, HIGH)
           =3 #define SPI_MOSI_CLR()  digitalWrite(MOSI, LOW)
           =3 #define SPI_MISO_GET()  digitalRead(MISO)
           =3 #endif
           =3 
           =3 
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 36  

           =3 #define EEPROM_begin()
           =3 #define EEPROM_end()
           =3 #define DATA_mutex_get()
           =3 #define DATA_mutex_release()
           =3 
           =3 #define SIZE_STC_EEPROM_PAGE  512
           =3 #define SIZE_EEPROM_PAGE      SIZE_STC_EEPROM_PAGE
           =3 
           =3 #define INTERRUPT_dis()
           =3 #define INTERRUPT_en()
           =3 /*////////////////////////////////////////////////////////////////////////////*/
           =3 #endif
 221      =3  /******************************************************************************/
 222      =3  /*-DO NOT ADD YOUR CODE AFTER HERE!-*\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\-WIDTH: 80-*/
 223      =3  
 224      =3  #endif
  19      =2  #include "loli3_pact.h"
   1      =3  /*
   2      =3  ********************************************************************************
   3      =3  *                             ---ofme---
   4      =3  *           Copyleft (c) 2008-2023, 寰椋灞辫胺/ofourme@163.com
   5      =3  *           License: LGPL
   6      =3  *
   7      =3  *   LOLI3_PACT.H-V1.1.0 (2023.Sep.18th)
   8      =3  *
   9      =3  ********************************************************************************
  10      =3  */
  11      =3  
  12      =3  #ifndef __LOLI3_PACT_H__
           =3 #define __LOLI3_PACT_H__
           =3 
           =3 /*-DO NOT ADD YOUR CODE BEFORE HERE!-*\\\\\\\\\\\\\\\\\\\\\\\\\\\\\-WIDTH: 80-*/
           =3 /******************************************************************************/
           =3 /*////////////////////////////////////////////////////////////////////////////*/
           =3 
           =3 //浣跨ㄢLOVE浣涓洪璁ゅ板
           =3 #define LOLI3_ADDRESS_STARTUP           'L','O','V','E','!'
           =3 #define LOLI3_NRF_DATA_LENGTH           11
           =3 
           =3 //浣跨33棰浣涓烘ユ舵洪杩CHANNEL
           =3 #define LOLI3_CHANNEL_STARTUP           33
           =3 //浣跨66棰浣涓烘ユ舵哄CHANNEL
           =3 #define LOLI3_CHANNEL_CONNECT           66
           =3 //璺抽CHANNEL伴
           =3 #define LOLI3_NUM_HOPPING               5
           =3 //榛璁ょㄤ璺抽5涓CHANNEL
           =3 #define LOLI3_HOPPING_STARTUP           10,35,60,85,110
           =3 
           =3 /*////////////////////////////////////////////////////////////////////////////*/
           =3 // update(20230918):
           =3 // 垫鸿ヨ瀹0.5~2.5ms锛ㄦ20ms锛妯¤垫轰浣跨ㄨ瀹1~2ms
           =3 // loli3ユ舵哄规ユ跺扮版浣*27/20=1.35杩绠锛宠瀹=0.811+CH*27/20
           =3 // 涓轰煎癸舵锛淇逛负*43(*43淇璇10浣CH间婧㈠16浣)跺崇Щ5
             -=*43/32=1.34375~=1.35锛
           =3 //     --> 朵慨规浣瀹戒负0.813浠ヤ涓浣1.5ms涓锛宠瀹=0.813+CH*43>>5
           =3 #define LOLI3_RECV_SERVO_RANGE_MUL      43
           =3 #define LOLI3_RECV_SERVO_RANGE_R_SHIFT  5
           =3 // loli3ユ舵烘锛褰pwm板煎浜涓瀹硷存ヨ0姝ゅ版楂1023璁剧疆
             -
           =3 #define LOLI3_RECV_PWM_MINNUM_DEFAULT   100
           =3 
           =3 /******************************************************************************/
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 37  

           =3 /*-DO NOT ADD YOUR CODE AFTER HERE!-*\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\-WIDTH: 80-*/
           =3 
           =3 #endif
  20      =2  
  21      =2  /*%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*/
  22      =2  
  23      =2  typedef struct
  24      =2  {
  25      =2    u8  isRuning;
  26      =2    u8  isTimeout;
  27      =2    u16 count;
  28      =2    u16 reload;
  29      =2    void (*callback)(void);
  30      =2  
  31      =2  } STimer;
  32      =2  
  33      =2  /*////////////////////////////////////////////////////////////////////////////*/
  34      =2  u8    EEPROM_test (void);
  35      =2  void  LED_flash(u8 t);
  36      =2  char* Int16ToStr(u16 i);
  37      =2  /*----------------------------------------------------------------------------*/
  38      =2  //NRF24L01虹芥
  39      =2  
  40      =2  void NRF_init(void);
  41      =2  
  42      =2  u8   NRF_REG_read(u8 address);
  43      =2  void NRF_REG_write(u8 address,u8 command);
  44      =2  void NRF_FIFO_write(u8 DATA_OUT[],u8 lengh);
  45      =2  void NRF_FIFO_read(u8 DATA_IN[],u8 lengh);
  46      =2  void NRF_addr_tx(u8 DATA_IN[]);
  47      =2  void NRF_addr_rx(u8 DATA_IN[]);
  48      =2  void NRF_mode_rx();
  49      =2  void NRF_mode_tx();
  50      =2  void NRF_power(u8 P);
  51      =2  void NRF_channel(u8 c);
  52      =2  void NRF_irq_clean(void);
  53      =2  void NRF_reset();
  54      =2  
  55      =2  #define NRF_BAD_CSNCLK  0x01
  56      =2  #define NRF_BAD_MOSI    0x02
  57      =2  #define NRF_BAD_CE      0x04
  58      =2  #define NRF_BAD_IRQ     0x08
  59      =2  #define NRF_BAD_MISO    0x10
  60      =2  #define NRF_BAD_RESET   0x80
  61      =2  u8      NRF_test();
  62      =2  
  63      =2  /*----------------------------------------------------------------------------*/
  64      =2  void timer_init(STimer* pTimers, u8 numTimers);
  65      =2  void timer_cbRegist(u8 index, void (*callback)(void));
  66      =2  void timer_startOnce(u8 index, u16 ms);
  67      =2  void timer_startTimes(u8 index, u16 ms, u8 times);
  68      =2  void timer_startCycle(u8 index, u16 ms);
  69      =2  void timer_tick();  // called by ISR
  70      =2  void timer_process();
  71      =2  
  72      =2  /******************************************************************************/
  73      =2  /*-DO NOT ADD YOUR CODE AFTER HERE!-*\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\-WIDTH: 80-*/
  74      =2  
  75      =2  #endif
  22      =1  
  23      =1  /*%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*/
  24      =1  
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 38  

  25      =1  typedef struct
  26      =1  {
  27      =1    u8 isValid;
  28      =1    u8 hopping[LOLI3_NUM_HOPPING];    // 棰/channel扮锛寰浣跨
  29      =1    u8 address[5];    // ユ舵哄板
  30      =1    u8 SBUS;          // SBUS杈
  31      =1    u8 PPM;           // PPM杈
  32      =1    u8 CH1_PWM,CH2_PWM,CH7_PWM; // PMW杈猴CH7杈烘锛姝ゅ浠涓哄煎Loli3猴
             -朵璇out_control_data瀛瀵归锛
  33      =1    u8 CH1_SW,CH2_SW,CH3_SW,CH4_SW,CH5_SW,CH6_SW,CH7_SW,CH8_SW; // 寮抽杈
  34      =1    u16 out_control_data[8];
  35      =1  #if STC_8H
  36      =1    u8 CH6_PWM; // STC8H板CH6/CH7杈PWM锛朵腑CH6杈洪瑕淇瑰灏虹搴澧稿炽
  37      =1  #endif
  38      =1    
  39      =1  } Loli3RecvSet;   // ユ舵鸿剧疆锛淇瀛EEPROM
  40      =1  
  41      =1  typedef struct
  42      =1  {
  43      =1    u16 CH_data[8];   // 板[0:1023]
  44      =1    u16 voltage_ic, voltage_batt; // 靛,垫靛锛板兼╁ぇ100锛濡125琛ㄧず1.25V
  45      =1    u16 adc_ic, adc_batt;         // 靛adc杞㈡护娉㈡版瀛
  46      =1    u8  rx_num;       // 姣绉ユ跺板烘版娆℃
  47      =1    u8  SBUS_tx[25];  // 板艰浆涓SBUS扮
  48      =1    u8  stateLED;     // LED舵
  49      =1    u8  stateNRF;
  50      =1    u8  stateOUTPUT;
  51      =1    u8  isOutputChanged;
  52      =1  
  53      =1  } Loli3RecvData;  // ユ舵哄ㄦ版
  54      =1  
  55      =1  typedef struct
  56      =1  {
  57      =1    u8 rx[LOLI3_NRF_DATA_LENGTH];
  58      =1    u8 tx[LOLI3_NRF_DATA_LENGTH];
  59      =1    u8 rx_cnt;        // 轰俊疯℃板
  60      =1    u8 hopping_cnt;   // 淇″蜂涪澶辫烦棰璁℃板
  61      =1    u8 channel_index; // 棰绱㈠
  62      =1  
  63      =1  } Loli3RecvNrf;     // 绾挎ā版
  64      =1  
  65      =1  typedef enum {STATE_LED_OFF=0, STATE_LED_FLASH, STATE_LED_ON, STATE_LED_IDLE} E_STATE_LED;
  66      =1  typedef enum {STATE_NRF_INIT=0, STATE_NRF_RX, STATE_NRF_TX, STATE_NRF_TX_WAIT, STATE_NRF_DATA_PROC} E_STAT
             -E_NRF;
  67      =1  typedef enum {STATE_OUTPUT_SERVO=0, STATE_OUTPUT_PPM, STATE_OUTPUT_SBUS} E_STATE_OUTPUT;
  68      =1  typedef enum {TIMER_LED_FLASH=0, TIMER_SIGNAL_COUNT, TIMER_SIGNAL_LOST, TIMER_DATA_SAVE,  TIMER_LED_OFF, T
             -IMER_CHANNEL_LOST, TIMER_ADC, NUM_TIMERS} E_TIMER;
  69      =1  
  70      =1  /*////////////////////////////////////////////////////////////////////////////*/
  71      =1  #ifdef __LOLI3_RECV_C__
           =1 /*----------------------------------------------------------------------------*/
           =1 
           =1 // 浼鸿烦棰绱㈠
           =1 const u8 code _random_hopping_index[100]={
           =1           4,1,3,2,2,1,0,0,2,2,2,3,4,1,2,1,4,3,3,4,//鸿烦棰搴
           =1           2,0,2,2,3,1,2,3,2,2,2,4,2,4,0,3,4,2,3,1,
           =1           0,3,1,3,3,0,2,0,4,3,3,3,3,3,4,1,1,4,3,0,
           =1           1,0,3,2,3,2,3,3,4,4,1,3,0,0,3,1,3,3,3,0,
           =1           3,3,4,1,2,4,1,3,0,1,3,4,4,3,2,3,1,2,3,3};
           =1 
           =1 // 寮哄板
           =1 const u8 code recv_address_startup[5]={LOLI3_ADDRESS_STARTUP};
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 39  

           =1 
           =1 //缁浣璧兼榛璁や负0
           =1 Loli3RecvSet xdata  recvSet = {0,LOLI3_HOPPING_STARTUP,LOLI3_ADDRESS_STARTUP,0,0,0,0,0,511,511,0,511,511,5
             -11,511,511};
           =1 Loli3RecvData       recv    = {0,1023,0,1023,0,1023,0,0};
           =1 Loli3RecvNrf  xdata nrf     = {0};
           =1 
           =1 STimer idata timer[NUM_TIMERS];
           =1 
           =1 // 靛ㄥ垫靛 ADC 缂瀛
           =1 u16 _adc_ic,_adc_batt;
           =1 
           =1 /*----------------------------------------------------------------------------*/
           =1 #else
  97      =1  /*----------------------------------------------------------------------------*/
  98      =1  
  99      =1  extern Loli3RecvSet  xdata recvSet;
 100      =1  extern Loli3RecvData recv;
 101      =1  extern Loli3RecvNrf  xdata nrf;
 102      =1  extern u16 _adc_ic;
 103      =1  extern u16 _adc_batt;
 104      =1  
 105      =1  /*----------------------------------------------------------------------------*/
 106      =1  #endif
 107      =1  /*////////////////////////////////////////////////////////////////////////////*//*////////////////////////
             -////////////////////////////////////////////////////*/
 108      =1  
 109      =1  void DATA_read();
 110      =1  void DATA_save();
 111      =1  
 112      =1  void callback_timer_signal_count(void);
 113      =1  void callback_timer_signal_lost(void);
 114      =1  void callback_timer_data_save(void);
 115      =1  void callback_timer_led_off(void);
 116      =1  void callback_timer_channel_lost(void);
 117      =1  void callback_timer_adc(void);
 118      =1  void timers_init();
 119      =1  
 120      =1  /*////////////////////////////////////////////////////////////////////////////*/
 121      =1  
 122      =1  void SBUS_data_push();
 123      =1  
 124      =1  void recv_connect();
 125      =1  void recv_reconnect();
 126      =1  void recv_init();
 127      =1  void recv_begin(void);
 128      =1  #if 0
           =1 void recv_nrf_read(void);
           =1 void recv_nrf_write(void);
           =1 #endif
 132      =1  /*////////////////////////////////////////////////////////////////////////////*/
 133      =1  
 134      =1  
 135      =1  
 136      =1  /******************************************************************************/
 137      =1  /*-DO NOT ADD YOUR CODE AFTER HERE!-*\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\-WIDTH: 80-*/
 138      =1  
 139      =1  #endif
  18          
  19          /*%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*/
  20          
  21          
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 40  

  22          /*////////////////////////////////////////////////////////////////////////////*/
  23          
  24          void setup(void)
  25          {
  26   1        hw_sys_init();
  27   1      
  28   1        LED_on();
  29   1        delay(200);
  30   1      
  31   1        timers_init();
  32   1        timer_startCycle(TIMER_ADC, 50);
  33   1        timer_startCycle(TIMER_SIGNAL_COUNT,1000);
  34   1        DBG("LOLI3 recv start up.");
  35   1      
  36   1        recv_init();
  37   1        LED_off();    //逛寒绀虹抽锛琛ㄧず烘ｅ父宸ヤ
  38   1      
  39   1        NRF_channel(recvSet.hopping[0]);
  40   1        while(noRF());
  41   1        DBG("LOLI3 recv connected.");
  42   1        recv_begin();
  43   1      #if 0
                //绌洪翠澶跺娉ㄩ  
                DBG("ADDR:");
                DBG(Int16ToStr(recvSet.address[0]));
                DBG(Int16ToStr(recvSet.address[1]));
                DBG(Int16ToStr(recvSet.address[2]));
                DBG(Int16ToStr(recvSet.address[3]));
                DBG(Int16ToStr(recvSet.address[4]));
                DBG("HOPPING:");
                DBG(Int16ToStr(recvSet.hopping[0]));
                DBG(Int16ToStr(recvSet.hopping[1]));
                DBG(Int16ToStr(recvSet.hopping[2]));
                DBG(Int16ToStr(recvSet.hopping[3]));
                DBG(Int16ToStr(recvSet.hopping[4]));
                DBG("REG stat:");
                DBG(Int16ToStr(NRF_REG_read(0x00)));
                DBG(Int16ToStr(NRF_REG_read(0x01)));
                DBG(Int16ToStr(NRF_REG_read(0x02)));
                DBG(Int16ToStr(NRF_REG_read(0x03)));
                DBG(Int16ToStr(NRF_REG_read(0x04)));
                DBG(Int16ToStr(NRF_REG_read(0x05)));
                DBG(Int16ToStr(NRF_REG_read(0x06)));
                DBG(Int16ToStr(NRF_REG_read(0x07)));
                DBG("REG +8");
                DBG(Int16ToStr(NRF_REG_read(0x08)));
                DBG(Int16ToStr(NRF_REG_read(0x09)));
                DBG(Int16ToStr(NRF_REG_read(0x0a)));
                DBG(Int16ToStr(NRF_REG_read(0x0b)));
                DBG(Int16ToStr(NRF_REG_read(0x0c)));
                DBG(Int16ToStr(NRF_REG_read(0x0d)));
                DBG(Int16ToStr(NRF_REG_read(0x0e)));
                DBG(Int16ToStr(NRF_REG_read(0x0f)));
                DBG("REG +8");
                DBG(Int16ToStr(NRF_REG_read(0x10)));
                DBG(Int16ToStr(NRF_REG_read(0x11)));
                DBG(Int16ToStr(NRF_REG_read(0x12)));
                DBG(Int16ToStr(NRF_REG_read(0x13)));
                DBG("REG +4");
                DBG("REG end.");
              #endif
  83   1      }
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 41  

  84          
  85          /*////////////////////////////////////////////////////////////////////////////*/
  86            
  87          #if 1
  88          u8 temp=0;
  89          #endif
  90          
  91          void loop (void)
  92          {
  93   1        u16 buff[8];
  94   1        u8 i;
  95   1        static u16 t1,t2;
  96   1      
  97   1          timer_process();
  98   1      
  99   1          switch(recv.stateLED)
 100   1          {
 101   2            case STATE_LED_OFF:
 102   2              LED_off();
 103   2              recv.stateLED = STATE_LED_IDLE;
 104   2              break;
 105   2            case STATE_LED_FLASH:
 106   2              LED_on();
 107   2              timer_startOnce(TIMER_LED_OFF,10);
 108   2              recv.stateLED = STATE_LED_IDLE;
 109   2              break;
 110   2            case STATE_LED_ON:
 111   2              LED_on();
 112   2              break;
 113   2            case STATE_LED_IDLE:
 114   2              break;
 115   2            default:
 116   2              break;
 117   2          }
 118   1      
 119   1          switch(recv.stateNRF)
 120   1          {
 121   2            case STATE_NRF_RX:
 122   2              if(noRF()) break;
 123   2      
 124   2              if(recv.stateLED ==STATE_LED_ON) recv.stateLED = STATE_LED_OFF;
 125   2      
 126   2              nrf.rx_cnt++;
 127   2              nrf.hopping_cnt=0;//跺版淇″峰锋拌烦棰
 128   2      
 129   2              timer_startOnce(TIMER_SIGNAL_LOST, 2000);
 130   2              timer_startCycle(TIMER_CHANNEL_LOST, 22); //3*7~3*8
 131   2      
 132   2              NRF_FIFO_read(nrf.rx, LOLI3_NRF_DATA_LENGTH);   //璇诲ユ舵版
 133   2              NRF_irq_clean();
 134   2      
 135   2              NRF_mode_tx();
 136   2              recv.stateNRF = STATE_NRF_TX;
 137   2              //break;
 138   2            case STATE_NRF_TX:
 139   2              nrf.tx[0]=recv.rx_num;
 140   2              // nrf.tx[0]=20;  // for test
 141   2      #if 1
 142   2              if(temp!=recv.rx_num)
 143   2              {
 144   3                temp = recv.rx_num;
 145   3                DBG("rx num: ");
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 42  

 146   3                DBG(Int16ToStr(temp));
 147   3              }
 148   2      #endif
 149   2      
 150   2              recv.voltage_ic=VOLTAGE_IC_ADJUST/_adc_ic;
 151   2              // recv.voltage_ic=500; // for test
 152   2              nrf.tx[1]=recv.voltage_ic>>8;
 153   2              nrf.tx[2]=recv.voltage_ic;
 154   2              // >>13 琛ㄧず10浣ADC姣や互8锛_adc_batt惧ぇ绯绘帮
 155   2              recv.voltage_batt=((long)_adc_batt*recv.voltage_ic*VOLTAGE_BAT_MULTIPLE)>>13;
 156   2              // recv.voltage_batt=500; // for test
 157   2              nrf.tx[3]=recv.voltage_batt>>8;
 158   2              nrf.tx[4]=recv.voltage_batt;
 159   2              NRF_FIFO_write(nrf.tx, LOLI3_NRF_DATA_LENGTH);
 160   2      
 161   2              recv.stateNRF = STATE_NRF_TX_WAIT;
 162   2              t1 = micros();
 163   2              //break;
 164   2            case STATE_NRF_TX_WAIT:
 165   2              t2 = micros()-t1;
 166   2              if(!noRF() || t2>=1000) // wait about 0.72ms for TX_DS irq
 167   2              {
 168   3                //if(!noRF())  DBG("tx finished.");
 169   3                if(t2>=1000) DBG(Int16ToStr(t2)); // timeout
 170   3                NRF_mode_rx();  // NRF_irq_clean(); change mode would clean irq.
 171   3                recv.stateNRF = STATE_NRF_DATA_PROC;
 172   3              }
 173   2              break;  // 跺版版缁绔涓瓒讹璁╁CPU堕淬
 174   2            case STATE_NRF_DATA_PROC:
 175   2              nrf.channel_index++;
 176   2              if(nrf.channel_index>4)nrf.channel_index=0;
 177   2              NRF_channel(recvSet.hopping[nrf.channel_index]);
 178   2      
 179   2              if(nrf.rx[0]==0xa2)
 180   2              {
 181   3                if(nrf.rx[1]&0x80)  { recvSet.PPM=1;  }
 182   3                else                { recvSet.PPM=0;  }
 183   3                if(nrf.rx[1]&0x40)  { recvSet.SBUS=1;     }
 184   3                else                { recvSet.SBUS=0;     }
 185   3                if(nrf.rx[1]&0x08)  { recvSet.CH1_PWM=1; hw_pwm_en(0); }
 186   3                else                { recvSet.CH1_PWM=0; hw_pwm_dis(0);}
 187   3                if(nrf.rx[1]&0x04)  { recvSet.CH2_PWM=1; hw_pwm_en(1); }
 188   3                else                { recvSet.CH2_PWM=0; hw_pwm_dis(1);}
 189   3      #if STC_8H
 190   3                if(nrf.rx[1]&0x02)  { recvSet.CH7_PWM=1; hw_pwm_en(6); }//recvSet.CH7_PWM=1;  } // STC15W娑
             -STC8H㈠
 191   3                else                { recvSet.CH7_PWM=0; hw_pwm_dis(6); }//recvSet.CH7_PWM=0;  }
 192   3                if(nrf.rx[1]&0x01)  { recvSet.CH6_PWM=1; hw_pwm_en(5); }//recvSet.CH6_PWM=1;  } // STC8H╁锛
             -瑕淇瑰灏虹搴
 193   3                else                { recvSet.CH6_PWM=0; hw_pwm_dis(5); }//recvSet.CH6_PWM=0;  }
 194   3      #endif
 195   3                if(nrf.rx[2]&0x80)  { recvSet.CH1_SW=1;   }
 196   3                else                { recvSet.CH1_SW=0;   }
 197   3                if(nrf.rx[2]&0x40)  { recvSet.CH2_SW=1;   }
 198   3                else                { recvSet.CH2_SW=0;   }
 199   3                if(nrf.rx[2]&0x20)  { recvSet.CH3_SW=1;   }
 200   3                else                { recvSet.CH3_SW=0;   }
 201   3                if(nrf.rx[2]&0x10)  { recvSet.CH4_SW=1;   }
 202   3                else                { recvSet.CH4_SW=0;   }
 203   3                if(nrf.rx[2]&0x08)  { recvSet.CH5_SW=1;   }
 204   3                else                { recvSet.CH5_SW=0;   }
 205   3                if(nrf.rx[2]&0x04)  { recvSet.CH6_SW=1;   }
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 43  

 206   3                else                { recvSet.CH6_SW=0;   }
 207   3                if(nrf.rx[2]&0x02)  { recvSet.CH7_SW=1;   }
 208   3                else                { recvSet.CH7_SW=0;   }
 209   3                if(nrf.rx[2]&0x01)  { recvSet.CH8_SW=1;   }
 210   3                else                { recvSet.CH8_SW=0;   }
 211   3      
 212   3                recv.isOutputChanged = 1;
 213   3                DBG("OUTPUT mode changed");
 214   3                timer_startOnce(TIMER_DATA_SAVE, 1000); // save data 1000ms later
 215   3              }
 216   2              else if(nrf.rx[0]==0xa0 || nrf.rx[0]==0xa1)
 217   2              {
 218   3                buff[0]=nrf.rx[1];
 219   3                buff[0]<<=2;
 220   3                buff[0]+=nrf.rx[2]>>6;
 221   3                buff[1]=nrf.rx[2]&0x3f;
 222   3                buff[1]<<=4;
 223   3                buff[1]+=nrf.rx[3]>>4;
 224   3                buff[2]=nrf.rx[3]&0x0f;
 225   3                buff[2]<<=6;
 226   3                buff[2]+=nrf.rx[4]>>2;
 227   3                buff[3]=nrf.rx[4]&0x03;
 228   3                buff[3]<<=8;
 229   3                buff[3]+=nrf.rx[5];
 230   3      
 231   3                buff[4]=nrf.rx[6];
 232   3                buff[4]<<=2;
 233   3                buff[4]+=nrf.rx[7]>>6;
 234   3                buff[5]=nrf.rx[7]&0x3f;
 235   3                buff[5]<<=4;
 236   3                buff[5]+=nrf.rx[8]>>4;
 237   3                buff[6]=nrf.rx[8]&0x0f;
 238   3                buff[6]<<=6;
 239   3                buff[6]+=nrf.rx[9]>>2;
 240   3                buff[7]=nrf.rx[9]&0x03;
 241   3                buff[7]<<=8;
 242   3                buff[7]+=nrf.rx[10];
 243   3                
 244   3                if(nrf.rx[0]==0xa0)
 245   3                {
 246   4                  for(i=0; i<8; i++)
 247   4                  {
 248   5                    recvSet.out_control_data[i]=buff[i];
 249   5                  }
 250   4      
 251   4                  timer_startOnce(TIMER_DATA_SAVE, 1000); // save data 1000ms later
 252   4                }
 253   3                else  // nrf.rx[0]==0xa1
 254   3                {
 255   4                  for(i=0; i<8; i++)
 256   4                  {
 257   5                    DATA_mutex_get();   // 叉涓绋搴杈洪璇版
 258   5                    recv.CH_data[i]=buff[i];
 259   5                    DATA_mutex_release();
 260   5                  }
 261   4                  SBUS_data_push();
 262   4                }
 263   3            }
 264   2      
 265   2            recv.stateNRF = STATE_NRF_RX;
 266   2            break;
 267   2          default:
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 44  

 268   2            //NRF_mode_rx();
 269   2            recv.stateNRF = STATE_NRF_RX;
 270   2            break;
 271   2          }
 272   1      }
 273          
 274          /******************************************************************************/
 275          /*-DO NOT ADD YOUR CODE AFTER HERE!-*\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\-WIDTH: 80-*/
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 45  

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION setup (BEGIN)
                                           ; SOURCE LINE # 24
                                           ; SOURCE LINE # 25
                                           ; SOURCE LINE # 26
0000 120000      E     LCALL   hw_sys_init
                                           ; SOURCE LINE # 28
0003 120000      E     LCALL   LED_on
                                           ; SOURCE LINE # 29
0006 7FC8              MOV     R7,#0C8H
0008 7E00              MOV     R6,#00H
000A 120000      E     LCALL   _delay
                                           ; SOURCE LINE # 31
000D 120000      E     LCALL   timers_init
                                           ; SOURCE LINE # 32
0010 7D32              MOV     R5,#032H
0012 7C00              MOV     R4,#00H
0014 7F06              MOV     R7,#06H
0016 120000      E     LCALL   _timer_startCycle
                                           ; SOURCE LINE # 33
0019 7DE8              MOV     R5,#0E8H
001B 7C03              MOV     R4,#03H
001D 7F01              MOV     R7,#01H
001F 120000      E     LCALL   _timer_startCycle
                                           ; SOURCE LINE # 36
0022 120000      E     LCALL   recv_init
                                           ; SOURCE LINE # 37
0025 120000      E     LCALL   LED_off
                                           ; SOURCE LINE # 39
0028 900000      E     MOV     DPTR,#recvSet+01H
002B E0                MOVX    A,@DPTR
002C FF                MOV     R7,A
002D 120000      E     LCALL   _NRF_channel
0030         ?C0001:
                                           ; SOURCE LINE # 40
0030 2096FD            JB      IRQ,?C0001
                                           ; SOURCE LINE # 42
0033 020000      E     LJMP    recv_begin
             ; FUNCTION setup (END)

             ; FUNCTION loop (BEGIN)
                                           ; SOURCE LINE # 91
                                           ; SOURCE LINE # 92
                                           ; SOURCE LINE # 97
0000 120000      E     LCALL   timer_process
                                           ; SOURCE LINE # 99
0003 E500        E     MOV     A,recv+032H
0005 14                DEC     A
0006 600C              JZ      ?C0006
0008 14                DEC     A
0009 601A              JZ      ?C0007
000B 2402              ADD     A,#02H
000D 7019              JNZ     ?C0004
                                           ; SOURCE LINE # 100
                                           ; SOURCE LINE # 101
000F         ?C0005:
                                           ; SOURCE LINE # 102
000F 120000      E     LCALL   LED_off
                                           ; SOURCE LINE # 103
                                           ; SOURCE LINE # 104
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 46  

0012 800C              SJMP    ?C0074
                                           ; SOURCE LINE # 105
0014         ?C0006:
                                           ; SOURCE LINE # 106
0014 120000      E     LCALL   LED_on
                                           ; SOURCE LINE # 107
0017 7D0A              MOV     R5,#0AH
0019 7C00              MOV     R4,#00H
001B 7F04              MOV     R7,#04H
001D 120000      E     LCALL   _timer_startOnce
                                           ; SOURCE LINE # 108
0020         ?C0074:
0020 750003      E     MOV     recv+032H,#03H
                                           ; SOURCE LINE # 109
0023 8003              SJMP    ?C0004
                                           ; SOURCE LINE # 110
0025         ?C0007:
                                           ; SOURCE LINE # 111
0025 120000      E     LCALL   LED_on
                                           ; SOURCE LINE # 112
                                           ; SOURCE LINE # 113
                                           ; SOURCE LINE # 114
                                           ; SOURCE LINE # 115
                                           ; SOURCE LINE # 116
                                           ; SOURCE LINE # 117
0028         ?C0004:
                                           ; SOURCE LINE # 119
0028 E500        E     MOV     A,recv+033H
002A 24FE              ADD     A,#0FEH
002C 6050              JZ      ?C0014
002E 14                DEC     A
002F 7003              JNZ     $ + 5H
0031 020000      R     LJMP    ?C0016
0034 14                DEC     A
0035 7003              JNZ     $ + 5H
0037 020000      R     LJMP    ?C0020
003A 2403              ADD     A,#03H
003C 6003              JZ      $ + 5H
003E 020000      R     LJMP    ?C0068
                                           ; SOURCE LINE # 120
                                           ; SOURCE LINE # 121
0041         ?C0011:
                                           ; SOURCE LINE # 122
0041 309603            JNB     IRQ,$ + 6H
0044 020000      R     LJMP    ?C0069
                                           ; SOURCE LINE # 124
0047 E500        E     MOV     A,recv+032H
0049 6402              XRL     A,#02H
004B 7002              JNZ     ?C0013
004D F500        E     MOV     recv+032H,A
004F         ?C0013:
                                           ; SOURCE LINE # 126
004F 900000      E     MOV     DPTR,#nrf+016H
0052 E0                MOVX    A,@DPTR
0053 04                INC     A
0054 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 127
0055 E4                CLR     A
0056 A3                INC     DPTR
0057 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 129
0058 7DD0              MOV     R5,#0D0H
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 47  

005A 7C07              MOV     R4,#07H
005C 7F02              MOV     R7,#02H
005E 120000      E     LCALL   _timer_startOnce
                                           ; SOURCE LINE # 130
0061 7D16              MOV     R5,#016H
0063 7C00              MOV     R4,#00H
0065 7F05              MOV     R7,#05H
0067 120000      E     LCALL   _timer_startCycle
                                           ; SOURCE LINE # 132
006A 7B01              MOV     R3,#01H
006C 7A00        E     MOV     R2,#HIGH nrf
006E 7900        E     MOV     R1,#LOW nrf
0070 7D0B              MOV     R5,#0BH
0072 120000      E     LCALL   _NRF_FIFO_read
                                           ; SOURCE LINE # 133
0075 120000      E     LCALL   NRF_irq_clean
                                           ; SOURCE LINE # 135
0078 120000      E     LCALL   NRF_mode_tx
                                           ; SOURCE LINE # 136
007B 750002      E     MOV     recv+033H,#02H
                                           ; SOURCE LINE # 138
007E         ?C0014:
                                           ; SOURCE LINE # 139
007E 900000      E     MOV     DPTR,#nrf+0BH
0081 E500        E     MOV     A,recv+018H
0083 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 142
0084 6500        R     XRL     A,temp
0086 6003              JZ      ?C0015
                                           ; SOURCE LINE # 143
                                           ; SOURCE LINE # 144
0088 850000      R     MOV     temp,recv+018H
                                           ; SOURCE LINE # 147
008B         ?C0015:
                                           ; SOURCE LINE # 150
008B AE00        E     MOV     R6,_adc_ic
008D AF00        E     MOV     R7,_adc_ic+01H
008F AB07              MOV     R3,AR7
0091 AA06              MOV     R2,AR6
0093 E4                CLR     A
0094 F9                MOV     R1,A
0095 F8                MOV     R0,A
0096 7F80              MOV     R7,#080H
0098 7EE4              MOV     R6,#0E4H
009A 7D0E              MOV     R5,#0EH
009C FC                MOV     R4,A
009D 120000      E     LCALL   ?C?ULDIV
00A0 8E00        E     MOV     recv+010H,R6
00A2 8F00        E     MOV     recv+011H,R7
                                           ; SOURCE LINE # 152
00A4 E500        E     MOV     A,recv+010H
00A6 900000      E     MOV     DPTR,#nrf+0CH
00A9 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 153
00AA A3                INC     DPTR
00AB EF                MOV     A,R7
00AC F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 155
00AD AE00        E     MOV     R6,_adc_batt
00AF AF00        E     MOV     R7,_adc_batt+01H
00B1 AB07              MOV     R3,AR7
00B3 AA06              MOV     R2,AR6
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 48  

00B5 E4                CLR     A
00B6 F9                MOV     R1,A
00B7 F8                MOV     R0,A
00B8 AE00        E     MOV     R6,recv+010H
00BA AF00        E     MOV     R7,recv+011H
00BC FC                MOV     R4,A
00BD FD                MOV     R5,A
00BE 120000      E     LCALL   ?C?LMUL
00C1 E4                CLR     A
00C2 7B03              MOV     R3,#03H
00C4 FA                MOV     R2,A
00C5 F9                MOV     R1,A
00C6 F8                MOV     R0,A
00C7 120000      E     LCALL   ?C?LMUL
00CA 780D              MOV     R0,#0DH
00CC 120000      E     LCALL   ?C?SLSHR
00CF 8E00        E     MOV     recv+012H,R6
00D1 8F00        E     MOV     recv+013H,R7
                                           ; SOURCE LINE # 157
00D3 E500        E     MOV     A,recv+012H
00D5 900000      E     MOV     DPTR,#nrf+0EH
00D8 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 158
00D9 A3                INC     DPTR
00DA EF                MOV     A,R7
00DB F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 159
00DC 7B01              MOV     R3,#01H
00DE 7A00        E     MOV     R2,#HIGH nrf+0BH
00E0 7900        E     MOV     R1,#LOW nrf+0BH
00E2 7D0B              MOV     R5,#0BH
00E4 120000      E     LCALL   _NRF_FIFO_write
                                           ; SOURCE LINE # 161
00E7 750003      E     MOV     recv+033H,#03H
                                           ; SOURCE LINE # 162
00EA 120000      E     LCALL   micros
00ED 8E00        R     MOV     t1,R6
00EF 8F00        R     MOV     t1+01H,R7
                                           ; SOURCE LINE # 164
00F1         ?C0016:
                                           ; SOURCE LINE # 165
00F1 120000      E     LCALL   micros
00F4 C3                CLR     C
00F5 EF                MOV     A,R7
00F6 9500        R     SUBB    A,t1+01H
00F8 F500        R     MOV     t2+01H,A
00FA EE                MOV     A,R6
00FB 9500        R     SUBB    A,t1
00FD F500        R     MOV     t2,A
                                           ; SOURCE LINE # 166
00FF 30960E            JNB     IRQ,?C0018
0102 C3                CLR     C
0103 E500        R     MOV     A,t2+01H
0105 94E8              SUBB    A,#0E8H
0107 E500        R     MOV     A,t2
0109 9403              SUBB    A,#03H
010B 5003              JNC     $ + 5H
010D 020000      R     LJMP    ?C0069
0110         ?C0018:
                                           ; SOURCE LINE # 167
                                           ; SOURCE LINE # 169
                                           ; SOURCE LINE # 170
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 49  

0110 120000      E     LCALL   NRF_mode_rx
                                           ; SOURCE LINE # 171
0113 750004      E     MOV     recv+033H,#04H
                                           ; SOURCE LINE # 172
                                           ; SOURCE LINE # 173
0116 22                RET     
                                           ; SOURCE LINE # 174
0117         ?C0020:
                                           ; SOURCE LINE # 175
0117 900000      E     MOV     DPTR,#nrf+018H
011A E0                MOVX    A,@DPTR
011B 04                INC     A
011C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 176
011D E0                MOVX    A,@DPTR
011E D3                SETB    C
011F 9404              SUBB    A,#04H
0121 7480              MOV     A,#080H
0123 9480              SUBB    A,#080H
0125 4002              JC      ?C0021
0127 E4                CLR     A
0128 F0                MOVX    @DPTR,A
0129         ?C0021:
                                           ; SOURCE LINE # 177
0129 900000      E     MOV     DPTR,#nrf+018H
012C E0                MOVX    A,@DPTR
012D 2400        E     ADD     A,#LOW recvSet+01H
012F F582              MOV     DPL,A
0131 E4                CLR     A
0132 3400        E     ADDC    A,#HIGH recvSet+01H
0134 F583              MOV     DPH,A
0136 E0                MOVX    A,@DPTR
0137 FF                MOV     R7,A
0138 120000      E     LCALL   _NRF_channel
                                           ; SOURCE LINE # 179
013B 900000      E     MOV     DPTR,#nrf
013E E0                MOVX    A,@DPTR
013F 64A2              XRL     A,#0A2H
0141 6003              JZ      $ + 5H
0143 020000      R     LJMP    ?C0022
                                           ; SOURCE LINE # 180
                                           ; SOURCE LINE # 181
0146 A3                INC     DPTR
0147 E0                MOVX    A,@DPTR
0148 FF                MOV     R7,A
0149 30E708            JNB     ACC.7,?C0023
014C 900000      E     MOV     DPTR,#recvSet+0CH
014F 7401              MOV     A,#01H
0151 F0                MOVX    @DPTR,A
0152 8005              SJMP    ?C0024
0154         ?C0023:
                                           ; SOURCE LINE # 182
0154 E4                CLR     A
0155 900000      E     MOV     DPTR,#recvSet+0CH
0158 F0                MOVX    @DPTR,A
0159         ?C0024:
                                           ; SOURCE LINE # 183
0159 EF                MOV     A,R7
015A 30E608            JNB     ACC.6,?C0025
015D 900000      E     MOV     DPTR,#recvSet+0BH
0160 7401              MOV     A,#01H
0162 F0                MOVX    @DPTR,A
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 50  

0163 8005              SJMP    ?C0026
0165         ?C0025:
                                           ; SOURCE LINE # 184
0165 E4                CLR     A
0166 900000      E     MOV     DPTR,#recvSet+0BH
0169 F0                MOVX    @DPTR,A
016A         ?C0026:
                                           ; SOURCE LINE # 185
016A EF                MOV     A,R7
016B 30E30D            JNB     ACC.3,?C0027
016E 900000      E     MOV     DPTR,#recvSet+0DH
0171 7401              MOV     A,#01H
0173 F0                MOVX    @DPTR,A
0174 E4                CLR     A
0175 FF                MOV     R7,A
0176 120000      E     LCALL   _hw_pwm_en
0179 8009              SJMP    ?C0028
017B         ?C0027:
                                           ; SOURCE LINE # 186
017B E4                CLR     A
017C 900000      E     MOV     DPTR,#recvSet+0DH
017F F0                MOVX    @DPTR,A
0180 FF                MOV     R7,A
0181 120000      E     LCALL   _hw_pwm_dis
0184         ?C0028:
                                           ; SOURCE LINE # 187
0184 900000      E     MOV     DPTR,#nrf+01H
0187 E0                MOVX    A,@DPTR
0188 30E20C            JNB     ACC.2,?C0029
018B 900000      E     MOV     DPTR,#recvSet+0EH
018E 7401              MOV     A,#01H
0190 F0                MOVX    @DPTR,A
0191 FF                MOV     R7,A
0192 120000      E     LCALL   _hw_pwm_en
0195 800A              SJMP    ?C0030
0197         ?C0029:
                                           ; SOURCE LINE # 188
0197 E4                CLR     A
0198 900000      E     MOV     DPTR,#recvSet+0EH
019B F0                MOVX    @DPTR,A
019C 7F01              MOV     R7,#01H
019E 120000      E     LCALL   _hw_pwm_dis
01A1         ?C0030:
                                           ; SOURCE LINE # 190
01A1 900000      E     MOV     DPTR,#nrf+01H
01A4 E0                MOVX    A,@DPTR
01A5 30E10D            JNB     ACC.1,?C0031
01A8 900000      E     MOV     DPTR,#recvSet+0FH
01AB 7401              MOV     A,#01H
01AD F0                MOVX    @DPTR,A
01AE 7F06              MOV     R7,#06H
01B0 120000      E     LCALL   _hw_pwm_en
01B3 800A              SJMP    ?C0032
01B5         ?C0031:
                                           ; SOURCE LINE # 191
01B5 E4                CLR     A
01B6 900000      E     MOV     DPTR,#recvSet+0FH
01B9 F0                MOVX    @DPTR,A
01BA 7F06              MOV     R7,#06H
01BC 120000      E     LCALL   _hw_pwm_dis
01BF         ?C0032:
                                           ; SOURCE LINE # 192
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 51  

01BF 900000      E     MOV     DPTR,#nrf+01H
01C2 E0                MOVX    A,@DPTR
01C3 30E00D            JNB     ACC.0,?C0033
01C6 900000      E     MOV     DPTR,#recvSet+028H
01C9 7401              MOV     A,#01H
01CB F0                MOVX    @DPTR,A
01CC 7F05              MOV     R7,#05H
01CE 120000      E     LCALL   _hw_pwm_en
01D1 800A              SJMP    ?C0034
01D3         ?C0033:
                                           ; SOURCE LINE # 193
01D3 E4                CLR     A
01D4 900000      E     MOV     DPTR,#recvSet+028H
01D7 F0                MOVX    @DPTR,A
01D8 7F05              MOV     R7,#05H
01DA 120000      E     LCALL   _hw_pwm_dis
01DD         ?C0034:
                                           ; SOURCE LINE # 195
01DD 900000      E     MOV     DPTR,#nrf+02H
01E0 E0                MOVX    A,@DPTR
01E1 FF                MOV     R7,A
01E2 30E708            JNB     ACC.7,?C0035
01E5 900000      E     MOV     DPTR,#recvSet+010H
01E8 7401              MOV     A,#01H
01EA F0                MOVX    @DPTR,A
01EB 8005              SJMP    ?C0036
01ED         ?C0035:
                                           ; SOURCE LINE # 196
01ED E4                CLR     A
01EE 900000      E     MOV     DPTR,#recvSet+010H
01F1 F0                MOVX    @DPTR,A
01F2         ?C0036:
                                           ; SOURCE LINE # 197
01F2 EF                MOV     A,R7
01F3 30E608            JNB     ACC.6,?C0037
01F6 900000      E     MOV     DPTR,#recvSet+011H
01F9 7401              MOV     A,#01H
01FB F0                MOVX    @DPTR,A
01FC 8005              SJMP    ?C0038
01FE         ?C0037:
                                           ; SOURCE LINE # 198
01FE E4                CLR     A
01FF 900000      E     MOV     DPTR,#recvSet+011H
0202 F0                MOVX    @DPTR,A
0203         ?C0038:
                                           ; SOURCE LINE # 199
0203 EF                MOV     A,R7
0204 30E508            JNB     ACC.5,?C0039
0207 900000      E     MOV     DPTR,#recvSet+012H
020A 7401              MOV     A,#01H
020C F0                MOVX    @DPTR,A
020D 8005              SJMP    ?C0040
020F         ?C0039:
                                           ; SOURCE LINE # 200
020F E4                CLR     A
0210 900000      E     MOV     DPTR,#recvSet+012H
0213 F0                MOVX    @DPTR,A
0214         ?C0040:
                                           ; SOURCE LINE # 201
0214 EF                MOV     A,R7
0215 30E408            JNB     ACC.4,?C0041
0218 900000      E     MOV     DPTR,#recvSet+013H
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 52  

021B 7401              MOV     A,#01H
021D F0                MOVX    @DPTR,A
021E 8005              SJMP    ?C0042
0220         ?C0041:
                                           ; SOURCE LINE # 202
0220 E4                CLR     A
0221 900000      E     MOV     DPTR,#recvSet+013H
0224 F0                MOVX    @DPTR,A
0225         ?C0042:
                                           ; SOURCE LINE # 203
0225 EF                MOV     A,R7
0226 30E308            JNB     ACC.3,?C0043
0229 900000      E     MOV     DPTR,#recvSet+014H
022C 7401              MOV     A,#01H
022E F0                MOVX    @DPTR,A
022F 8005              SJMP    ?C0044
0231         ?C0043:
                                           ; SOURCE LINE # 204
0231 E4                CLR     A
0232 900000      E     MOV     DPTR,#recvSet+014H
0235 F0                MOVX    @DPTR,A
0236         ?C0044:
                                           ; SOURCE LINE # 205
0236 EF                MOV     A,R7
0237 30E208            JNB     ACC.2,?C0045
023A 900000      E     MOV     DPTR,#recvSet+015H
023D 7401              MOV     A,#01H
023F F0                MOVX    @DPTR,A
0240 8005              SJMP    ?C0046
0242         ?C0045:
                                           ; SOURCE LINE # 206
0242 E4                CLR     A
0243 900000      E     MOV     DPTR,#recvSet+015H
0246 F0                MOVX    @DPTR,A
0247         ?C0046:
                                           ; SOURCE LINE # 207
0247 EF                MOV     A,R7
0248 30E108            JNB     ACC.1,?C0047
024B 900000      E     MOV     DPTR,#recvSet+016H
024E 7401              MOV     A,#01H
0250 F0                MOVX    @DPTR,A
0251 8005              SJMP    ?C0048
0253         ?C0047:
                                           ; SOURCE LINE # 208
0253 E4                CLR     A
0254 900000      E     MOV     DPTR,#recvSet+016H
0257 F0                MOVX    @DPTR,A
0258         ?C0048:
                                           ; SOURCE LINE # 209
0258 EF                MOV     A,R7
0259 30E008            JNB     ACC.0,?C0049
025C 900000      E     MOV     DPTR,#recvSet+017H
025F 7401              MOV     A,#01H
0261 F0                MOVX    @DPTR,A
0262 8005              SJMP    ?C0050
0264         ?C0049:
                                           ; SOURCE LINE # 210
0264 E4                CLR     A
0265 900000      E     MOV     DPTR,#recvSet+017H
0268 F0                MOVX    @DPTR,A
0269         ?C0050:
                                           ; SOURCE LINE # 212
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 53  

0269 750001      E     MOV     recv+035H,#01H
                                           ; SOURCE LINE # 214
                                           ; SOURCE LINE # 215
026C 020000      R     LJMP    ?C0075
026F         ?C0022:
                                           ; SOURCE LINE # 216
026F 900000      E     MOV     DPTR,#nrf
0272 E0                MOVX    A,@DPTR
0273 FF                MOV     R7,A
0274 64A0              XRL     A,#0A0H
0276 6008              JZ      ?C0053
0278 EF                MOV     A,R7
0279 64A1              XRL     A,#0A1H
027B 6003              JZ      $ + 5H
027D 020000      R     LJMP    ?C0076
0280         ?C0053:
                                           ; SOURCE LINE # 217
                                           ; SOURCE LINE # 218
0280 900000      E     MOV     DPTR,#nrf+01H
0283 E0                MOVX    A,@DPTR
0284 750000      R     MOV     buff,#00H
0287 F500        R     MOV     buff+01H,A
                                           ; SOURCE LINE # 219
0289 AE00        R     MOV     R6,buff
028B E500        R     MOV     A,buff+01H
028D 7802              MOV     R0,#02H
028F         ?C0070:
028F C3                CLR     C
0290 33                RLC     A
0291 CE                XCH     A,R6
0292 33                RLC     A
0293 CE                XCH     A,R6
0294 D8F9              DJNZ    R0,?C0070
0296 F500        R     MOV     buff+01H,A
0298 8E00        R     MOV     buff,R6
                                           ; SOURCE LINE # 220
029A 900000      E     MOV     DPTR,#nrf+02H
029D E0                MOVX    A,@DPTR
029E FF                MOV     R7,A
029F C4                SWAP    A
02A0 13                RRC     A
02A1 13                RRC     A
02A2 5403              ANL     A,#03H
02A4 2500        R     ADD     A,buff+01H
02A6 F500        R     MOV     buff+01H,A
02A8 E4                CLR     A
02A9 3500        R     ADDC    A,buff
02AB F500        R     MOV     buff,A
                                           ; SOURCE LINE # 221
02AD EF                MOV     A,R7
02AE 543F              ANL     A,#03FH
02B0 750000      R     MOV     buff+02H,#00H
02B3 F500        R     MOV     buff+03H,A
                                           ; SOURCE LINE # 222
02B5 C4                SWAP    A
02B6 F8                MOV     R0,A
02B7 540F              ANL     A,#0FH
02B9 C8                XCH     A,R0
02BA 68                XRL     A,R0
02BB F500        R     MOV     buff+03H,A
02BD E500        R     MOV     A,buff+02H
02BF C4                SWAP    A
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 54  

02C0 54F0              ANL     A,#0F0H
02C2 48                ORL     A,R0
02C3 F500        R     MOV     buff+02H,A
                                           ; SOURCE LINE # 223
02C5 A3                INC     DPTR
02C6 E0                MOVX    A,@DPTR
02C7 FF                MOV     R7,A
02C8 C4                SWAP    A
02C9 540F              ANL     A,#0FH
02CB 2500        R     ADD     A,buff+03H
02CD F500        R     MOV     buff+03H,A
02CF E4                CLR     A
02D0 3500        R     ADDC    A,buff+02H
02D2 F500        R     MOV     buff+02H,A
                                           ; SOURCE LINE # 224
02D4 EF                MOV     A,R7
02D5 540F              ANL     A,#0FH
02D7 750000      R     MOV     buff+04H,#00H
02DA F500        R     MOV     buff+05H,A
                                           ; SOURCE LINE # 225
02DC AE00        R     MOV     R6,buff+04H
02DE 7806              MOV     R0,#06H
02E0         ?C0071:
02E0 C3                CLR     C
02E1 33                RLC     A
02E2 CE                XCH     A,R6
02E3 33                RLC     A
02E4 CE                XCH     A,R6
02E5 D8F9              DJNZ    R0,?C0071
02E7 F500        R     MOV     buff+05H,A
02E9 8E00        R     MOV     buff+04H,R6
                                           ; SOURCE LINE # 226
02EB 900000      E     MOV     DPTR,#nrf+04H
02EE E0                MOVX    A,@DPTR
02EF FF                MOV     R7,A
02F0 13                RRC     A
02F1 13                RRC     A
02F2 543F              ANL     A,#03FH
02F4 2500        R     ADD     A,buff+05H
02F6 F500        R     MOV     buff+05H,A
02F8 E4                CLR     A
02F9 3500        R     ADDC    A,buff+04H
02FB F500        R     MOV     buff+04H,A
                                           ; SOURCE LINE # 227
02FD EF                MOV     A,R7
02FE 5403              ANL     A,#03H
0300 750000      R     MOV     buff+06H,#00H
0303 F500        R     MOV     buff+07H,A
                                           ; SOURCE LINE # 228
0305 750000      R     MOV     buff+07H,#00H
0308 F500        R     MOV     buff+06H,A
                                           ; SOURCE LINE # 229
030A A3                INC     DPTR
030B E0                MOVX    A,@DPTR
030C 2500        R     ADD     A,buff+07H
030E F500        R     MOV     buff+07H,A
0310 E4                CLR     A
0311 3500        R     ADDC    A,buff+06H
0313 F500        R     MOV     buff+06H,A
                                           ; SOURCE LINE # 231
0315 A3                INC     DPTR
0316 E0                MOVX    A,@DPTR
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 55  

0317 750000      R     MOV     buff+08H,#00H
031A F500        R     MOV     buff+09H,A
                                           ; SOURCE LINE # 232
031C AE00        R     MOV     R6,buff+08H
031E E500        R     MOV     A,buff+09H
0320 7802              MOV     R0,#02H
0322         ?C0072:
0322 C3                CLR     C
0323 33                RLC     A
0324 CE                XCH     A,R6
0325 33                RLC     A
0326 CE                XCH     A,R6
0327 D8F9              DJNZ    R0,?C0072
0329 F500        R     MOV     buff+09H,A
032B 8E00        R     MOV     buff+08H,R6
                                           ; SOURCE LINE # 233
032D 900000      E     MOV     DPTR,#nrf+07H
0330 E0                MOVX    A,@DPTR
0331 FF                MOV     R7,A
0332 C4                SWAP    A
0333 13                RRC     A
0334 13                RRC     A
0335 5403              ANL     A,#03H
0337 2500        R     ADD     A,buff+09H
0339 F500        R     MOV     buff+09H,A
033B E4                CLR     A
033C 3500        R     ADDC    A,buff+08H
033E F500        R     MOV     buff+08H,A
                                           ; SOURCE LINE # 234
0340 EF                MOV     A,R7
0341 543F              ANL     A,#03FH
0343 750000      R     MOV     buff+0AH,#00H
0346 F500        R     MOV     buff+0BH,A
                                           ; SOURCE LINE # 235
0348 C4                SWAP    A
0349 F8                MOV     R0,A
034A 540F              ANL     A,#0FH
034C C8                XCH     A,R0
034D 68                XRL     A,R0
034E F500        R     MOV     buff+0BH,A
0350 E500        R     MOV     A,buff+0AH
0352 C4                SWAP    A
0353 54F0              ANL     A,#0F0H
0355 48                ORL     A,R0
0356 F500        R     MOV     buff+0AH,A
                                           ; SOURCE LINE # 236
0358 A3                INC     DPTR
0359 E0                MOVX    A,@DPTR
035A FF                MOV     R7,A
035B C4                SWAP    A
035C 540F              ANL     A,#0FH
035E 2500        R     ADD     A,buff+0BH
0360 F500        R     MOV     buff+0BH,A
0362 E4                CLR     A
0363 3500        R     ADDC    A,buff+0AH
0365 F500        R     MOV     buff+0AH,A
                                           ; SOURCE LINE # 237
0367 EF                MOV     A,R7
0368 540F              ANL     A,#0FH
036A 750000      R     MOV     buff+0CH,#00H
036D F500        R     MOV     buff+0DH,A
                                           ; SOURCE LINE # 238
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 56  

036F AE00        R     MOV     R6,buff+0CH
0371 7806              MOV     R0,#06H
0373         ?C0073:
0373 C3                CLR     C
0374 33                RLC     A
0375 CE                XCH     A,R6
0376 33                RLC     A
0377 CE                XCH     A,R6
0378 D8F9              DJNZ    R0,?C0073
037A F500        R     MOV     buff+0DH,A
037C 8E00        R     MOV     buff+0CH,R6
                                           ; SOURCE LINE # 239
037E 900000      E     MOV     DPTR,#nrf+09H
0381 E0                MOVX    A,@DPTR
0382 FF                MOV     R7,A
0383 13                RRC     A
0384 13                RRC     A
0385 543F              ANL     A,#03FH
0387 2500        R     ADD     A,buff+0DH
0389 F500        R     MOV     buff+0DH,A
038B E4                CLR     A
038C 3500        R     ADDC    A,buff+0CH
038E F500        R     MOV     buff+0CH,A
                                           ; SOURCE LINE # 240
0390 EF                MOV     A,R7
0391 5403              ANL     A,#03H
0393 750000      R     MOV     buff+0EH,#00H
0396 F500        R     MOV     buff+0FH,A
                                           ; SOURCE LINE # 241
0398 750000      R     MOV     buff+0FH,#00H
039B F500        R     MOV     buff+0EH,A
                                           ; SOURCE LINE # 242
039D A3                INC     DPTR
039E E0                MOVX    A,@DPTR
039F 2500        R     ADD     A,buff+0FH
03A1 F500        R     MOV     buff+0FH,A
03A3 E4                CLR     A
03A4 3500        R     ADDC    A,buff+0EH
03A6 F500        R     MOV     buff+0EH,A
                                           ; SOURCE LINE # 244
03A8 900000      E     MOV     DPTR,#nrf
03AB E0                MOVX    A,@DPTR
03AC 64A0              XRL     A,#0A0H
03AE 703A              JNZ     ?C0054
                                           ; SOURCE LINE # 245
                                           ; SOURCE LINE # 246
03B0 F500        R     MOV     i,A
03B2         ?C0055:
03B2 C3                CLR     C
03B3 E500        R     MOV     A,i
03B5 9408              SUBB    A,#08H
03B7 7480              MOV     A,#080H
03B9 9480              SUBB    A,#080H
03BB 5022              JNC     ?C0056
                                           ; SOURCE LINE # 247
                                           ; SOURCE LINE # 248
03BD E500        R     MOV     A,i
03BF 25E0              ADD     A,ACC
03C1 2400        R     ADD     A,#LOW buff
03C3 F8                MOV     R0,A
03C4 E6                MOV     A,@R0
03C5 FE                MOV     R6,A
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 57  

03C6 08                INC     R0
03C7 E6                MOV     A,@R0
03C8 FF                MOV     R7,A
03C9 E500        R     MOV     A,i
03CB 25E0              ADD     A,ACC
03CD 2400        E     ADD     A,#LOW recvSet+018H
03CF F582              MOV     DPL,A
03D1 E4                CLR     A
03D2 3400        E     ADDC    A,#HIGH recvSet+018H
03D4 F583              MOV     DPH,A
03D6 EE                MOV     A,R6
03D7 F0                MOVX    @DPTR,A
03D8 A3                INC     DPTR
03D9 EF                MOV     A,R7
03DA F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 249
03DB 0500        R     INC     i
03DD 80D3              SJMP    ?C0055
03DF         ?C0056:
                                           ; SOURCE LINE # 251
03DF         ?C0075:
03DF 7DE8              MOV     R5,#0E8H
03E1 7C03              MOV     R4,#03H
03E3 7F03              MOV     R7,#03H
03E5 120000      E     LCALL   _timer_startOnce
                                           ; SOURCE LINE # 252
03E8 8033              SJMP    ?C0076
03EA         ?C0054:
                                           ; SOURCE LINE # 254
                                           ; SOURCE LINE # 255
03EA E4                CLR     A
03EB F500        R     MOV     i,A
03ED         ?C0059:
03ED C3                CLR     C
03EE E500        R     MOV     A,i
03F0 9408              SUBB    A,#08H
03F2 7480              MOV     A,#080H
03F4 9480              SUBB    A,#080H
03F6 5020              JNC     ?C0060
                                           ; SOURCE LINE # 256
                                           ; SOURCE LINE # 257
03F8 C2A9              CLR     ET0
                                           ; SOURCE LINE # 258
03FA E500        R     MOV     A,i
03FC 25E0              ADD     A,ACC
03FE 2400        R     ADD     A,#LOW buff
0400 F8                MOV     R0,A
0401 E6                MOV     A,@R0
0402 FE                MOV     R6,A
0403 08                INC     R0
0404 E6                MOV     A,@R0
0405 FF                MOV     R7,A
0406 E500        R     MOV     A,i
0408 25E0              ADD     A,ACC
040A 2400        E     ADD     A,#LOW recv
040C F8                MOV     R0,A
040D A606              MOV     @R0,AR6
040F 08                INC     R0
0410 A607              MOV     @R0,AR7
                                           ; SOURCE LINE # 259
0412 D2A9              SETB    ET0
                                           ; SOURCE LINE # 260
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 58  

0414 0500        R     INC     i
0416 80D5              SJMP    ?C0059
0418         ?C0060:
                                           ; SOURCE LINE # 261
0418 120000      E     LCALL   SBUS_data_push
                                           ; SOURCE LINE # 262
                                           ; SOURCE LINE # 263
041B         ?C0051:
                                           ; SOURCE LINE # 265
                                           ; SOURCE LINE # 266
041B 8000              SJMP    ?C0076
                                           ; SOURCE LINE # 267
041D         ?C0068:
                                           ; SOURCE LINE # 269
041D         ?C0076:
041D 750001      E     MOV     recv+033H,#01H
                                           ; SOURCE LINE # 270
                                           ; SOURCE LINE # 271
                                           ; SOURCE LINE # 272
0420         ?C0069:
0420 22                RET     
             ; FUNCTION loop (END)

C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 59  

NAME                                    CLASS   MSPACE  TYPE    OFFSET  SIZE
====                                    =====   ======  ====    ======  ====


P0 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0080H  1
Loli3RecvNrf . . . . . . . . . . . . .  TYPEDEF  -----  STRUCT   -----  25
  rx . . . . . . . . . . . . . . . . .  MEMBER   -----  ARRAY    0000H  11
  tx . . . . . . . . . . . . . . . . .  MEMBER   -----  ARRAY    000BH  11
  rx_cnt . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0016H  1
  hopping_cnt. . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0017H  1
  channel_index. . . . . . . . . . . .  MEMBER   -----  U_CHAR   0018H  1
P1 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0090H  1
P2 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00A0H  1
P3 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00B0H  1
TIMER_CHANNEL_LOST . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
P4 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00C0H  1
P5 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00C8H  1
P6 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00E8H  1
Loli3RecvSet . . . . . . . . . . . . .  TYPEDEF  -----  STRUCT   -----  41
  isValid. . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0000H  1
  hopping. . . . . . . . . . . . . . .  MEMBER   -----  ARRAY    0001H  5
  address. . . . . . . . . . . . . . .  MEMBER   -----  ARRAY    0006H  5
  SBUS . . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   000BH  1
  PPM. . . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   000CH  1
  CH1_PWM. . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   000DH  1
  CH2_PWM. . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   000EH  1
  CH7_PWM. . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   000FH  1
  CH1_SW . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0010H  1
  CH2_SW . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0011H  1
  CH3_SW . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0012H  1
  CH4_SW . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0013H  1
  CH5_SW . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0014H  1
  CH6_SW . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0015H  1
  CH7_SW . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0016H  1
  CH8_SW . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0017H  1
  out_control_data . . . . . . . . . .  MEMBER   -----  ARRAY    0018H  16
  CH6_PWM. . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0028H  1
P7 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00F8H  1
timer_process. . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
TIMER_LED_FLASH. . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
STATE_LED_FLASH. . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
IE . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00A8H  1
TIMER_DATA_SAVE. . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
TIMER_SIGNAL_COUNT . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
micros . . . . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
_delay . . . . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
LED_on . . . . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
_adc_batt. . . . . . . . . . . . . . .  EXTERN   DATA   U_INT    -----  2
IP . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00B8H  1
recv_begin . . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
_NRF_channel . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
STATE_OUTPUT_PPM . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
E_TIMER. . . . . . . . . . . . . . . .  TYPEDEF  -----  U_CHAR   -----  1
NUM_TIMERS . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_timer_startCycle. . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
TIMER_ADC. . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
timers_init. . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
recv . . . . . . . . . . . . . . . . .  EXTERN   DATA   STRUCT   -----  54
setup. . . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
SCON . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0098H  1
TCON . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0088H  1
C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 60  

NAME                                    CLASS   MSPACE  TYPE    OFFSET  SIZE
====                                    =====   ======  ====    ======  ====


_adc_ic. . . . . . . . . . . . . . . .  EXTERN   DATA   U_INT    -----  2
STATE_LED_ON . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
temp . . . . . . . . . . . . . . . . .  PUBLIC   DATA   U_CHAR   0004H  1
_hw_pwm_dis. . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
hw_sys_init. . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
STATE_LED_IDLE . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
NRF_mode_rx. . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
loop . . . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  buff . . . . . . . . . . . . . . . .  AUTO     DATA   ARRAY    0000H  16
  i. . . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0010H  1
  t1 . . . . . . . . . . . . . . . . .  STATIC   DATA   U_INT    0000H  2
  t2 . . . . . . . . . . . . . . . . .  STATIC   DATA   U_INT    0002H  2
NRF_mode_tx. . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
_timer_startOnce . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
nrf. . . . . . . . . . . . . . . . . .  EXTERN   XDATA  STRUCT   -----  25
TIMER_SIGNAL_LOST. . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
recv_init. . . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
STATE_OUTPUT_SERVO . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
ET0. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00A9H  1
_hw_pwm_en . . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
STATE_NRF_RX . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
Loli3RecvData. . . . . . . . . . . . .  TYPEDEF  -----  STRUCT   -----  54
  CH_data. . . . . . . . . . . . . . .  MEMBER   -----  ARRAY    0000H  16
  voltage_ic . . . . . . . . . . . . .  MEMBER   -----  U_INT    0010H  2
  voltage_batt . . . . . . . . . . . .  MEMBER   -----  U_INT    0012H  2
  adc_ic . . . . . . . . . . . . . . .  MEMBER   -----  U_INT    0014H  2
  adc_batt . . . . . . . . . . . . . .  MEMBER   -----  U_INT    0016H  2
  rx_num . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0018H  1
  SBUS_tx. . . . . . . . . . . . . . .  MEMBER   -----  ARRAY    0019H  25
  stateLED . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0032H  1
  stateNRF . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0033H  1
  stateOUTPUT. . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0034H  1
  isOutputChanged. . . . . . . . . . .  MEMBER   -----  U_CHAR   0035H  1
STATE_NRF_TX . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
STimer . . . . . . . . . . . . . . . .  TYPEDEF  -----  STRUCT   -----  9
  isRuning . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0000H  1
  isTimeout. . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0001H  1
  count. . . . . . . . . . . . . . . .  MEMBER   -----  U_INT    0002H  2
  reload . . . . . . . . . . . . . . .  MEMBER   -----  U_INT    0004H  2
  callback . . . . . . . . . . . . . .  MEMBER   -----  PTR      0006H  3
STATE_NRF_DATA_PROC. . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
SBUS_data_push . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
E_STATE_LED. . . . . . . . . . . . . .  TYPEDEF  -----  U_CHAR   -----  1
recvSet. . . . . . . . . . . . . . . .  EXTERN   XDATA  STRUCT   -----  41
STATE_NRF_INIT . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_NRF_FIFO_read . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
IRQ. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0096H  1
STATE_NRF_TX_WAIT. . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
E_STATE_NRF. . . . . . . . . . . . . .  TYPEDEF  -----  U_CHAR   -----  1
LED_off. . . . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
TIMER_LED_OFF. . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
STATE_LED_OFF. . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
STATE_OUTPUT_SBUS. . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
PSW. . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00D0H  1
NRF_irq_clean. . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
_NRF_FIFO_write. . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
E_STATE_OUTPUT . . . . . . . . . . . .  TYPEDEF  -----  U_CHAR   -----  1

C51 COMPILER V9.59.0.0   APP                                                               05/21/2024 12:45:55 PAGE 61  


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1111    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      5      17
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
